GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 1
Demo3.gms
C o m p i l a t i o n


   2   
   3  * version: time-step by time-step
   4   
   5   option limrow=10000;
   6   option limcol=10000;
   7   
   8  ** ----------------------------------------------------------------------
   9  **  Loading Data: sets, parameters and tables
  10  ** ----------------------------------------------------------------------
  11   
INCLUDE    C:\My Manchester\Watersys\Demo3\dataset 2.txt
  13  * There is scarcity in this scenario
  14   
  15  * Network topology defenition
  16   
  17  SETS
  18  i vector of all nodes /
  19  Desal1
  20  WWTP1
  21  Hp1
  22  J1
  23  J2
  24  J3
  25  SR2
  26  SR3
  27  SR1
  28  GW1
  29  EndPt
  30  SR4
  31  GW2
  32  Urb2
  33  Urb1
  34  Ag2
  35  Ag1
  36  /
  37   
  38  Alias(i,j)
  39   
  40  * Node types
  41   
  42  SETS
  43   
  44  desal(i) /
  45  Desal1
  46  /
  47   
  48  WWTP(i) /
  49  WWTP1
  50  /
  51   
  52  hp(i) /
  53  Hp1
  54  /
  55   
  56  jn(i) /
  57  J1
  58  J2
  59  J3
  60  /
  61   
  62  sr(i) /
  63  SR2
  64  SR3
  65  SR1
  66  SR4
  67  /
  68   
  69  gw(i) /
  70  GW1
  71  GW2
  72  /
  73   
  74  ag(i) /
  75  EndPt
  76  Ag2
  77  Ag1
  78  /
  79   
  80  ur(i) /
  81  Urb2
  82  Urb1
  83  /
  84   
  85  * Node groups
  86   
  87  SETS
  88  ns_nodes(i) non-storage nodes where mass balance constraint should be sati
      sfied /
  89  WWTP1
  90  Hp1
  91  J1
  92  J2
  93  J3
  94  EndPt
  95  Urb2
  96  Urb1
  97  Ag2
  98  Ag1
  99  /
 100   
 101  SETS
 102  s_nodes(i) storage nodes where storage mass balance constraint should be s
      atisfied /
 103  Desal1
 104  SR2
 105  SR3
 106  SR1
 107  SR4
 108  GW1
 109  GW2
 110  /
 111   
 112  SETS
 113  dem_nodes(i) demand nodes /
 114  EndPt
 115  Urb2
 116  Urb1
 117  Ag2
 118  Ag1
 119  /
 120   
 121  SETS
 122  links(i,j) vector of all links /
 123  SR2 . SR4
 124  SR1 . J1
 125  J1 . SR2
 126  GW2 . Ag2
 127  GW2 . Ag1
 128  Ag1 . J2
 129  WWTP1 . J2
 130  Urb1 . J1
 131  Ag2 . GW2
 132  Desal1 . Urb2
 133  SR4 . Ag1
 134  WWTP1 . Urb2
 135  Hp1 . SR4
 136  Urb2 . WWTP1
 137  J2 . J3
 138  SR4 . J2
 139  Ag1 . GW2
 140  SR3 . Hp1
 141  J2 . Ag2
 142  Urb1 . GW1
 143  SR4 . Urb2
 144  GW1 . Urb1
 145  Ag2 . J3
 146  J3 . EndPt
 147  SR1 . Urb1
 148  /
 149   
 150  * Connectivity matrix
 151   
 152  Table Connect(i,j)
 153                Desal1     WWTP1       Hp1        J1        J2        J3    
         SR2       SR3       SR1       GW1     EndPt       SR4       GW2      Ur
      b2      Urb1       Ag2       Ag1
 154      Desal1         0         0         0         0         0         0    
           0         0         0         0         0         0         0        
       1         0         0         0
 155   
 156       WWTP1         0         0         0         0         1         0    
           0         0         0         0         0         0         0        
       1         0         0         0
 157   
 158         Hp1         0         0         0         0         0         0    
           0         0         0         0         0         1         0        
       0         0         0         0
 159   
 160          J1         0         0         0         0         0         0    
           1         0         0         0         0         0         0        
       0         0         0         0
 161   
 162          J2         0         0         0         0         0         1    
           0         0         0         0         0         0         0        
       0         0         1         0
 163   
 164          J3         0         0         0         0         0         0    
           0         0         0         0         1         0         0        
       0         0         0         0
 165   
 166         SR2         0         0         0         0         0         0    
           0         0         0         0         0         1         0        
       0         0         0         0
 167   
 168         SR3         0         0         1         0         0         0    
           0         0         0         0         0         0         0        
       0         0         0         0
 169   
 170         SR1         0         0         0         1         0         0    
           0         0         0         0         0         0         0        
       0         1         0         0
 171   
 172         GW1         0         0         0         0         0         0    
           0         0         0         0         0         0         0        
       0         1         0         0
 173   
 174       EndPt         0         0         0         0         0         0    
           0         0         0         0         0         0         0        
       0         0         0         0
 175   
 176         SR4         0         0         0         0         1         0    
           0         0         0         0         0         0         0        
       1         0         0         1
 177   
 178         GW2         0         0         0         0         0         0    
           0         0         0         0         0         0         0        
       0         0         1         1
 179   
 180        Urb2         0         1         0         0         0         0    
           0         0         0         0         0         0         0        
       0         0         0         0
 181   
 182        Urb1         0         0         0         1         0         0    
           0         0         0         1         0         0         0        
       0         0         0         0
 183   
 184         Ag2         0         0         0         0         0         1    
           0         0         0         0         0         0         1        
       0         0         0         0
 185   
 186         Ag1         0         0         0         0         1         0    
           0         0         0         0         0         0         1        
       0         0         0         0
 187   
 188   
 189  * Time index
 190   
 191  SETS
 192   
 193  t time index /1*9/
 194   
 195   
 196  * define time steps dependent on time index (t)
 197   
 198  Parameter timestamp(t)/
 199   
 200      1 730151
 201      2 730180
 202      3 730211
 203      4 730241
 204      5 730272
 205      6 730302
 206      7 730333
 207      8 730364
 208      9 730394
 209  /;
 210   
 211  alias (t,tsteps);
 212   
 213  * Nodes data
 214   
 215   
 216  *Initial storage level
 217   
 218  Table initStor (s_nodes,t)
 219                 1
 220  Desal1         10000
 221  SR1            150
 222  SR2            200
 223  SR3            600
 224  SR4            150
 225  GW1            600
 226  GW2            600
 227   
 228  Table inflow (i,t)
 229                   1       2      3      4      5      6
 230  SR1              100     120    120    130    110    110
 231  SR3              40      30     30     30     40     50
 232  Desal1           1000    1000   1000   1000   1000   1000
 233   
 234  * Consumption coefficient
 235   
 236  Parameter cc(i);
 237     cc("Ag1")=0.6;
 238     cc("Urb1")=0.7;
 239     cc("Ag2")=0.7;
 240     cc("Urb2")=0.8;
 241     cc("EndPt")=1;
 242   
 243   
 244   
 245  Table flowmultiplier(i,j,t)
 246   
 247                   1        2        3        4        5        6        7  
            8        9
 248  SR2 . SR4        1        1        1        1        1        1        1  
            1        1
 249  SR1 . J1         1        1        1        1        1        1        1  
            1        1
 250  J1 . SR2         1        1        1        1        1        1        1  
            1        1
 251  Ag1 . J2         0.95     0.95     0.95     0.95     0.95     0.95     0.9
      5     0.95     0.95
 252  Urb1 . J1        1        1        1        1        1        1        1  
            1        1
 253  Ag2 . GW2        1        1        1        1        1        1        1  
            1        1
 254  SR4 . Ag1        0.95     0.95     0.95     0.95     0.95     0.95     0.9
      5     0.95     0.95
 255  Hp1 . SR4        1        1        1        1        1        1        1  
            1        1
 256  Urb2 . WWTP1     1        1        1        1        1        1        1  
            1        1
 257  J2 . J3          0.9      0.9      0.9      0.9      0.9      0.9      0.9
            0.9      0.9
 258  SR4 . J2         0.95     0.95     0.95     0.95     0.95     0.95     0.9
      5     0.95     0.95
 259  Ag1 . GW2        1        1        1        1        1        1        1  
            1        1
 260  SR3 . Hp1        1        1        1        1        1        1        1  
            1        1
 261  J2 . Ag2         1        1        1        1        1        1        1  
            1        1
 262  Urb1 . GW1       1        1        1        1        1        1        1  
            1        1
 263  SR4 . Urb2       1        1        1        1        1        1        1  
            1        1
 264  Ag2 . J3         1        1        1        1        1        1        1  
            1        1
 265  J3 . EndPt       1        1        1        1        1        1        1  
            1        1
 266  SR1 . Urb1       1        1        1        1        1        1        1  
            1        1
 267  GW2 . Ag2        1        1        1        1        1        1        1  
            1        1
 268  GW2 . Ag1        1        1        1        1        1        1        1  
            1        1
 269  WWTP1 . J2       1        1        1        1        1        1        1  
            1        1
 270  Desal1 . Urb2    1        1        1        1        1        1        1  
            1        1
 271  WWTP1 . Urb2     1        1        1        1        1        1        1  
            1        1
 272  GW1 . Urb1       1        1        1        1        1        1        1  
            1        1
 273   
 274   
 275  *Flow lower bound
 276   
 277  Table lower(i,j,t)
 278   
 279                   1       2       3       4       5       6       7       8
             9
 280  SR2 . SR4        10      10      10      10      10      10      10      1
      0      10
 281  SR1 . J1         10      10      10      10      10      10      10      1
      0      10
 282  J1 . SR2         10      10      10      10      10      10      10      1
      0      10
 283  Ag1 . J2         0       0       0       0       0       0       0       0
             0
 284  Urb1 . J1        0       0       0       0       0       0       0       0
             0
 285  Ag2 . GW2        0       0       0       0       0       0       0       0
             0
 286  SR4 . Ag1        0       0       0       0       0       0       0       0
             0
 287  Hp1 . SR4        50      50      50      50      50      50      50      5
      0      50
 288  Urb2 . WWTP1     0       0       0       0       0       0       0       0
             0
 289  J2 . J3          10      10      10      10      10      10      10      1
      0      10
 290  SR4 . J2         10      10      10      10      10      10      10      1
      0      10
 291  Ag1 . GW2        0       0       0       0       0       0       0       0
             0
 292  SR3 . Hp1        50      50      50      50      50      50      50      5
      0      50
 293  J2 . Ag2         0       0       0       0       0       0       0       0
             0
 294  Urb1 . GW1       0       0       0       0       0       0       0       0
             0
 295  SR4 . Urb2       0       0       0       0       0       0       0       0
             0
 296  Ag2 . J3         0       0       0       0       0       0       0       0
             0
 297  J3 . EndPt       10      10      10      10      10      10      10      1
      0      10
 298  SR1 . Urb1       0       0       0       0       0       0       0       0
             0
 299  GW2 . Ag2        0       0       0       0       0       0       0       0
             0
 300  GW2 . Ag1        0       0       0       0       0       0       0       0
             0
 301  WWTP1 . J2       0       0       0       0       0       0       0       0
             0
 302  Desal1 . Urb2    0       0       0       0       0       0       0       0
             0
 303  WWTP1 . Urb2     0       0       0       0       0       0       0       0
             0
 304  GW1 . Urb1       0       0       0       0       0       0       0       0
             0
 305   
 306   
 307  *Flow upper bound
 308   
 309  Table upper(i,j,t)
 310   
 311   
 312                   1          2          3          4          5          6 
               7          8          9
 313  SR2 . SR4        100        100        100        100        100        10
      0        100        100        100
 314  SR1 . J1         100        100        100        100        100        10
      0        100        100        100
 315  J1 . SR2         100        100        100        100        100        10
      0        100        100        100
 316  Ag1 . J2         100        100        100        100        100        10
      0        100        100        100
 317  Urb1 . J1        100        100        100        100        100        10
      0        100        100        100
 318  Ag2 . GW2        100        100        100        100        100        10
      0        100        100        100
 319  SR4 . Ag1        100        100        100        100        100        10
      0        100        100        100
 320  Hp1 . SR4        100        100        100        100        100        10
      0        100        100        100
 321  Urb2 . WWTP1     100        100        100        100        100        10
      0        100        100        100
 322  J2 . J3          200        200        200        200        200        20
      0        200        200        200
 323  SR4 . J2         200        200        200        200        200        20
      0        200        200        200
 324  Ag1 . GW2        100        100        100        100        100        10
      0        100        100        100
 325  SR3 . Hp1        100        100        100        100        100        10
      0        100        100        100
 326  J2 . Ag2         100        100        100        100        100        10
      0        100        100        100
 327  Urb1 . GW1       100        100        100        100        100        10
      0        100        100        100
 328  SR4 . Urb2       100        100        100        100        100        10
      0        100        100        100
 329  Ag2 . J3         100        100        100        100        100        10
      0        100        100        100
 330  J3 . EndPt       350        350        350        350        350        35
      0        350        350        350
 331  SR1 . Urb1       100        100        100        100        100        10
      0        100        100        100
 332  GW2 . Ag2        80         80         80         80         80         80
               80         80         80
 333  GW2 . Ag1        80         80         80         80         80         80
               80         80         80
 334  WWTP1 . J2       80         80         80         80         80         80
               80         80         80
 335  Desal1 . Urb2    80         80         80         80         80         80
               80         80         80
 336  WWTP1 . Urb2     80         80         80         80         80         80
               80         80         80
 337  GW1 . Urb1       80         80         80         80         80         80
               80         80         80
 338   
 339   
 340   
 341  *Storage lower bound
 342   
 343  Table storagelower(s_nodes,t)
 344   
 345   
 346                                1      2      3      4      5      6     7  
         8     9
 347  SR1                           50     50     50     50     50     50    50 
         50    50
 348  SR2                           20     20     20     20     20     20    20 
         20    20
 349  SR3                           30     30     30     30     30     30    30 
         30    30
 350  SR4                           60     60     60     60     60     60    60 
         60    60
 351  Desal1                        10     10     10     10     10     10    10 
         10    10
 352  GW1                           300    300    300    300    300    300   300
         300   300
 353  GW2                           300    300    300    300    300    300   300
         300   300
 354   
 355   
 356  *Storage upper bound
 357   
 358  Table storageupper(s_nodes,t)
 359   
 360   
 361                                1      2      3      4      5      6      7 
           8      9
 362  SR1                           500    500    500    500    500    500    50
      0    500    500
 363  SR2                           200    200    200    200    200    200    20
      0    200    200
 364  SR3                           700    700    700    700    700    700    70
      0    700    700
 365  SR4                           600    600    600    600    600    600    60
      0    600    600
 366  Desal1                        100000 100000 100000 100000 100000 100000 10
      0000 100000 100000
 367  GW1                           2000   2000   2000   2000   2000   2000   20
      00   2000   2000
 368  GW2                           2000   2000   2000   2000   2000   2000   20
      00   2000   2000
 369   
 370   
 371  *Target demand level for each demand node
 372   
 373  Table D(i,t)
 374   
 375                  1     2     3      4      5      6      7      8      9
 376  EndPt           15    160   14     15     15     15     14     15     160
 377  Urb2            90    600   60     62     62     65     69     69     640
 378  Urb1            75    430   44     44     46     49     50     50     470
 379  Ag2             60    210   21     21     22     22     22     22     210
 380  Ag1             55    270   27     27     27     29     29     29     280
 381   
 382   
 383   
 384  *Priority of each demand node
 385   
 386  Table cost(dem_nodes,t)
 387   
 388                  1     2     3      4      5      6      7      8      9
 389  EndPt           1     1     1      1      1      1      1      1      1
 390  Urb2            100   100   100    100    100    100    100    100    100
 391  Urb1            90    90    90     90     90     90     90     90     90
 392  Ag2             30    30    30     30     30     30     30     30     30
 393  Ag1             50    50    50     50     50     50     50     50     50
 394   
 395  ** ----------------------------------------------------------------------
 396  **  Model variables and equations
 397  ** ----------------------------------------------------------------------
 398   
 399  VARIABLES
 400  Q(i,j,t) flow in each link in each period
 401  S(i,t) storage volume in storage nodes
 402  delivery (i) water delivered to demand node i in each period
 403  Z objective function
 404  Obj (t)
 405  ;
 406   
 407  POSITIVE VARIABLES
 408  Q
 409  S
 410  alpha(i) target demand satisfaction ratio ;
 411   
 412  alpha.up(dem_nodes)=1;
 413   
 414  positive variable  storage(s_nodes,t) an interim variable for saving the v
      alue of the storage at the end of each time-step;
 415  positive variable  a(i,t) an interim variable for saving the value of the 
      satisfaction ratio at the end of each time-step;
 416   
 417  EQUATIONS
 418  MassBalance_storage(s_nodes)
 419  MinFlow(i,j,t)
 420  MaxFlow(i,j,t)
 421  MaxStor(s_nodes,t)
 422  MinStor(s_nodes,t)
 423  Demand_satisfaction_ratio(i,t)
 424  Objective
 425  ;
 426   
 427  * introducing a dummy variable to empty (reset) the time-step in each loop
 428   
 430  set dv(t) / /;
 431   
 432   
 433  * Objective function for time step by time step formulation
 434   
 435  Objective ..
 436      Z =E= sum(t$dv(t),SUM((dem_nodes), alpha(dem_nodes) * cost(dem_nodes,t
      )));
 437   
 438   
 439  *Calculating demand satisfaction ratio for each demand node in each time p
      eriod
 440   
 441  Demand_satisfaction_ratio(i,t)$(dv(t)and not s_nodes(i))..
 442           (alpha(i)* D(i,t))$dem_nodes(i)=E= SUM(j$links(j,i), Q(j,i,t)* fl
      owmultiplier(j,i,t))
 443                                           -SUM(j$links(i,j), Q(i,j,t));
 444   
 445  * Mass balance constraint for storage nodes:
 446   
 447  MassBalance_storage(s_nodes)..
 448   
 449           sum(t$dv(t),inflow(s_nodes,t)+SUM(j$links(j,s_nodes), Q(j,s_nodes
      ,t)* flowmultiplier(j,s_nodes,t))
 450           - SUM(j$links(s_nodes,j), Q(s_nodes,j,t) )
 451           -S(s_nodes,t)
 452           +storage(s_nodes,t-1)$(ord(t) GT 1)
 453           + initStor(s_nodes,t)$(ord(t) EQ 1))
 454           =E= 0;
 455   
 456  * Lower and upper bound of possible flow in links
 457   
 458  MinFlow(i,j,t)$(links(i,j) and dv(t)) ..
 459      Q(i,j,t) =G= lower(i,j,t);
 460   
 461  MaxFlow(i,j,t)$(links(i,j)  and dv(t))..
 462      Q(i,j,t) =L= upper(i,j,t);
 463   
 464  * Lower and upper bound of Storage volume at storage nodes
 465  MaxStor(s_nodes,t)$dv(t)..
 466      S(s_nodes,t) =L= storageupper(s_nodes,t);
 467   
 468  MinStor(s_nodes,t)$dv(t)..
 469      S(s_nodes,t) =G= storagelower(s_nodes,t);
 470   
 471  ** ----------------------------------------------------------------------
 472  **  Model declaration and solve statements
 473  ** ----------------------------------------------------------------------
 474   
 475  MODEL Demo3 /ALL/;
 476   
 477  loop (tsteps,
 478              dv(tsteps)=t(tsteps);
 479              display dv;
 480              SOLVE Demo3 USING LP MAXIMIZING Z;
 481              storage.fx(s_nodes,tsteps)=S.l(s_nodes,tsteps) ;
 482              a.l(i,tsteps)=alpha.l(i);
 483              Obj.l(tsteps)=Z.l;
 484              DISPLAY  Z.l, Obj.l,storage.l,S.l, Q.l;
 485              dv(tsteps)=no;
 486        );
 487   
 488  *Generating results output
 489   
 490  execute_unload "Results.gdx" ,
 491      Q,
 492      S,
 493      MassBalance_storage,
 494      MinFlow,
 495      MaxFlow,
 496      MinStor,
 497      MaxStor,
 498      Z,
 499      alpha,
 500      Obj,
 501      storage,
 502      a;
 503   
 504   
 505   
GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 2
Demo3.gms
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\My Manchester\Watersys\Demo3\Demo 3
                                          .gms
     2       12 INCLUDE        1      12  .C:\My Manchester\Watersys\Demo3\datas
                                           et 2.txt


COMPILATION TIME     =        0.000 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 3
Demo3.gms
E x e c u t i o n


----    479 SET dv  

1

GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 4
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,1) - S(Desal1,1) =E= -11000 ;
     
      (LHS = 0, INFES = 11000 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,1) - Q(SR2,SR4,1) - S(SR2,1) =E= -200 ;
     
      (LHS = 0, INFES = 200 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,1) - S(SR3,1) =E= -640 ;
     
      (LHS = 0, INFES = 640 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,1) - Q(SR1,Urb1,1) - S(SR1,1) =E= -250 ;
     
      (LHS = 0, INFES = 250 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,1) + Q(Urb1,GW1,1) - S(GW1,1) =E= -600
      ; (LHS = 0, INFES = 600 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,1) + Q(SR2,SR4,1) - Q(SR4,J2,1)
     
      - Q(SR4,Urb2,1) - Q(SR4,Ag1,1) - S(SR4,1) =E= -150 ;
     
      (LHS = 0, INFES = 150 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,1) - Q(GW2,Ag1,1) + Q(Ag2,GW2,1)
     
      + Q(Ag1,GW2,1) - S(GW2,1) =E= -600 ; (LHS = 0, INFES = 600 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,1)..  Q(Desal1,Urb2,1) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,1)..  Q(WWTP1,J2,1) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,1)..  Q(WWTP1,Urb2,1) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,1)..  Q(Hp1,SR4,1) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,1)..  Q(J1,SR2,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,1)..  Q(J2,J3,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,1)..  Q(J2,Ag2,1) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,1)..  Q(J3,EndPt,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,1)..  Q(SR2,SR4,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,1)..  Q(SR3,Hp1,1) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,1)..  Q(SR1,J1,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,1)..  Q(SR1,Urb1,1) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,1)..  Q(GW1,Urb1,1) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,1)..  Q(SR4,J2,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,1)..  Q(SR4,Urb2,1) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,1)..  Q(SR4,Ag1,1) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,1)..  Q(GW2,Ag2,1) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,1)..  Q(GW2,Ag1,1) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,1)..  Q(Urb2,WWTP1,1) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,1)..  Q(Urb1,J1,1) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,1)..  Q(Urb1,GW1,1) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,1)..  Q(Ag2,J3,1) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,1)..  Q(Ag2,GW2,1) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,1)..  Q(Ag1,J2,1) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,1)..  Q(Ag1,GW2,1) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,1)..  Q(Desal1,Urb2,1) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,1)..  Q(WWTP1,J2,1) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,1)..  Q(WWTP1,Urb2,1) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,1)..  Q(Hp1,SR4,1) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,1)..  Q(J1,SR2,1) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,1)..  Q(J2,J3,1) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,1)..  Q(J2,Ag2,1) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,1)..  Q(J3,EndPt,1) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,1)..  Q(SR2,SR4,1) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,1)..  Q(SR3,Hp1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,1)..  Q(SR1,J1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,1)..  Q(SR1,Urb1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,1)..  Q(GW1,Urb1,1) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,1)..  Q(SR4,J2,1) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,1)..  Q(SR4,Urb2,1) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,1)..  Q(SR4,Ag1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,1)..  Q(GW2,Ag2,1) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,1)..  Q(GW2,Ag1,1) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,1)..  Q(Urb2,WWTP1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,1)..  Q(Urb1,J1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,1)..  Q(Urb1,GW1,1) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,1)..  Q(Ag2,J3,1) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,1)..  Q(Ag2,GW2,1) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,1)..  Q(Ag1,J2,1) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,1)..  Q(Ag1,GW2,1) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,1)..  S(Desal1,1) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,1)..  S(SR2,1) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,1)..  S(SR3,1) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,1)..  S(SR1,1) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,1)..  S(GW1,1) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,1)..  S(SR4,1) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,1)..  S(GW2,1) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,1)..  S(Desal1,1) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,1)..  S(SR2,1) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,1)..  S(SR3,1) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,1)..  S(SR1,1) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,1)..  S(GW1,1) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,1)..  S(SR4,1) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,1)..  S(GW2,1) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,1)..  Q(WWTP1,J2,1) + Q(WWTP1,Urb2,1)
     
      - Q(Urb2,WWTP1,1) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,1)..  Q(Hp1,SR4,1) - Q(SR3,Hp1,1) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,1)..  Q(J1,SR2,1) - Q(SR1,J1,1) - Q(Urb1,J1,1) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,1)..  - Q(WWTP1,J2,1) + Q(J2,J3,1) + Q(J2,Ag2,1)
     
      - 0.95*Q(SR4,J2,1) - 0.95*Q(Ag1,J2,1) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,1)..  - 0.9*Q(J2,J3,1) + Q(J3,EndPt,1)
     
      - Q(Ag2,J3,1) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,1)..  - Q(J3,EndPt,1) + 15*alpha(EndPt) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(Urb2,1)..  - Q(Desal1,Urb2,1) - Q(WWTP1,Urb2,1)
     
      - Q(SR4,Urb2,1) + Q(Urb2,WWTP1,1) + 90*alpha(Urb2) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Urb1,1)..  - Q(SR1,Urb1,1) - Q(GW1,Urb1,1)
     
      + Q(Urb1,J1,1) + Q(Urb1,GW1,1) + 75*alpha(Urb1) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Ag2,1)..  - Q(J2,Ag2,1) - Q(GW2,Ag2,1) + Q(Ag2,J3,1)
     
      + Q(Ag2,GW2,1) + 60*alpha(Ag2) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Ag1,1)..  - 0.95*Q(SR4,Ag1,1) - Q(GW2,Ag1,1)
     
      + Q(Ag1,J2,1) + Q(Ag1,GW2,1) + 55*alpha(Ag1) =E= 0 ; (LHS = 0)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ; (LHS = 0)
     
GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 5
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,1)
        1       MaxFlow(Desal1,Urb2,1)
       -1       Demand_satisfaction_ratio(Urb2,1)

Q(WWTP1,J2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,1)
        1       MaxFlow(WWTP1,J2,1)
        1       Demand_satisfaction_ratio(WWTP1,1)
       -1       Demand_satisfaction_ratio(J2,1)

Q(WWTP1,Urb2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,1)
        1       MaxFlow(WWTP1,Urb2,1)
        1       Demand_satisfaction_ratio(WWTP1,1)
       -1       Demand_satisfaction_ratio(Urb2,1)

Q(Hp1,SR4,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,1)
        1       MaxFlow(Hp1,SR4,1)
        1       Demand_satisfaction_ratio(Hp1,1)

Q(J1,SR2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,1)
        1       MaxFlow(J1,SR2,1)
        1       Demand_satisfaction_ratio(J1,1)

Q(J2,J3,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,1)
        1       MaxFlow(J2,J3,1)
        1       Demand_satisfaction_ratio(J2,1)
       -0.9     Demand_satisfaction_ratio(J3,1)

Q(J2,Ag2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,1)
        1       MaxFlow(J2,Ag2,1)
        1       Demand_satisfaction_ratio(J2,1)
       -1       Demand_satisfaction_ratio(Ag2,1)

Q(J3,EndPt,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,1)
        1       MaxFlow(J3,EndPt,1)
        1       Demand_satisfaction_ratio(J3,1)
       -1       Demand_satisfaction_ratio(EndPt,1)

Q(SR2,SR4,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,1)
        1       MaxFlow(SR2,SR4,1)

Q(SR3,Hp1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,1)
        1       MaxFlow(SR3,Hp1,1)
       -1       Demand_satisfaction_ratio(Hp1,1)

Q(SR1,J1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,1)
        1       MaxFlow(SR1,J1,1)
       -1       Demand_satisfaction_ratio(J1,1)

Q(SR1,Urb1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,1)
        1       MaxFlow(SR1,Urb1,1)
       -1       Demand_satisfaction_ratio(Urb1,1)

Q(GW1,Urb1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,1)
        1       MaxFlow(GW1,Urb1,1)
       -1       Demand_satisfaction_ratio(Urb1,1)

Q(SR4,J2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,1)
        1       MaxFlow(SR4,J2,1)
       -0.95    Demand_satisfaction_ratio(J2,1)

Q(SR4,Urb2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,1)
        1       MaxFlow(SR4,Urb2,1)
       -1       Demand_satisfaction_ratio(Urb2,1)

Q(SR4,Ag1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,1)
        1       MaxFlow(SR4,Ag1,1)
       -0.95    Demand_satisfaction_ratio(Ag1,1)

Q(GW2,Ag2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,1)
        1       MaxFlow(GW2,Ag2,1)
       -1       Demand_satisfaction_ratio(Ag2,1)

Q(GW2,Ag1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,1)
        1       MaxFlow(GW2,Ag1,1)
       -1       Demand_satisfaction_ratio(Ag1,1)

Q(Urb2,WWTP1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,1)
        1       MaxFlow(Urb2,WWTP1,1)
       -1       Demand_satisfaction_ratio(WWTP1,1)
        1       Demand_satisfaction_ratio(Urb2,1)

Q(Urb1,J1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,1)
        1       MaxFlow(Urb1,J1,1)
       -1       Demand_satisfaction_ratio(J1,1)
        1       Demand_satisfaction_ratio(Urb1,1)

Q(Urb1,GW1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,1)
        1       MaxFlow(Urb1,GW1,1)
        1       Demand_satisfaction_ratio(Urb1,1)

Q(Ag2,J3,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,1)
        1       MaxFlow(Ag2,J3,1)
       -1       Demand_satisfaction_ratio(J3,1)
        1       Demand_satisfaction_ratio(Ag2,1)

Q(Ag2,GW2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,1)
        1       MaxFlow(Ag2,GW2,1)
        1       Demand_satisfaction_ratio(Ag2,1)

Q(Ag1,J2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,1)
        1       MaxFlow(Ag1,J2,1)
       -0.95    Demand_satisfaction_ratio(J2,1)
        1       Demand_satisfaction_ratio(Ag1,1)

Q(Ag1,GW2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,1)
        1       MaxFlow(Ag1,GW2,1)
        1       Demand_satisfaction_ratio(Ag1,1)


---- S  storage volume in storage nodes

S(Desal1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,1)
        1       MinStor(Desal1,1)

S(SR2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,1)
        1       MinStor(SR2,1)

S(SR3,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,1)
        1       MinStor(SR3,1)

S(SR1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,1)
        1       MinStor(SR1,1)

S(GW1,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,1)
        1       MinStor(GW1,1)

S(SR4,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,1)
        1       MinStor(SR4,1)

S(GW2,1)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,1)
        1       MinStor(GW2,1)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 0, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       15       Demand_satisfaction_ratio(EndPt,1)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       90       Demand_satisfaction_ratio(Urb2,1)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       75       Demand_satisfaction_ratio(Urb1,1)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       60       Demand_satisfaction_ratio(Ag2,1)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 0, 1, 0)
       55       Demand_satisfaction_ratio(Ag1,1)
      -50       Objective

GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 6
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   1


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           4     SINGLE VARIABLES           38
NON ZERO ELEMENTS           132


GENERATION TIME      =        0.031 SECONDS      4 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.094 SECONDS      4 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 7
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 1

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.060      1000.000
 ITERATION COUNT, LIMIT        11         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 11

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999650794e+002  -2.7099999999650794e+002
Dual infeasibility......:  4.7325960927935284e-009   4.7325960927935284e-009
Constraint violation....:  1.1368683772161603e-013   1.1368683772161603e-013
Complementarity.........:  2.5861345365337671e-009   2.5861345365337671e-009
Overall NLP error.......:  4.7325960927935284e-009   4.7325960927935284e-009


Number of objective function evaluations             = 12
Number of objective gradient evaluations             = 12
Number of equality constraint evaluations            = 12
Number of inequality constraint evaluations          = 12
Number of equality constraint Jacobian evaluations   = 12
Number of inequality constraint Jacobian evaluations = 12
Number of Lagrangian Hessian evaluations             = 11
Total CPU secs in IPOPT (w/o function evaluations)   =      0.054
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1 -1.100E+4 -1.100E+4 -1.100E+4 -3.66E-14      
SR2     -200.000  -200.000  -200.000 7.425E-12      
SR3     -640.000  -640.000  -640.000 7.659E-13      
SR1     -250.000  -250.000  -250.000 -3.79E-12      
GW1     -600.000  -600.000  -600.000 -1.05E-12      
SR4     -150.000  -150.000  -150.000 -4.26E-12      
GW2     -600.000  -600.000  -600.000 -1.01E-12      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .1      .       31.049     +INF  -4.11E-12      
WWTP1 .J2   .1      .       14.054     +INF  -6.99E-12      
WWTP1 .Urb2 .1      .       34.518     +INF  -4.89E-12      
Hp1   .SR4  .1    50.000    77.253     +INF  -7.13E-12      
J1    .SR2  .1    10.000    48.846     +INF  -4.14E-12      
J2    .J3   .1    10.000    12.260     +INF  1.251E-10      
J2    .Ag2  .1      .       56.632     +INF  -2.84E-12      
J3    .EndPt.1    10.000    15.000     +INF  1.614E-11      
SR2   .SR4  .1    10.000    72.314     +INF  -2.94E-12      
SR3   .Hp1  .1    50.000    77.253     +INF  -7.13E-12      
SR1   .J1   .1    10.000    31.125     +INF  -7.86E-12      
SR1   .Urb1 .1      .       63.872     +INF  -2.90E-12      
GW1   .Urb1 .1      .       55.692     +INF  -3.53E-12      
SR4   .J2   .1    10.000    36.506     +INF  -5.27E-12      
SR4   .Urb2 .1      .       73.005     +INF  -3.67E-12      
SR4   .Ag1  .1      .       48.973     +INF  -3.06E-12      
GW2   .Ag2  .1      .       45.197     +INF  -3.95E-12      
GW2   .Ag1  .1      .       56.247     +INF  -3.60E-12      
Urb2  .WWTP1.1      .       48.572     +INF  -3.03E-12      
Urb1  .J1   .1      .       17.721     +INF  -8.77E-12      
Urb1  .GW1  .1      .       26.843     +INF  -5.54E-12      
Ag2   .J3   .1      .        3.966     +INF  6.200E-11      
Ag2   .GW2  .1      .       37.863     +INF  -3.79E-12      
Ag1   .J2   .1      .       21.218     +INF  -7.02E-12      
Ag1   .GW2  .1      .       26.553     +INF  -5.04E-12      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .1     -INF     31.049    80.000 1.061E-11      
WWTP1 .J2   .1     -INF     14.054    80.000 4.478E-12      
WWTP1 .Urb2 .1     -INF     34.518    80.000 6.733E-12      
Hp1   .SR4  .1     -INF     77.253   100.000 1.241E-11      
J1    .SR2  .1     -INF     48.846   100.000 6.427E-12      
J2    .J3   .1     -INF     12.260   200.000 1.305E-12      
J2    .Ag2  .1     -INF     56.632   100.000 1.216E-11      
J3    .EndPt.1     -INF     15.000   350.000 7.211E-13      
SR2   .SR4  .1     -INF     72.314   100.000 1.723E-11      
SR3   .Hp1  .1     -INF     77.253   100.000 1.241E-11      
SR1   .J1   .1     -INF     31.125   100.000 3.705E-12      
SR1   .Urb1 .1     -INF     63.872   100.000 1.031E-11      
GW1   .Urb1 .1     -INF     55.692    80.000 1.430E-11      
SR4   .J2   .1     -INF     36.506   200.000 1.512E-12      
SR4   .Urb2 .1     -INF     73.005   100.000 5.513E-12      
SR4   .Ag1  .1     -INF     48.973   100.000 8.446E-12      
GW2   .Ag2  .1     -INF     45.197    80.000 9.352E-12      
GW2   .Ag1  .1     -INF     56.247    80.000 1.312E-11      
Urb2  .WWTP1.1     -INF     48.572   100.000 9.100E-12      
Urb1  .J1   .1     -INF     17.721   100.000 3.054E-12      
Urb1  .GW1  .1     -INF     26.843   100.000 3.832E-12      
Ag2   .J3   .1     -INF      3.966   100.000 2.581E-12      
Ag2   .GW2  .1     -INF     37.863   100.000 6.138E-12      
Ag1   .J2   .1     -INF     21.218   100.000 3.289E-12      
Ag1   .GW2  .1     -INF     26.553   100.000 4.156E-12      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.1     -INF  10968.951 1.0000E+5 2.779E-16      
SR2   .1     -INF    176.531   200.000 1.013E-11      
SR3   .1     -INF    562.747   700.000 1.596E-12      
SR1   .1     -INF    155.003   500.000 6.158E-13      
GW1   .1     -INF    571.152  2000.000 1.570E-13      
SR4   .1     -INF    141.083   600.000 4.838E-13      
GW2   .1     -INF    562.972  2000.000 1.584E-13      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.1    10.000 10968.951     +INF  -1.85E-14      
SR2   .1    20.000   176.531     +INF  -1.44E-12      
SR3   .1    30.000   562.747     +INF  -4.27E-13      
SR1   .1    50.000   155.003     +INF  -2.71E-12      
GW1   .1   300.000   571.152     +INF  -8.17E-13      
SR4   .1    60.000   141.083     +INF  -3.06E-12      
GW2   .1   300.000   562.972     +INF  -7.83E-13      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.1      .         .         .    5.466E-12      
Hp1  .1      .         .         .    1.748E-12      
J1   .1      .         .         .    -6.20E-12      
J2   .1      .         .         .    -4.03E-12      
J3   .1      .         .         .    1.290E-10      
EndPt.1      .         .         .    1.451E-10      
Urb2 .1      .         .         .    2.429E-12      
Urb1 .1      .         .         .    8.291E-12      
Ag2  .1      .         .         .    2.451E-12      
Ag1  .1      .         .         .    6.925E-12      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .1      .       31.049     +INF  -1.43E-11      
WWTP1 .J2   .1      .       14.054     +INF  -2.30E-11      
WWTP1 .Urb2 .1      .       34.518     +INF  -1.58E-11      
Hp1   .SR4  .1      .       77.253     +INF  -9.09E-12      
J1    .SR2  .1      .       48.846     +INF  -1.15E-11      
J2    .J3   .1      .       12.260     +INF  -3.35E-11      
J2    .Ag2  .1      .       56.632     +INF  -9.33E-12      
J3    .EndPt.1      .       15.000     +INF  -3.03E-11      
SR2   .SR4  .1      .       72.314     +INF  -8.56E-12      
SR3   .Hp1  .1      .       77.253     +INF  -9.09E-12      
SR1   .J1   .1      .       31.125     +INF  -1.92E-11      
SR1   .Urb1 .1      .       63.872     +INF  -9.52E-12      
GW1   .Urb1 .1      .       55.692     +INF  -1.16E-11      
SR4   .J2   .1      .       36.506     +INF  -1.51E-11      
SR4   .Urb2 .1      .       73.005     +INF  -1.22E-11      
SR4   .Ag1  .1      .       48.973     +INF  -1.01E-11      
GW2   .Ag2  .1      .       45.197     +INF  -1.36E-11      
GW2   .Ag1  .1      .       56.247     +INF  -1.19E-11      
Urb2  .WWTP1.1      .       48.572     +INF  -1.02E-11      
Urb1  .J1   .1      .       17.721     +INF  -2.88E-11      
Urb1  .GW1  .1      .       26.843     +INF  -1.81E-11      
Ag2   .J3   .1      .        3.966     +INF  -7.25E-11      
Ag2   .GW2  .1      .       37.863     +INF  -1.15E-11      
Ag1   .J2   .1      .       21.218     +INF  -2.40E-11      
Ag1   .GW2  .1      .       26.553     +INF  -1.63E-11      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.1      .    10968.951     +INF  -6.79E-14      
SR2   .1      .      176.531     +INF  -4.18E-12      
SR3   .1      .      562.747     +INF  -1.33E-12      
SR1   .1      .      155.003     +INF  -5.57E-12      
GW1   .1      .      571.152     +INF  -1.29E-12      
SR4   .1      .      141.083     +INF  -5.43E-12      
GW2   .1      .      562.972     +INF  -1.25E-12      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 8
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1

Desal1   10968.951
SR2        176.531
SR3        562.747
SR1        155.003
GW1        571.152
SR4        141.083
GW2        562.972


----    484 VARIABLE S.L  storage volume in storage nodes

                 1

Desal1   10968.951
SR2        176.531
SR3        562.747
SR1        155.003
GW1        571.152
SR4        141.083
GW2        562.972


----    484 VARIABLE Q.L  flow in each link in each period

                       1

Desal1.Urb2       31.049
WWTP1 .J2         14.054
WWTP1 .Urb2       34.518
Hp1   .SR4        77.253
J1    .SR2        48.846
J2    .J3         12.260
J2    .Ag2        56.632
J3    .EndPt      15.000
SR2   .SR4        72.314
SR3   .Hp1        77.253
SR1   .J1         31.125
SR1   .Urb1       63.872
GW1   .Urb1       55.692
SR4   .J2         36.506
SR4   .Urb2       73.005
SR4   .Ag1        48.973
GW2   .Ag2        45.197
GW2   .Ag1        56.247
Urb2  .WWTP1      48.572
Urb1  .J1         17.721
Urb1  .GW1        26.843
Ag2   .J3          3.966
Ag2   .GW2        37.863
Ag1   .J2         21.218
Ag1   .GW2        26.553


----    479 SET dv  

2

GAMS Rev 227  x86_64/MS Windows                         11/06/14 19:13:50 Page 9
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,2) - S(Desal1,2)
     
      + storage(Desal1,1) =E= -1000 ;
     
      (LHS = 10968.9512011563, INFES = 11968.9512011563 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,2) - Q(SR2,SR4,2) - S(SR2,2)
     
      + storage(SR2,1) =E= 0 ;
     
      (LHS = 176.531439640466, INFES = 176.531439640466 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,2) - S(SR3,2) + storage(SR3,1) =E= -30 ;
     
      (LHS = 562.746916215161, INFES = 592.746916215161 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,2) - Q(SR1,Urb1,2) - S(SR1,2)
     
      + storage(SR1,1) =E= -120 ;
     
      (LHS = 155.002541765097, INFES = 275.002541765097 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,2) + Q(Urb1,GW1,2) - S(GW1,2)
     
      + storage(GW1,1) =E= 0 ;
     
      (LHS = 571.151629612869, INFES = 571.151629612869 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,2) + Q(SR2,SR4,2) - Q(SR4,J2,2)
     
      - Q(SR4,Urb2,2) - Q(SR4,Ag1,2) - S(SR4,2) + storage(SR4,1) =E= 0 ;
     
      (LHS = 141.083217301203, INFES = 141.083217301203 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,2) - Q(GW2,Ag1,2) + Q(Ag2,GW2,2)
     
      + Q(Ag1,GW2,2) - S(GW2,2) + storage(GW2,1) =E= 0 ;
     
      (LHS = 562.972222277926, INFES = 562.972222277926 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,2)..  Q(Desal1,Urb2,2) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,2)..  Q(WWTP1,J2,2) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,2)..  Q(WWTP1,Urb2,2) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,2)..  Q(Hp1,SR4,2) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,2)..  Q(J1,SR2,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,2)..  Q(J2,J3,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,2)..  Q(J2,Ag2,2) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,2)..  Q(J3,EndPt,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,2)..  Q(SR2,SR4,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,2)..  Q(SR3,Hp1,2) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,2)..  Q(SR1,J1,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,2)..  Q(SR1,Urb1,2) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,2)..  Q(GW1,Urb1,2) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,2)..  Q(SR4,J2,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,2)..  Q(SR4,Urb2,2) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,2)..  Q(SR4,Ag1,2) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,2)..  Q(GW2,Ag2,2) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,2)..  Q(GW2,Ag1,2) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,2)..  Q(Urb2,WWTP1,2) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,2)..  Q(Urb1,J1,2) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,2)..  Q(Urb1,GW1,2) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,2)..  Q(Ag2,J3,2) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,2)..  Q(Ag2,GW2,2) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,2)..  Q(Ag1,J2,2) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,2)..  Q(Ag1,GW2,2) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,2)..  Q(Desal1,Urb2,2) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,2)..  Q(WWTP1,J2,2) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,2)..  Q(WWTP1,Urb2,2) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,2)..  Q(Hp1,SR4,2) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,2)..  Q(J1,SR2,2) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,2)..  Q(J2,J3,2) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,2)..  Q(J2,Ag2,2) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,2)..  Q(J3,EndPt,2) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,2)..  Q(SR2,SR4,2) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,2)..  Q(SR3,Hp1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,2)..  Q(SR1,J1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,2)..  Q(SR1,Urb1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,2)..  Q(GW1,Urb1,2) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,2)..  Q(SR4,J2,2) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,2)..  Q(SR4,Urb2,2) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,2)..  Q(SR4,Ag1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,2)..  Q(GW2,Ag2,2) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,2)..  Q(GW2,Ag1,2) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,2)..  Q(Urb2,WWTP1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,2)..  Q(Urb1,J1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,2)..  Q(Urb1,GW1,2) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,2)..  Q(Ag2,J3,2) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,2)..  Q(Ag2,GW2,2) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,2)..  Q(Ag1,J2,2) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,2)..  Q(Ag1,GW2,2) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,2)..  S(Desal1,2) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,2)..  S(SR2,2) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,2)..  S(SR3,2) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,2)..  S(SR1,2) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,2)..  S(GW1,2) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,2)..  S(SR4,2) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,2)..  S(GW2,2) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,2)..  S(Desal1,2) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,2)..  S(SR2,2) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,2)..  S(SR3,2) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,2)..  S(SR1,2) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,2)..  S(GW1,2) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,2)..  S(SR4,2) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,2)..  S(GW2,2) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,2)..  Q(WWTP1,J2,2) + Q(WWTP1,Urb2,2)
     
      - Q(Urb2,WWTP1,2) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,2)..  Q(Hp1,SR4,2) - Q(SR3,Hp1,2) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,2)..  Q(J1,SR2,2) - Q(SR1,J1,2) - Q(Urb1,J1,2) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,2)..  - Q(WWTP1,J2,2) + Q(J2,J3,2) + Q(J2,Ag2,2)
     
      - 0.95*Q(SR4,J2,2) - 0.95*Q(Ag1,J2,2) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,2)..  - 0.9*Q(J2,J3,2) + Q(J3,EndPt,2)
     
      - Q(Ag2,J3,2) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,2)..  - Q(J3,EndPt,2) + 160*alpha(EndPt) =E= 0 ;
     
      (LHS = 160, INFES = 160 ****)
     
Demand_satisfaction_ratio(Urb2,2)..  - Q(Desal1,Urb2,2) - Q(WWTP1,Urb2,2)
     
      - Q(SR4,Urb2,2) + Q(Urb2,WWTP1,2) + 600*alpha(Urb2) =E= 0 ;
     
      (LHS = 600, INFES = 600 ****)
     
Demand_satisfaction_ratio(Urb1,2)..  - Q(SR1,Urb1,2) - Q(GW1,Urb1,2)
     
      + Q(Urb1,J1,2) + Q(Urb1,GW1,2) + 430*alpha(Urb1) =E= 0 ;
     
      (LHS = 430, INFES = 430 ****)
     
Demand_satisfaction_ratio(Ag2,2)..  - Q(J2,Ag2,2) - Q(GW2,Ag2,2) + Q(Ag2,J3,2)
     
      + Q(Ag2,GW2,2) + 210*alpha(Ag2) =E= 0 ; (LHS = 210, INFES = 210 ****)
     
Demand_satisfaction_ratio(Ag1,2)..  - 0.95*Q(SR4,Ag1,2) - Q(GW2,Ag1,2)
     
      + Q(Ag1,J2,2) + Q(Ag1,GW2,2) + 270*alpha(Ag1) =E= 0 ;
     
      (LHS = 270, INFES = 270 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -3.49206175087602E-9, INFES = 3.49206175087602E-9 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 10
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,2)
        1       MaxFlow(Desal1,Urb2,2)
       -1       Demand_satisfaction_ratio(Urb2,2)

Q(WWTP1,J2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,2)
        1       MaxFlow(WWTP1,J2,2)
        1       Demand_satisfaction_ratio(WWTP1,2)
       -1       Demand_satisfaction_ratio(J2,2)

Q(WWTP1,Urb2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,2)
        1       MaxFlow(WWTP1,Urb2,2)
        1       Demand_satisfaction_ratio(WWTP1,2)
       -1       Demand_satisfaction_ratio(Urb2,2)

Q(Hp1,SR4,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,2)
        1       MaxFlow(Hp1,SR4,2)
        1       Demand_satisfaction_ratio(Hp1,2)
  4.261643E-12  (DJ ****)

Q(J1,SR2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,2)
        1       MaxFlow(J1,SR2,2)
        1       Demand_satisfaction_ratio(J1,2)

Q(J2,J3,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,2)
        1       MaxFlow(J2,J3,2)
        1       Demand_satisfaction_ratio(J2,2)
       -0.9     Demand_satisfaction_ratio(J3,2)

Q(J2,Ag2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,2)
        1       MaxFlow(J2,Ag2,2)
        1       Demand_satisfaction_ratio(J2,2)
       -1       Demand_satisfaction_ratio(Ag2,2)

Q(J3,EndPt,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,2)
        1       MaxFlow(J3,EndPt,2)
        1       Demand_satisfaction_ratio(J3,2)
       -1       Demand_satisfaction_ratio(EndPt,2)

Q(SR2,SR4,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,2)
        1       MaxFlow(SR2,SR4,2)
  1.168702E-11  (DJ ****)

Q(SR3,Hp1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,2)
        1       MaxFlow(SR3,Hp1,2)
       -1       Demand_satisfaction_ratio(Hp1,2)

Q(SR1,J1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,2)
        1       MaxFlow(SR1,J1,2)
       -1       Demand_satisfaction_ratio(J1,2)

Q(SR1,Urb1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,2)
        1       MaxFlow(SR1,Urb1,2)
       -1       Demand_satisfaction_ratio(Urb1,2)

Q(GW1,Urb1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,2)
        1       MaxFlow(GW1,Urb1,2)
       -1       Demand_satisfaction_ratio(Urb1,2)

Q(SR4,J2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,2)
        1       MaxFlow(SR4,J2,2)
       -0.95    Demand_satisfaction_ratio(J2,2)

Q(SR4,Urb2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,2)
        1       MaxFlow(SR4,Urb2,2)
       -1       Demand_satisfaction_ratio(Urb2,2)

Q(SR4,Ag1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,2)
        1       MaxFlow(SR4,Ag1,2)
       -0.95    Demand_satisfaction_ratio(Ag1,2)

Q(GW2,Ag2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,2)
        1       MaxFlow(GW2,Ag2,2)
       -1       Demand_satisfaction_ratio(Ag2,2)

Q(GW2,Ag1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,2)
        1       MaxFlow(GW2,Ag1,2)
       -1       Demand_satisfaction_ratio(Ag1,2)

Q(Urb2,WWTP1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,2)
        1       MaxFlow(Urb2,WWTP1,2)
       -1       Demand_satisfaction_ratio(WWTP1,2)
        1       Demand_satisfaction_ratio(Urb2,2)

Q(Urb1,J1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,2)
        1       MaxFlow(Urb1,J1,2)
       -1       Demand_satisfaction_ratio(J1,2)
        1       Demand_satisfaction_ratio(Urb1,2)

Q(Urb1,GW1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,2)
        1       MaxFlow(Urb1,GW1,2)
        1       Demand_satisfaction_ratio(Urb1,2)
  1.050259E-12  (DJ ****)

Q(Ag2,J3,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,2)
        1       MaxFlow(Ag2,J3,2)
       -1       Demand_satisfaction_ratio(J3,2)
        1       Demand_satisfaction_ratio(Ag2,2)

Q(Ag2,GW2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,2)
        1       MaxFlow(Ag2,GW2,2)
        1       Demand_satisfaction_ratio(Ag2,2)
  1.006754E-12  (DJ ****)

Q(Ag1,J2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,2)
        1       MaxFlow(Ag1,J2,2)
       -0.95    Demand_satisfaction_ratio(J2,2)
        1       Demand_satisfaction_ratio(Ag1,2)

Q(Ag1,GW2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,2)
        1       MaxFlow(Ag1,GW2,2)
        1       Demand_satisfaction_ratio(Ag1,2)
  1.006754E-12  (DJ ****)


---- S  storage volume in storage nodes

S(Desal1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,2)
        1       MinStor(Desal1,2)

S(SR2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,2)
        1       MinStor(SR2,2)
  7.425378E-12  (DJ ****)

S(SR3,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,2)
        1       MinStor(SR3,2)

S(SR1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,2)
        1       MinStor(SR1,2)

S(GW1,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,2)
        1       MinStor(GW1,2)

S(SR4,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,2)
        1       MinStor(SR4,2)

S(GW2,2)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,2)
        1       MinStor(GW2,2)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.999999996508, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 1.00000000255597)
      160       Demand_satisfaction_ratio(EndPt,2)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 99.9999999994563)
      600       Demand_satisfaction_ratio(Urb2,2)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.9999999979665)
      430       Demand_satisfaction_ratio(Urb1,2)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 29.999999999717)
      210       Demand_satisfaction_ratio(Ag2,2)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.9999999987904)
      270       Demand_satisfaction_ratio(Ag1,2)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,1)
                (.LO, .L, .UP, .M = 10968.9512011563, 10968.9512011563, 
10968.9512011563, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,1)
                (.LO, .L, .UP, .M = 176.531439640466, 176.531439640466, 
176.531439640466, 0)
        1       MassBalance_storage(SR2)

storage(SR3,1)
                (.LO, .L, .UP, .M = 562.746916215161, 562.746916215161, 
562.746916215161, 0)
        1       MassBalance_storage(SR3)

storage(SR1,1)
                (.LO, .L, .UP, .M = 155.002541765097, 155.002541765097, 
155.002541765097, 0)
        1       MassBalance_storage(SR1)

storage(GW1,1)
                (.LO, .L, .UP, .M = 571.151629612869, 571.151629612869, 
571.151629612869, 0)
        1       MassBalance_storage(GW1)

storage(SR4,1)
                (.LO, .L, .UP, .M = 141.083217301203, 141.083217301203, 
141.083217301203, 0)
        1       MassBalance_storage(SR4)

storage(GW2,1)
                (.LO, .L, .UP, .M = 562.972222277926, 562.972222277926, 
562.972222277926, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 11
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   2


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 12
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 2

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              121.0056

 RESOURCE USAGE, LIMIT          0.052      1000.000
 ITERATION COUNT, LIMIT        17         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 17

                                   (scaled)                 (unscaled)
Objective...............: -1.2100561978840035e+002  -1.2100561978840035e+002
Dual infeasibility......:  1.3632801071311590e-011   1.3632801071311590e-011
Constraint violation....:  1.1368683772161603e-013   1.1368683772161603e-013
Complementarity.........:  1.0000381475023380e-011   1.0000381475023380e-011
Overall NLP error.......:  1.3632801071311590e-011   1.3632801071311590e-011


Number of objective function evaluations             = 18
Number of objective gradient evaluations             = 18
Number of equality constraint evaluations            = 18
Number of inequality constraint evaluations          = 18
Number of equality constraint Jacobian evaluations   = 18
Number of inequality constraint Jacobian evaluations = 18
Number of Lagrangian Hessian evaluations             = 17
Total CPU secs in IPOPT (w/o function evaluations)   =      0.070
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1 -1000.000 -1000.000 -1000.000 -5.59E-13      
SR2         .         .         .    -1.06E-12      
SR3      -30.000   -30.000   -30.000 -1.45E-12      
SR1     -120.000  -120.000  -120.000 -1.14E-12      
GW1         .         .         .    -1.37E-12      
SR4         .         .         .       -0.136      
GW2         .         .         .    -3.45E-12      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .2      .       80.000     +INF  6.071E-14      
WWTP1 .J2   .2      .         .        +INF     -0.012      
WWTP1 .Urb2 .2      .       56.457     +INF  1.168E-12      
Hp1   .SR4  .2    50.000   100.000     +INF  2.872E-13      
J1    .SR2  .2    10.000    61.072     +INF  -3.18E-13      
J2    .J3   .2    10.000    10.000     +INF     -0.014      
J2    .Ag2  .2      .       67.029     +INF  8.831E-12      
J3    .EndPt.2    10.000    10.000     +INF     -0.137      
SR2   .SR4  .2    10.000   100.000     +INF  1.205E-13      
SR3   .Hp1  .2    50.000   100.000     +INF  2.872E-13      
SR1   .J1   .2    10.000    61.072     +INF  -3.15E-14      
SR1   .Urb1 .2      .      100.000     +INF  4.342E-14      
GW1   .Urb1 .2      .       80.000     +INF  2.098E-14      
SR4   .J2   .2    10.000    81.083     +INF  -9.69E-13      
SR4   .Urb2 .2      .      100.000     +INF  9.181E-13      
SR4   .Ag1  .2      .      100.000     +INF  6.496E-13      
GW2   .Ag2  .2      .       80.000     +INF  8.649E-14      
GW2   .Ag1  .2      .       80.000     +INF  3.841E-14      
Urb2  .WWTP1.2      .       56.457     +INF  -1.50E-12      
Urb1  .J1   .2      .         .        +INF     -0.105      
Urb1  .GW1  .2      .         .        +INF     -0.105      
Ag2   .J3   .2      .        1.000     +INF  2.177E-12      
Ag2   .GW2  .2      .         .        +INF     -0.071      
Ag1   .J2   .2      .         .        +INF     -0.025      
Ag1   .GW2  .2      .         .        +INF     -0.093      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .2     -INF     80.000    80.000     0.167      
WWTP1 .J2   .2     -INF  8.400E-10    80.000 -2.55E-12      
WWTP1 .Urb2 .2     -INF     56.457    80.000 1.770E-12      
Hp1   .SR4  .2     -INF    100.000   100.000     0.068      
J1    .SR2  .2     -INF     61.072   100.000 1.341E-13      
J2    .J3   .2     -INF     10.000   200.000 -1.36E-11      
J2    .Ag2  .2     -INF     67.029   100.000 9.284E-12      
J3    .EndPt.2     -INF     10.000   350.000 -6.37E-14      
SR2   .SR4  .2     -INF    100.000   100.000     0.136      
SR3   .Hp1  .2     -INF    100.000   100.000     0.068      
SR1   .J1   .2     -INF     61.072   100.000 4.209E-13      
SR1   .Urb1 .2     -INF    100.000   100.000     0.209      
GW1   .Urb1 .2     -INF     80.000    80.000     0.209      
SR4   .J2   .2     -INF     81.083   200.000 -7.44E-13      
SR4   .Urb2 .2     -INF    100.000   100.000     0.031      
SR4   .Ag1  .2     -INF    100.000   100.000     0.040      
GW2   .Ag2  .2     -INF     80.000    80.000     0.143      
GW2   .Ag1  .2     -INF     80.000    80.000     0.185      
Urb2  .WWTP1.2     -INF     56.457   100.000 -1.10E-12      
Urb1  .J1   .2     -INF  9.556E-11   100.000 -1.87E-13      
Urb1  .GW1  .2     -INF  9.556E-11   100.000 -1.88E-13      
Ag2   .J3   .2     -INF      1.000   100.000 1.228E-11      
Ag2   .GW2  .2     -INF  1.400E-10   100.000 -3.15E-13      
Ag1   .J2   .2     -INF  4.043E-10   100.000 -1.16E-12      
Ag1   .GW2  .2     -INF  1.080E-10   100.000 -2.22E-13      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.2     -INF  11888.951 1.0000E+5 -1.86E-13      
SR2   .2     -INF    137.604   200.000 -1.94E-13      
SR3   .2     -INF    492.747   700.000 -4.39E-13      
SR1   .2     -INF    113.930   500.000 -2.82E-13      
GW1   .2     -INF    491.152  2000.000 -4.27E-13      
SR4   .2     -INF     60.000   600.000 -2.02E-13      
GW2   .2     -INF    402.972  2000.000 -1.10E-12      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.2    10.000 11888.951     +INF  -1.87E-13      
SR2   .2    20.000   137.604     +INF  -4.39E-13      
SR3   .2    30.000   492.747     +INF  -5.09E-13      
SR1   .2    50.000   113.930     +INF  -4.64E-13      
GW1   .2   300.000   491.152     +INF  -4.86E-13      
SR4   .2    60.000    60.000     +INF     -0.136      
GW2   .2   300.000   402.972     +INF  -1.21E-12      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.2      .         .         .        0.167      
Hp1  .2      .         .         .        0.068      
J1   .2      .         .         .    1.530E-12      
J2   .2      .         .         .        0.143      
J3   .2      .         .         .        0.143      
EndPt.2      .         .         .        0.006      
Urb2 .2      .         .         .        0.167      
Urb1 .2      .         .         .        0.209      
Ag2  .2      .         .         .        0.143      
Ag1  .2      .         .         .        0.185      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .2      .       80.000     +INF  -1.25E-13      
WWTP1 .J2   .2      .         .        +INF     -0.012      
WWTP1 .Urb2 .2      .       56.457     +INF  -1.77E-13      
Hp1   .SR4  .2      .      100.000     +INF  -1.00E-13      
J1    .SR2  .2      .       61.072     +INF  -1.64E-13      
J2    .J3   .2      .       10.000     +INF  -1.00E-12      
J2    .Ag2  .2      .       67.029     +INF  -1.49E-13      
J3    .EndPt.2      .       10.000     +INF  -1.00E-12      
SR2   .SR4  .2      .      100.000     +INF  -1.00E-13      
SR3   .Hp1  .2      .      100.000     +INF  -1.00E-13      
SR1   .J1   .2      .       61.072     +INF  -1.64E-13      
SR1   .Urb1 .2      .      100.000     +INF  -1.00E-13      
GW1   .Urb1 .2      .       80.000     +INF  -1.25E-13      
SR4   .J2   .2      .       81.083     +INF  -1.23E-13      
SR4   .Urb2 .2      .      100.000     +INF  -1.00E-13      
SR4   .Ag1  .2      .      100.000     +INF  -1.00E-13      
GW2   .Ag2  .2      .       80.000     +INF  -1.25E-13      
GW2   .Ag1  .2      .       80.000     +INF  -1.25E-13      
Urb2  .WWTP1.2      .       56.457     +INF  -1.77E-13      
Urb1  .J1   .2      .         .        +INF     -0.105      
Urb1  .GW1  .2      .         .        +INF     -0.105      
Ag2   .J3   .2      .        1.000     +INF  -1.00E-11      
Ag2   .GW2  .2      .         .        +INF     -0.071      
Ag1   .J2   .2      .         .        +INF     -0.025      
Ag1   .GW2  .2      .         .        +INF     -0.093      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.2      .    11888.951     +INF  -8.41E-16      
SR2   .2      .      137.604     +INF  -7.27E-14      
SR3   .2      .      492.747     +INF  -2.03E-14      
SR1   .2      .      113.930     +INF  -8.78E-14      
GW1   .2      .      491.152     +INF  -2.04E-14      
SR4   .2      .       60.000     +INF  -1.67E-13      
GW2   .2      .      402.972     +INF  -2.48E-14      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    121.006     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        0.063     1.000 -1.49E-10      
Urb2       .        0.300     1.000 -1.90E-11      
Urb1       .        0.419     1.000 -6.69E-12      
Ag2        .        0.695     1.000 1.845E-11      
Ag1        .        0.648     1.000 1.299E-11      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.1 10968.951 10968.951 10968.951      EPS       
SR2   .1   176.531   176.531   176.531      EPS       
SR3   .1   562.747   562.747   562.747      EPS       
SR1   .1   155.003   155.003   155.003      EPS       
GW1   .1   571.152   571.152   571.152      EPS       
SR4   .1   141.083   141.083   141.083      EPS       
GW2   .1   562.972   562.972   562.972      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 13
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      121.006  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2

Desal1   10968.951   11888.951
SR2        176.531     137.604
SR3        562.747     492.747
SR1        155.003     113.930
GW1        571.152     491.152
SR4        141.083      60.000
GW2        562.972     402.972


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2

Desal1   10968.951   11888.951
SR2        176.531     137.604
SR3        562.747     492.747
SR1        155.003     113.930
GW1        571.152     491.152
SR4        141.083      60.000
GW2        562.972     402.972


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2

Desal1.Urb2       31.049      80.000
WWTP1 .J2         14.054
WWTP1 .Urb2       34.518      56.457
Hp1   .SR4        77.253     100.000
J1    .SR2        48.846      61.072
J2    .J3         12.260      10.000
J2    .Ag2        56.632      67.029
J3    .EndPt      15.000      10.000
SR2   .SR4        72.314     100.000
SR3   .Hp1        77.253     100.000
SR1   .J1         31.125      61.072
SR1   .Urb1       63.872     100.000
GW1   .Urb1       55.692      80.000
SR4   .J2         36.506      81.083
SR4   .Urb2       73.005     100.000
SR4   .Ag1        48.973     100.000
GW2   .Ag2        45.197      80.000
GW2   .Ag1        56.247      80.000
Urb2  .WWTP1      48.572      56.457
Urb1  .J1         17.721
Urb1  .GW1        26.843
Ag2   .J3          3.966       1.000
Ag2   .GW2        37.863
Ag1   .J2         21.218
Ag1   .GW2        26.553


----    479 SET dv  

3

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 14
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,3) - S(Desal1,3)
     
      + storage(Desal1,2) =E= -1000 ;
     
      (LHS = 11888.9512011563, INFES = 12888.9512011563 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,3) - Q(SR2,SR4,3) - S(SR2,3)
     
      + storage(SR2,2) =E= 0 ;
     
      (LHS = 137.603887068011, INFES = 137.603887068011 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,3) - S(SR3,3) + storage(SR3,2) =E= -30 ;
     
      (LHS = 492.746916215309, INFES = 522.746916215309 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,3) - Q(SR1,Urb1,3) - S(SR1,3)
     
      + storage(SR1,2) =E= -120 ;
     
      (LHS = 113.930094337769, INFES = 233.930094337769 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,3) + Q(Urb1,GW1,3) - S(GW1,3)
     
      + storage(GW1,2) =E= 0 ;
     
      (LHS = 491.151629613012, INFES = 491.151629613012 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,3) + Q(SR2,SR4,3) - Q(SR4,J2,3)
     
      - Q(SR4,Urb2,3) - Q(SR4,Ag1,3) - S(SR4,3) + storage(SR4,2) =E= 0 ;
     
      (LHS = 60.0000000000737, INFES = 60.0000000000737 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,3) - Q(GW2,Ag1,3) + Q(Ag2,GW2,3)
     
      + Q(Ag1,GW2,3) - S(GW2,3) + storage(GW2,2) =E= 0 ;
     
      (LHS = 402.972222278298, INFES = 402.972222278298 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,3)..  Q(Desal1,Urb2,3) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,3)..  Q(WWTP1,J2,3) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,3)..  Q(WWTP1,Urb2,3) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,3)..  Q(Hp1,SR4,3) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,3)..  Q(J1,SR2,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,3)..  Q(J2,J3,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,3)..  Q(J2,Ag2,3) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,3)..  Q(J3,EndPt,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,3)..  Q(SR2,SR4,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,3)..  Q(SR3,Hp1,3) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,3)..  Q(SR1,J1,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,3)..  Q(SR1,Urb1,3) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,3)..  Q(GW1,Urb1,3) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,3)..  Q(SR4,J2,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,3)..  Q(SR4,Urb2,3) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,3)..  Q(SR4,Ag1,3) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,3)..  Q(GW2,Ag2,3) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,3)..  Q(GW2,Ag1,3) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,3)..  Q(Urb2,WWTP1,3) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,3)..  Q(Urb1,J1,3) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,3)..  Q(Urb1,GW1,3) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,3)..  Q(Ag2,J3,3) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,3)..  Q(Ag2,GW2,3) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,3)..  Q(Ag1,J2,3) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,3)..  Q(Ag1,GW2,3) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,3)..  Q(Desal1,Urb2,3) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,3)..  Q(WWTP1,J2,3) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,3)..  Q(WWTP1,Urb2,3) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,3)..  Q(Hp1,SR4,3) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,3)..  Q(J1,SR2,3) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,3)..  Q(J2,J3,3) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,3)..  Q(J2,Ag2,3) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,3)..  Q(J3,EndPt,3) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,3)..  Q(SR2,SR4,3) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,3)..  Q(SR3,Hp1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,3)..  Q(SR1,J1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,3)..  Q(SR1,Urb1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,3)..  Q(GW1,Urb1,3) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,3)..  Q(SR4,J2,3) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,3)..  Q(SR4,Urb2,3) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,3)..  Q(SR4,Ag1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,3)..  Q(GW2,Ag2,3) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,3)..  Q(GW2,Ag1,3) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,3)..  Q(Urb2,WWTP1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,3)..  Q(Urb1,J1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,3)..  Q(Urb1,GW1,3) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,3)..  Q(Ag2,J3,3) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,3)..  Q(Ag2,GW2,3) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,3)..  Q(Ag1,J2,3) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,3)..  Q(Ag1,GW2,3) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,3)..  S(Desal1,3) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,3)..  S(SR2,3) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,3)..  S(SR3,3) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,3)..  S(SR1,3) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,3)..  S(GW1,3) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,3)..  S(SR4,3) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,3)..  S(GW2,3) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,3)..  S(Desal1,3) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,3)..  S(SR2,3) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,3)..  S(SR3,3) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,3)..  S(SR1,3) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,3)..  S(GW1,3) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,3)..  S(SR4,3) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,3)..  S(GW2,3) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,3)..  Q(WWTP1,J2,3) + Q(WWTP1,Urb2,3)
     
      - Q(Urb2,WWTP1,3) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,3)..  Q(Hp1,SR4,3) - Q(SR3,Hp1,3) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,3)..  Q(J1,SR2,3) - Q(SR1,J1,3) - Q(Urb1,J1,3) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,3)..  - Q(WWTP1,J2,3) + Q(J2,J3,3) + Q(J2,Ag2,3)
     
      - 0.95*Q(SR4,J2,3) - 0.95*Q(Ag1,J2,3) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,3)..  - 0.9*Q(J2,J3,3) + Q(J3,EndPt,3)
     
      - Q(Ag2,J3,3) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,3)..  - Q(J3,EndPt,3) + 14*alpha(EndPt) =E= 0 ;
     
      (LHS = 0.875000000006405, INFES = 0.875000000006405 ****)
     
Demand_satisfaction_ratio(Urb2,3)..  - Q(Desal1,Urb2,3) - Q(WWTP1,Urb2,3)
     
      - Q(SR4,Urb2,3) + Q(Urb2,WWTP1,3) + 60*alpha(Urb2) =E= 0 ;
     
      (LHS = 17.9999999998777, INFES = 17.9999999998777 ****)
     
Demand_satisfaction_ratio(Urb1,3)..  - Q(SR1,Urb1,3) - Q(GW1,Urb1,3)
     
      + Q(Urb1,J1,3) + Q(Urb1,GW1,3) + 44*alpha(Urb1) =E= 0 ;
     
      (LHS = 18.4186046511335, INFES = 18.4186046511335 ****)
     
Demand_satisfaction_ratio(Ag2,3)..  - Q(J2,Ag2,3) - Q(GW2,Ag2,3) + Q(Ag2,J3,3)
     
      + Q(Ag2,GW2,3) + 21*alpha(Ag2) =E= 0 ;
     
      (LHS = 14.6029056437277, INFES = 14.6029056437277 ****)
     
Demand_satisfaction_ratio(Ag1,3)..  - 0.95*Q(SR4,Ag1,3) - Q(GW2,Ag1,3)
     
      + Q(Ag1,J2,3) + Q(Ag1,GW2,3) + 27*alpha(Ag1) =E= 0 ;
     
      (LHS = 17.4999999999197, INFES = 17.4999999999197 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ; (LHS = 0)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 15
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,3)
        1       MaxFlow(Desal1,Urb2,3)
       -1       Demand_satisfaction_ratio(Urb2,3)

Q(WWTP1,J2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,3)
        1       MaxFlow(WWTP1,J2,3)
        1       Demand_satisfaction_ratio(WWTP1,3)
       -1       Demand_satisfaction_ratio(J2,3)

Q(WWTP1,Urb2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,3)
        1       MaxFlow(WWTP1,Urb2,3)
        1       Demand_satisfaction_ratio(WWTP1,3)
       -1       Demand_satisfaction_ratio(Urb2,3)

Q(Hp1,SR4,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,3)
        1       MaxFlow(Hp1,SR4,3)
        1       Demand_satisfaction_ratio(Hp1,3)
        0.1357  (DJ ****)

Q(J1,SR2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,3)
        1       MaxFlow(J1,SR2,3)
        1       Demand_satisfaction_ratio(J1,3)
  1.059906E-12  (DJ ****)

Q(J2,J3,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,3)
        1       MaxFlow(J2,J3,3)
        1       Demand_satisfaction_ratio(J2,3)
       -0.9     Demand_satisfaction_ratio(J3,3)

Q(J2,Ag2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,3)
        1       MaxFlow(J2,Ag2,3)
        1       Demand_satisfaction_ratio(J2,3)
       -1       Demand_satisfaction_ratio(Ag2,3)

Q(J3,EndPt,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,3)
        1       MaxFlow(J3,EndPt,3)
        1       Demand_satisfaction_ratio(J3,3)
       -1       Demand_satisfaction_ratio(EndPt,3)

Q(SR2,SR4,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,3)
        1       MaxFlow(SR2,SR4,3)
        0.1357  (DJ ****)

Q(SR3,Hp1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,3)
        1       MaxFlow(SR3,Hp1,3)
       -1       Demand_satisfaction_ratio(Hp1,3)

Q(SR1,J1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,3)
        1       MaxFlow(SR1,J1,3)
       -1       Demand_satisfaction_ratio(J1,3)

Q(SR1,Urb1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,3)
        1       MaxFlow(SR1,Urb1,3)
       -1       Demand_satisfaction_ratio(Urb1,3)

Q(GW1,Urb1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,3)
        1       MaxFlow(GW1,Urb1,3)
       -1       Demand_satisfaction_ratio(Urb1,3)

Q(SR4,J2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,3)
        1       MaxFlow(SR4,J2,3)
       -0.95    Demand_satisfaction_ratio(J2,3)

Q(SR4,Urb2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,3)
        1       MaxFlow(SR4,Urb2,3)
       -1       Demand_satisfaction_ratio(Urb2,3)

Q(SR4,Ag1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,3)
        1       MaxFlow(SR4,Ag1,3)
       -0.95    Demand_satisfaction_ratio(Ag1,3)

Q(GW2,Ag2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,3)
        1       MaxFlow(GW2,Ag2,3)
       -1       Demand_satisfaction_ratio(Ag2,3)

Q(GW2,Ag1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,3)
        1       MaxFlow(GW2,Ag1,3)
       -1       Demand_satisfaction_ratio(Ag1,3)

Q(Urb2,WWTP1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,3)
        1       MaxFlow(Urb2,WWTP1,3)
       -1       Demand_satisfaction_ratio(WWTP1,3)
        1       Demand_satisfaction_ratio(Urb2,3)

Q(Urb1,J1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,3)
        1       MaxFlow(Urb1,J1,3)
       -1       Demand_satisfaction_ratio(J1,3)
        1       Demand_satisfaction_ratio(Urb1,3)

Q(Urb1,GW1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,3)
        1       MaxFlow(Urb1,GW1,3)
        1       Demand_satisfaction_ratio(Urb1,3)
  1.367444E-12  (DJ ****)

Q(Ag2,J3,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,3)
        1       MaxFlow(Ag2,J3,3)
       -1       Demand_satisfaction_ratio(J3,3)
        1       Demand_satisfaction_ratio(Ag2,3)

Q(Ag2,GW2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,3)
        1       MaxFlow(Ag2,GW2,3)
        1       Demand_satisfaction_ratio(Ag2,3)
  3.449013E-12  (DJ ****)

Q(Ag1,J2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,3)
        1       MaxFlow(Ag1,J2,3)
       -0.95    Demand_satisfaction_ratio(J2,3)
        1       Demand_satisfaction_ratio(Ag1,3)

Q(Ag1,GW2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,3)
        1       MaxFlow(Ag1,GW2,3)
        1       Demand_satisfaction_ratio(Ag1,3)
  3.449013E-12  (DJ ****)


---- S  storage volume in storage nodes

S(Desal1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,3)
        1       MinStor(Desal1,3)

S(SR2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,3)
        1       MinStor(SR2,3)

S(SR3,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,3)
        1       MinStor(SR3,3)

S(SR1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,3)
        1       MinStor(SR1,3)

S(GW1,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,3)
        1       MinStor(GW1,3)

S(SR4,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,3)
        1       MinStor(SR4,3)

S(GW2,3)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,3)
        1       MinStor(GW2,3)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 121.0056197884, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 0.0625000000004575, 1, 
-1.49333345823935E-10)
       14       Demand_satisfaction_ratio(EndPt,3)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 0.299999999997962, 1, 
-1.90476120388283E-11)
       60       Demand_satisfaction_ratio(Urb2,3)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 0.418604651162124, 1, 
-6.68888744174039E-12)
       44       Demand_satisfaction_ratio(Urb1,3)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 0.695376459225127, 1, 
1.84466914545764E-11)
       21       Demand_satisfaction_ratio(Ag2,3)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 0.648148148145176, 1, 
1.29924892248318E-11)
       27       Demand_satisfaction_ratio(Ag1,3)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,2)
                (.LO, .L, .UP, .M = 11888.9512011563, 11888.9512011563, 
11888.9512011563, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,2)
                (.LO, .L, .UP, .M = 137.603887068011, 137.603887068011, 
137.603887068011, 0)
        1       MassBalance_storage(SR2)

storage(SR3,2)
                (.LO, .L, .UP, .M = 492.746916215309, 492.746916215309, 
492.746916215309, 0)
        1       MassBalance_storage(SR3)

storage(SR1,2)
                (.LO, .L, .UP, .M = 113.930094337769, 113.930094337769, 
113.930094337769, 0)
        1       MassBalance_storage(SR1)

storage(GW1,2)
                (.LO, .L, .UP, .M = 491.151629613012, 491.151629613012, 
491.151629613012, 0)
        1       MassBalance_storage(GW1)

storage(SR4,2)
                (.LO, .L, .UP, .M = 60.0000000000737, 60.0000000000737, 
60.0000000000737, 0)
        1       MassBalance_storage(SR4)

storage(GW2,2)
                (.LO, .L, .UP, .M = 402.972222278298, 402.972222278298, 
402.972222278298, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 16
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   3


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 17
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 3

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.047      1000.000
 ITERATION COUNT, LIMIT        13         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 13

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999994992e+002  -2.7099999999994992e+002
Dual infeasibility......:  3.5527136788005009e-015   3.5527136788005009e-015
Constraint violation....:  4.2632564145606011e-014   4.2632564145606011e-014
Complementarity.........:  1.4642809459646724e-011   1.4642809459646724e-011
Overall NLP error.......:  1.4642809459646724e-011   1.4642809459646724e-011


Number of objective function evaluations             = 14
Number of objective gradient evaluations             = 14
Number of equality constraint evaluations            = 14
Number of inequality constraint evaluations          = 14
Number of equality constraint Jacobian evaluations   = 14
Number of inequality constraint Jacobian evaluations = 14
Number of Lagrangian Hessian evaluations             = 13
Total CPU secs in IPOPT (w/o function evaluations)   =      0.074
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1 -1000.000 -1000.000 -1000.000 -1.34E-15      
SR2         .         .         .    -1.35E-14      
SR3      -30.000   -30.000   -30.000 -8.58E-15      
SR1     -120.000  -120.000  -120.000 -1.98E-13      
GW1         .         .         .    -6.89E-14      
SR4         .         .         .    -3.27E-13      
GW2         .         .         .    -8.20E-14      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .3      .       51.458     +INF  -1.96E-13      
WWTP1 .J2   .3      .       25.928     +INF  -3.51E-13      
WWTP1 .Urb2 .3      .       38.327     +INF  -2.15E-13      
Hp1   .SR4  .3    50.000    79.583     +INF  -3.05E-13      
J1    .SR2  .3    10.000    67.713     +INF  -1.47E-13      
J2    .J3   .3    10.000    12.671     +INF  -4.40E-12      
J2    .Ag2  .3      .       64.515     +INF  -1.31E-13      
J3    .EndPt.3    10.000    14.000     +INF  -2.50E-12      
SR2   .SR4  .3    10.000    76.878     +INF  -1.38E-13      
SR3   .Hp1  .3    50.000    79.583     +INF  -3.05E-13      
SR1   .J1   .3    10.000    38.459     +INF  -3.04E-13      
SR1   .Urb1 .3      .       62.054     +INF  -1.42E-13      
GW1   .Urb1 .3      .       54.276     +INF  -1.65E-13      
SR4   .J2   .3    10.000    31.717     +INF  -4.63E-13      
SR4   .Urb2 .3      .       34.470     +INF  -2.66E-13      
SR4   .Ag1  .3      .       51.143     +INF  -1.79E-13      
GW2   .Ag2  .3      .       34.373     +INF  -2.86E-13      
GW2   .Ag1  .3      .       55.678     +INF  -1.71E-13      
Urb2  .WWTP1.3      .       64.256     +INF  -1.34E-13      
Urb1  .J1   .3      .       29.253     +INF  -2.85E-13      
Urb1  .GW1  .3      .       43.076     +INF  -1.94E-13      
Ag2   .J3   .3      .        2.596     +INF  -3.07E-12      
Ag2   .GW2  .3      .       75.293     +INF  -1.18E-13      
Ag1   .J2   .3      .       22.239     +INF  -3.68E-13      
Ag1   .GW2  .3      .       55.026     +INF  -1.76E-13      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .3     -INF     51.458    80.000 3.457E-13      
WWTP1 .J2   .3     -INF     25.928    80.000 1.954E-13      
WWTP1 .Urb2 .3     -INF     38.327    80.000 2.948E-13      
Hp1   .SR4  .3     -INF     79.583   100.000 5.845E-13      
J1    .SR2  .3     -INF     67.713   100.000 4.534E-13      
J2    .J3   .3     -INF     12.671   200.000 5.229E-14      
J2    .Ag2  .3     -INF     64.515   100.000 4.080E-13      
J3    .EndPt.3     -INF     14.000   350.000 2.966E-14      
SR2   .SR4  .3     -INF     76.878   100.000 5.733E-13      
SR3   .Hp1  .3     -INF     79.583   100.000 5.845E-13      
SR1   .J1   .3     -INF     38.459   100.000 1.750E-13      
SR1   .Urb1 .3     -INF     62.054   100.000 3.371E-13      
GW1   .Urb1 .3     -INF     54.276    80.000 5.122E-13      
SR4   .J2   .3     -INF     31.717   200.000 5.927E-14      
SR4   .Urb2 .3     -INF     34.470   100.000 1.604E-13      
SR4   .Ag1  .3     -INF     51.143   100.000 2.258E-13      
GW2   .Ag2  .3     -INF     34.373    80.000 2.225E-13      
GW2   .Ag1  .3     -INF     55.678    80.000 4.649E-13      
Urb2  .WWTP1.3     -INF     64.256   100.000 4.034E-13      
Urb1  .J1   .3     -INF     29.253   100.000 1.540E-13      
Urb1  .GW1  .3     -INF     43.076   100.000 2.059E-13      
Ag2   .J3   .3     -INF      2.596   100.000 1.060E-13      
Ag2   .GW2  .3     -INF     75.293   100.000 5.867E-13      
Ag1   .J2   .3     -INF     22.239   100.000 1.386E-13      
Ag1   .GW2  .3     -INF     55.026   100.000 2.301E-13      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.3     -INF  12837.493 1.0000E+5 1.473E-17      
SR2   .3     -INF    128.438   200.000 1.496E-13      
SR3   .3     -INF    443.164   700.000 3.835E-14      
SR1   .3     -INF    133.417   500.000 2.627E-14      
GW1   .3     -INF    479.952  2000.000 6.489E-15      
SR4   .3     -INF     99.132   600.000 1.991E-14      
GW2   .3     -INF    443.239  2000.000 6.353E-15      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.3    10.000 12837.493     +INF  -6.80E-16      
SR2   .3    20.000   128.438     +INF  -8.82E-14      
SR3   .3    30.000   443.164     +INF  -2.43E-14      
SR1   .3    50.000   133.417     +INF  -1.41E-13      
GW1   .3   300.000   479.952     +INF  -5.48E-14      
SR4   .3    60.000    99.132     +INF  -2.48E-13      
GW2   .3   300.000   443.239     +INF  -6.63E-14      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.3      .         .         .    9.201E-14      
Hp1  .3      .         .         .    1.679E-13      
J1   .3      .         .         .    -1.65E-13      
J2   .3      .         .         .    -4.14E-13      
J3   .3      .         .         .    -6.31E-12      
EndPt.3      .         .         .    -9.49E-12      
Urb2 .3      .         .         .    -4.40E-14      
Urb1 .3      .         .         .    2.505E-13      
Ag2  .3      .         .         .    -2.68E-13      
Ag1  .3      .         .         .    2.045E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .3      .       51.458     +INF  -1.96E-13      
WWTP1 .J2   .3      .       25.928     +INF  -3.51E-13      
WWTP1 .Urb2 .3      .       38.327     +INF  -2.16E-13      
Hp1   .SR4  .3      .       79.583     +INF  -1.21E-13      
J1    .SR2  .3      .       67.713     +INF  -1.28E-13      
J2    .J3   .3      .       12.671     +INF  -9.18E-13      
J2    .Ag2  .3      .       64.515     +INF  -1.31E-13      
J3    .EndPt.3      .       14.000     +INF  -7.14E-13      
SR2   .SR4  .3      .       76.878     +INF  -1.21E-13      
SR3   .Hp1  .3      .       79.583     +INF  -1.21E-13      
SR1   .J1   .3      .       38.459     +INF  -2.33E-13      
SR1   .Urb1 .3      .       62.054     +INF  -1.42E-13      
GW1   .Urb1 .3      .       54.276     +INF  -1.65E-13      
SR4   .J2   .3      .       31.717     +INF  -3.17E-13      
SR4   .Urb2 .3      .       34.470     +INF  -2.66E-13      
SR4   .Ag1  .3      .       51.143     +INF  -1.79E-13      
GW2   .Ag2  .3      .       34.373     +INF  -2.86E-13      
GW2   .Ag1  .3      .       55.678     +INF  -1.71E-13      
Urb2  .WWTP1.3      .       64.256     +INF  -1.34E-13      
Urb1  .J1   .3      .       29.253     +INF  -2.85E-13      
Urb1  .GW1  .3      .       43.076     +INF  -1.94E-13      
Ag2   .J3   .3      .        2.596     +INF  -3.07E-12      
Ag2   .GW2  .3      .       75.293     +INF  -1.19E-13      
Ag1   .J2   .3      .       22.239     +INF  -3.68E-13      
Ag1   .GW2  .3      .       55.026     +INF  -1.76E-13      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.3      .    12837.493     +INF  -7.79E-16      
SR2   .3      .      128.438     +INF  -7.50E-14      
SR3   .3      .      443.164     +INF  -2.27E-14      
SR1   .3      .      133.417     +INF  -8.28E-14      
GW1   .3      .      479.952     +INF  -2.07E-14      
SR4   .3      .       99.132     +INF  -9.97E-14      
GW2   .3      .      443.239     +INF  -2.22E-14      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.2 11888.951 11888.951 11888.951      EPS       
SR2   .2   137.604   137.604   137.604      EPS       
SR3   .2   492.747   492.747   492.747      EPS       
SR1   .2   113.930   113.930   113.930      EPS       
GW1   .2   491.152   491.152   491.152      EPS       
SR4   .2    60.000    60.000    60.000      EPS       
GW2   .2   402.972   402.972   402.972      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 18
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3

Desal1   10968.951   11888.951   12837.493
SR2        176.531     137.604     128.438
SR3        562.747     492.747     443.164
SR1        155.003     113.930     133.417
GW1        571.152     491.152     479.952
SR4        141.083      60.000      99.132
GW2        562.972     402.972     443.239


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3

Desal1   10968.951   11888.951   12837.493
SR2        176.531     137.604     128.438
SR3        562.747     492.747     443.164
SR1        155.003     113.930     133.417
GW1        571.152     491.152     479.952
SR4        141.083      60.000      99.132
GW2        562.972     402.972     443.239


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3

Desal1.Urb2       31.049      80.000      51.458
WWTP1 .J2         14.054                  25.928
WWTP1 .Urb2       34.518      56.457      38.327
Hp1   .SR4        77.253     100.000      79.583
J1    .SR2        48.846      61.072      67.713
J2    .J3         12.260      10.000      12.671
J2    .Ag2        56.632      67.029      64.515
J3    .EndPt      15.000      10.000      14.000
SR2   .SR4        72.314     100.000      76.878
SR3   .Hp1        77.253     100.000      79.583
SR1   .J1         31.125      61.072      38.459
SR1   .Urb1       63.872     100.000      62.054
GW1   .Urb1       55.692      80.000      54.276
SR4   .J2         36.506      81.083      31.717
SR4   .Urb2       73.005     100.000      34.470
SR4   .Ag1        48.973     100.000      51.143
GW2   .Ag2        45.197      80.000      34.373
GW2   .Ag1        56.247      80.000      55.678
Urb2  .WWTP1      48.572      56.457      64.256
Urb1  .J1         17.721                  29.253
Urb1  .GW1        26.843                  43.076
Ag2   .J3          3.966       1.000       2.596
Ag2   .GW2        37.863                  75.293
Ag1   .J2         21.218                  22.239
Ag1   .GW2        26.553                  55.026


----    479 SET dv  

4

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 19
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,4) - S(Desal1,4)
     
      + storage(Desal1,3) =E= -1000 ;
     
      (LHS = 12837.4927551072, INFES = 13837.4927551072 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,4) - Q(SR2,SR4,4) - S(SR2,4)
     
      + storage(SR2,3) =E= 0 ;
     
      (LHS = 128.438052808326, INFES = 128.438052808326 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,4) - S(SR3,4) + storage(SR3,3) =E= -30 ;
     
      (LHS = 443.163681115266, INFES = 473.163681115266 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,4) - Q(SR1,Urb1,4) - S(SR1,4)
     
      + storage(SR1,3) =E= -130 ;
     
      (LHS = 133.416652610685, INFES = 263.416652610685 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,4) + Q(Urb1,GW1,4) - S(GW1,4)
     
      + storage(GW1,3) =E= 0 ;
     
      (LHS = 479.952421243182, INFES = 479.952421243182 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,4) + Q(SR2,SR4,4) - Q(SR4,J2,4)
     
      - Q(SR4,Urb2,4) - Q(SR4,Ag1,4) - S(SR4,4) + storage(SR4,3) =E= 0 ;
     
      (LHS = 99.1316514846667, INFES = 99.1316514846667 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,4) - Q(GW2,Ag1,4) + Q(Ag2,GW2,4)
     
      + Q(Ag1,GW2,4) - S(GW2,4) + storage(GW2,3) =E= 0 ;
     
      (LHS = 443.238636845924, INFES = 443.238636845924 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,4)..  Q(Desal1,Urb2,4) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,4)..  Q(WWTP1,J2,4) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,4)..  Q(WWTP1,Urb2,4) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,4)..  Q(Hp1,SR4,4) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,4)..  Q(J1,SR2,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,4)..  Q(J2,J3,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,4)..  Q(J2,Ag2,4) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,4)..  Q(J3,EndPt,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,4)..  Q(SR2,SR4,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,4)..  Q(SR3,Hp1,4) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,4)..  Q(SR1,J1,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,4)..  Q(SR1,Urb1,4) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,4)..  Q(GW1,Urb1,4) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,4)..  Q(SR4,J2,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,4)..  Q(SR4,Urb2,4) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,4)..  Q(SR4,Ag1,4) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,4)..  Q(GW2,Ag2,4) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,4)..  Q(GW2,Ag1,4) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,4)..  Q(Urb2,WWTP1,4) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,4)..  Q(Urb1,J1,4) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,4)..  Q(Urb1,GW1,4) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,4)..  Q(Ag2,J3,4) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,4)..  Q(Ag2,GW2,4) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,4)..  Q(Ag1,J2,4) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,4)..  Q(Ag1,GW2,4) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,4)..  Q(Desal1,Urb2,4) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,4)..  Q(WWTP1,J2,4) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,4)..  Q(WWTP1,Urb2,4) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,4)..  Q(Hp1,SR4,4) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,4)..  Q(J1,SR2,4) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,4)..  Q(J2,J3,4) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,4)..  Q(J2,Ag2,4) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,4)..  Q(J3,EndPt,4) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,4)..  Q(SR2,SR4,4) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,4)..  Q(SR3,Hp1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,4)..  Q(SR1,J1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,4)..  Q(SR1,Urb1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,4)..  Q(GW1,Urb1,4) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,4)..  Q(SR4,J2,4) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,4)..  Q(SR4,Urb2,4) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,4)..  Q(SR4,Ag1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,4)..  Q(GW2,Ag2,4) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,4)..  Q(GW2,Ag1,4) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,4)..  Q(Urb2,WWTP1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,4)..  Q(Urb1,J1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,4)..  Q(Urb1,GW1,4) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,4)..  Q(Ag2,J3,4) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,4)..  Q(Ag2,GW2,4) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,4)..  Q(Ag1,J2,4) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,4)..  Q(Ag1,GW2,4) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,4)..  S(Desal1,4) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,4)..  S(SR2,4) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,4)..  S(SR3,4) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,4)..  S(SR1,4) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,4)..  S(GW1,4) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,4)..  S(SR4,4) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,4)..  S(GW2,4) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,4)..  S(Desal1,4) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,4)..  S(SR2,4) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,4)..  S(SR3,4) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,4)..  S(SR1,4) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,4)..  S(GW1,4) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,4)..  S(SR4,4) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,4)..  S(GW2,4) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,4)..  Q(WWTP1,J2,4) + Q(WWTP1,Urb2,4)
     
      - Q(Urb2,WWTP1,4) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,4)..  Q(Hp1,SR4,4) - Q(SR3,Hp1,4) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,4)..  Q(J1,SR2,4) - Q(SR1,J1,4) - Q(Urb1,J1,4) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,4)..  - Q(WWTP1,J2,4) + Q(J2,J3,4) + Q(J2,Ag2,4)
     
      - 0.95*Q(SR4,J2,4) - 0.95*Q(Ag1,J2,4) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,4)..  - 0.9*Q(J2,J3,4) + Q(J3,EndPt,4)
     
      - Q(Ag2,J3,4) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,4)..  - Q(J3,EndPt,4) + 15*alpha(EndPt) =E= 0 ;
     
      (LHS = 15, INFES = 15 ****)
     
Demand_satisfaction_ratio(Urb2,4)..  - Q(Desal1,Urb2,4) - Q(WWTP1,Urb2,4)
     
      - Q(SR4,Urb2,4) + Q(Urb2,WWTP1,4) + 62*alpha(Urb2) =E= 0 ;
     
      (LHS = 62, INFES = 62 ****)
     
Demand_satisfaction_ratio(Urb1,4)..  - Q(SR1,Urb1,4) - Q(GW1,Urb1,4)
     
      + Q(Urb1,J1,4) + Q(Urb1,GW1,4) + 44*alpha(Urb1) =E= 0 ;
     
      (LHS = 44, INFES = 44 ****)
     
Demand_satisfaction_ratio(Ag2,4)..  - Q(J2,Ag2,4) - Q(GW2,Ag2,4) + Q(Ag2,J3,4)
     
      + Q(Ag2,GW2,4) + 21*alpha(Ag2) =E= 0 ; (LHS = 21, INFES = 21 ****)
     
Demand_satisfaction_ratio(Ag1,4)..  - 0.95*Q(SR4,Ag1,4) - Q(GW2,Ag1,4)
     
      + Q(Ag1,J2,4) + Q(Ag1,GW2,4) + 27*alpha(Ag1) =E= 0 ;
     
      (LHS = 27, INFES = 27 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -5.00790520163719E-11, INFES = 5.00790520163719E-11 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 20
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,4)
        1       MaxFlow(Desal1,Urb2,4)
       -1       Demand_satisfaction_ratio(Urb2,4)

Q(WWTP1,J2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,4)
        1       MaxFlow(WWTP1,J2,4)
        1       Demand_satisfaction_ratio(WWTP1,4)
       -1       Demand_satisfaction_ratio(J2,4)

Q(WWTP1,Urb2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,4)
        1       MaxFlow(WWTP1,Urb2,4)
        1       Demand_satisfaction_ratio(WWTP1,4)
       -1       Demand_satisfaction_ratio(Urb2,4)

Q(Hp1,SR4,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,4)
        1       MaxFlow(Hp1,SR4,4)
        1       Demand_satisfaction_ratio(Hp1,4)

Q(J1,SR2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,4)
        1       MaxFlow(J1,SR2,4)
        1       Demand_satisfaction_ratio(J1,4)

Q(J2,J3,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,4)
        1       MaxFlow(J2,J3,4)
        1       Demand_satisfaction_ratio(J2,4)
       -0.9     Demand_satisfaction_ratio(J3,4)

Q(J2,Ag2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,4)
        1       MaxFlow(J2,Ag2,4)
        1       Demand_satisfaction_ratio(J2,4)
       -1       Demand_satisfaction_ratio(Ag2,4)

Q(J3,EndPt,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,4)
        1       MaxFlow(J3,EndPt,4)
        1       Demand_satisfaction_ratio(J3,4)
       -1       Demand_satisfaction_ratio(EndPt,4)

Q(SR2,SR4,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,4)
        1       MaxFlow(SR2,SR4,4)

Q(SR3,Hp1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,4)
        1       MaxFlow(SR3,Hp1,4)
       -1       Demand_satisfaction_ratio(Hp1,4)

Q(SR1,J1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,4)
        1       MaxFlow(SR1,J1,4)
       -1       Demand_satisfaction_ratio(J1,4)

Q(SR1,Urb1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,4)
        1       MaxFlow(SR1,Urb1,4)
       -1       Demand_satisfaction_ratio(Urb1,4)

Q(GW1,Urb1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,4)
        1       MaxFlow(GW1,Urb1,4)
       -1       Demand_satisfaction_ratio(Urb1,4)

Q(SR4,J2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,4)
        1       MaxFlow(SR4,J2,4)
       -0.95    Demand_satisfaction_ratio(J2,4)

Q(SR4,Urb2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,4)
        1       MaxFlow(SR4,Urb2,4)
       -1       Demand_satisfaction_ratio(Urb2,4)

Q(SR4,Ag1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,4)
        1       MaxFlow(SR4,Ag1,4)
       -0.95    Demand_satisfaction_ratio(Ag1,4)

Q(GW2,Ag2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,4)
        1       MaxFlow(GW2,Ag2,4)
       -1       Demand_satisfaction_ratio(Ag2,4)

Q(GW2,Ag1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,4)
        1       MaxFlow(GW2,Ag1,4)
       -1       Demand_satisfaction_ratio(Ag1,4)

Q(Urb2,WWTP1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,4)
        1       MaxFlow(Urb2,WWTP1,4)
       -1       Demand_satisfaction_ratio(WWTP1,4)
        1       Demand_satisfaction_ratio(Urb2,4)

Q(Urb1,J1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,4)
        1       MaxFlow(Urb1,J1,4)
       -1       Demand_satisfaction_ratio(J1,4)
        1       Demand_satisfaction_ratio(Urb1,4)

Q(Urb1,GW1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,4)
        1       MaxFlow(Urb1,GW1,4)
        1       Demand_satisfaction_ratio(Urb1,4)

Q(Ag2,J3,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,4)
        1       MaxFlow(Ag2,J3,4)
       -1       Demand_satisfaction_ratio(J3,4)
        1       Demand_satisfaction_ratio(Ag2,4)

Q(Ag2,GW2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,4)
        1       MaxFlow(Ag2,GW2,4)
        1       Demand_satisfaction_ratio(Ag2,4)

Q(Ag1,J2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,4)
        1       MaxFlow(Ag1,J2,4)
       -0.95    Demand_satisfaction_ratio(J2,4)
        1       Demand_satisfaction_ratio(Ag1,4)

Q(Ag1,GW2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,4)
        1       MaxFlow(Ag1,GW2,4)
        1       Demand_satisfaction_ratio(Ag1,4)


---- S  storage volume in storage nodes

S(Desal1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,4)
        1       MinStor(Desal1,4)

S(SR2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,4)
        1       MinStor(SR2,4)

S(SR3,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,4)
        1       MinStor(SR3,4)

S(SR1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,4)
        1       MinStor(SR1,4)

S(GW1,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,4)
        1       MinStor(GW1,4)

S(SR4,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,4)
        1       MinStor(SR4,4)

S(GW2,4)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,4)
        1       MinStor(GW2,4)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.99999999995, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 1.00000000013284)
       15       Demand_satisfaction_ratio(EndPt,4)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 100.000000000003)
       62       Demand_satisfaction_ratio(Urb2,4)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.999999999989)
       44       Demand_satisfaction_ratio(Urb1,4)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 30.0000000000056)
       21       Demand_satisfaction_ratio(Ag2,4)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.9999999999945)
       27       Demand_satisfaction_ratio(Ag1,4)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,3)
                (.LO, .L, .UP, .M = 12837.4927551072, 12837.4927551072, 
12837.4927551072, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,3)
                (.LO, .L, .UP, .M = 128.438052808326, 128.438052808326, 
128.438052808326, 0)
        1       MassBalance_storage(SR2)

storage(SR3,3)
                (.LO, .L, .UP, .M = 443.163681115266, 443.163681115266, 
443.163681115266, 0)
        1       MassBalance_storage(SR3)

storage(SR1,3)
                (.LO, .L, .UP, .M = 133.416652610685, 133.416652610685, 
133.416652610685, 0)
        1       MassBalance_storage(SR1)

storage(GW1,3)
                (.LO, .L, .UP, .M = 479.952421243182, 479.952421243182, 
479.952421243182, 0)
        1       MassBalance_storage(GW1)

storage(SR4,3)
                (.LO, .L, .UP, .M = 99.1316514846667, 99.1316514846667, 
99.1316514846667, 0)
        1       MassBalance_storage(SR4)

storage(GW2,3)
                (.LO, .L, .UP, .M = 443.238636845924, 443.238636845924, 
443.238636845924, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 21
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   4


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 22
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 4

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.039      1000.000
 ITERATION COUNT, LIMIT        12         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 12

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999937432e+002  -2.7099999999937432e+002
Dual infeasibility......:  8.4174656134194947e-010   8.4174656134194947e-010
Constraint violation....:  2.8421709430404007e-014   2.8421709430404007e-014
Complementarity.........:  5.0107824692157120e-010   5.0107824692157120e-010
Overall NLP error.......:  8.4174656134194947e-010   8.4174656134194947e-010


Number of objective function evaluations             = 13
Number of objective gradient evaluations             = 13
Number of equality constraint evaluations            = 13
Number of inequality constraint evaluations          = 13
Number of equality constraint Jacobian evaluations   = 13
Number of inequality constraint Jacobian evaluations = 13
Number of Lagrangian Hessian evaluations             = 12
Total CPU secs in IPOPT (w/o function evaluations)   =      0.067
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1 -1000.000 -1000.000 -1000.000 -5.69E-15      
SR2         .         .         .    -1.53E-13      
SR3      -30.000   -30.000   -30.000 -9.55E-14      
SR1     -130.000  -130.000  -130.000 -6.60E-13      
GW1         .         .         .    -3.34E-13      
SR4         .         .         .    -1.03E-12      
GW2         .         .         .    -3.14E-13      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .4      .       45.174     +INF  -9.18E-13      
WWTP1 .J2   .4      .       14.473     +INF  -1.49E-12      
WWTP1 .Urb2 .4      .       23.135     +INF  -1.02E-12      
Hp1   .SR4  .4    50.000    64.826     +INF  -1.48E-12      
J1    .SR2  .4    10.000    44.057     +INF  -6.32E-13      
J2    .J3   .4    10.000    12.538     +INF  1.371E-11      
J2    .Ag2  .4      .       40.084     +INF  -4.58E-13      
J3    .EndPt.4    10.000    15.000     +INF  4.268E-12      
SR2   .SR4  .4    10.000    43.356     +INF  -8.99E-13      
SR3   .Hp1  .4    50.000    64.826     +INF  -1.48E-12      
SR1   .J1   .4    10.000    27.665     +INF  -1.37E-12      
SR1   .Urb1 .4      .       43.860     +INF  -6.88E-13      
GW1   .Urb1 .4      .       38.335     +INF  -8.18E-13      
SR4   .J2   .4    10.000    24.550     +INF  -1.64E-12      
SR4   .Urb2 .4      .       31.299     +INF  -1.06E-12      
SR4   .Ag1  .4      .       34.936     +INF  -8.69E-13      
GW2   .Ag2  .4      .       23.312     +INF  -1.05E-12      
GW2   .Ag1  .4      .       32.939     +INF  -9.31E-13      
Urb2  .WWTP1.4      .       37.607     +INF  -6.02E-13      
Urb1  .J1   .4      .       16.392     +INF  -1.27E-12      
Urb1  .GW1  .4      .       21.803     +INF  -7.99E-13      
Ag2   .J3   .4      .        3.716     +INF  5.867E-12      
Ag2   .GW2  .4      .       38.681     +INF  -7.25E-13      
Ag1   .J2   .4      .       15.608     +INF  -1.36E-12      
Ag1   .GW2  .4      .       23.521     +INF  -6.26E-13      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .4     -INF     45.174    80.000 1.550E-12      
WWTP1 .J2   .4     -INF     14.473    80.000 9.466E-13      
WWTP1 .Urb2 .4     -INF     23.135    80.000 1.349E-12      
Hp1   .SR4  .4     -INF     64.826   100.000 2.512E-12      
J1    .SR2  .4     -INF     44.057   100.000 2.210E-12      
J2    .J3   .4     -INF     12.538   200.000 2.556E-13      
J2    .Ag2  .4     -INF     40.084   100.000 1.916E-12      
J3    .EndPt.4     -INF     15.000   350.000 1.434E-13      
SR2   .SR4  .4     -INF     43.356   100.000 2.229E-12      
SR3   .Hp1  .4     -INF     64.826   100.000 2.512E-12      
SR1   .J1   .4     -INF     27.665   100.000 8.466E-13      
SR1   .Urb1 .4     -INF     43.860   100.000 1.675E-12      
GW1   .Urb1 .4     -INF     38.335    80.000 2.262E-12      
SR4   .J2   .4     -INF     24.550   200.000 2.839E-13      
SR4   .Urb2 .4     -INF     31.299   100.000 8.139E-13      
SR4   .Ag1  .4     -INF     34.936   100.000 1.181E-12      
GW2   .Ag2  .4     -INF     23.312    80.000 1.158E-12      
GW2   .Ag1  .4     -INF     32.939    80.000 2.044E-12      
Urb2  .WWTP1.4     -INF     37.607   100.000 1.892E-12      
Urb1  .J1   .4     -INF     16.392   100.000 7.114E-13      
Urb1  .GW1  .4     -INF     21.803   100.000 9.729E-13      
Ag2   .J3   .4     -INF      3.716   100.000 5.200E-13      
Ag2   .GW2  .4     -INF     38.681   100.000 2.398E-12      
Ag1   .J2   .4     -INF     15.608   100.000 6.666E-13      
Ag1   .GW2  .4     -INF     23.521   100.000 1.071E-12      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.4     -INF  13792.319 1.0000E+5 7.368E-17      
SR2   .4     -INF    129.139   200.000 6.351E-13      
SR3   .4     -INF    408.338   700.000 1.489E-13      
SR1   .4     -INF    191.892   500.000 1.301E-13      
GW1   .4     -INF    463.421  2000.000 2.973E-14      
SR4   .4     -INF    116.529   600.000 9.573E-14      
GW2   .4     -INF    449.189  2000.000 3.002E-14      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.4    10.000 13792.319     +INF  -2.88E-15      
SR2   .4    20.000   129.139     +INF  -4.28E-13      
SR3   .4    30.000   408.338     +INF  -1.27E-13      
SR1   .4    50.000   191.892     +INF  -4.75E-13      
GW1   .4   300.000   463.421     +INF  -2.66E-13      
SR4   .4    60.000   116.529     +INF  -7.45E-13      
GW2   .4   300.000   449.189     +INF  -2.49E-13      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.4      .         .         .    4.060E-13      
Hp1  .4      .         .         .    5.622E-13      
J1   .4      .         .         .    -8.66E-13      
J2   .4      .         .         .    -1.64E-12      
J3   .4      .         .         .    1.162E-11      
EndPt.4      .         .         .    1.539E-11      
Urb2 .4      .         .         .    -2.81E-13      
Urb1 .4      .         .         .    9.597E-13      
Ag2  .4      .         .         .    -6.35E-13      
Ag1  .4      .         .         .    4.958E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .4      .       45.174     +INF  -3.02E-12      
WWTP1 .J2   .4      .       14.473     +INF  -5.24E-12      
WWTP1 .Urb2 .4      .       23.135     +INF  -3.26E-12      
Hp1   .SR4  .4      .       64.826     +INF  -1.83E-12      
J1    .SR2  .4      .       44.057     +INF  -1.79E-12      
J2    .J3   .4      .       12.538     +INF  -9.86E-12      
J2    .Ag2  .4      .       40.084     +INF  -1.21E-12      
J3    .EndPt.4      .       15.000     +INF  -7.17E-12      
SR2   .SR4  .4      .       43.356     +INF  -1.28E-12      
SR3   .Hp1  .4      .       64.826     +INF  -1.83E-12      
SR1   .J1   .4      .       27.665     +INF  -3.21E-12      
SR1   .Urb1 .4      .       43.860     +INF  -2.31E-12      
GW1   .Urb1 .4      .       38.335     +INF  -2.73E-12      
SR4   .J2   .4      .       24.550     +INF  -4.23E-12      
SR4   .Urb2 .4      .       31.299     +INF  -3.45E-12      
SR4   .Ag1  .4      .       34.936     +INF  -3.07E-12      
GW2   .Ag2  .4      .       23.312     +INF  -3.59E-12      
GW2   .Ag1  .4      .       32.939     +INF  -3.32E-12      
Urb2  .WWTP1.4      .       37.607     +INF  -1.98E-12      
Urb1  .J1   .4      .       16.392     +INF  -4.03E-12      
Urb1  .GW1  .4      .       21.803     +INF  -2.49E-12      
Ag2   .J3   .4      .        3.716     +INF  -1.43E-11      
Ag2   .GW2  .4      .       38.681     +INF  -2.34E-12      
Ag1   .J2   .4      .       15.608     +INF  -4.55E-12      
Ag1   .GW2  .4      .       23.521     +INF  -1.66E-12      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.4      .    13792.319     +INF  -1.08E-14      
SR2   .4      .      129.139     +INF  -1.17E-12      
SR3   .4      .      408.338     +INF  -3.82E-13      
SR1   .4      .      191.892     +INF  -1.02E-12      
GW1   .4      .      463.421     +INF  -3.16E-13      
SR4   .4      .      116.529     +INF  -1.20E-12      
GW2   .4      .      449.189     +INF  -3.04E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.3 12837.493 12837.493 12837.493      EPS       
SR2   .3   128.438   128.438   128.438      EPS       
SR3   .3   443.164   443.164   443.164      EPS       
SR1   .3   133.417   133.417   133.417      EPS       
GW1   .3   479.952   479.952   479.952      EPS       
SR4   .3    99.132    99.132    99.132      EPS       
GW2   .3   443.239   443.239   443.239      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 23
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000,    4 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3           4

Desal1   10968.951   11888.951   12837.493   13792.319
SR2        176.531     137.604     128.438     129.139
SR3        562.747     492.747     443.164     408.338
SR1        155.003     113.930     133.417     191.892
GW1        571.152     491.152     479.952     463.421
SR4        141.083      60.000      99.132     116.529
GW2        562.972     402.972     443.239     449.189


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3           4

Desal1   10968.951   11888.951   12837.493   13792.319
SR2        176.531     137.604     128.438     129.139
SR3        562.747     492.747     443.164     408.338
SR1        155.003     113.930     133.417     191.892
GW1        571.152     491.152     479.952     463.421
SR4        141.083      60.000      99.132     116.529
GW2        562.972     402.972     443.239     449.189


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3           4

Desal1.Urb2       31.049      80.000      51.458      45.174
WWTP1 .J2         14.054                  25.928      14.473
WWTP1 .Urb2       34.518      56.457      38.327      23.135
Hp1   .SR4        77.253     100.000      79.583      64.826
J1    .SR2        48.846      61.072      67.713      44.057
J2    .J3         12.260      10.000      12.671      12.538
J2    .Ag2        56.632      67.029      64.515      40.084
J3    .EndPt      15.000      10.000      14.000      15.000
SR2   .SR4        72.314     100.000      76.878      43.356
SR3   .Hp1        77.253     100.000      79.583      64.826
SR1   .J1         31.125      61.072      38.459      27.665
SR1   .Urb1       63.872     100.000      62.054      43.860
GW1   .Urb1       55.692      80.000      54.276      38.335
SR4   .J2         36.506      81.083      31.717      24.550
SR4   .Urb2       73.005     100.000      34.470      31.299
SR4   .Ag1        48.973     100.000      51.143      34.936
GW2   .Ag2        45.197      80.000      34.373      23.312
GW2   .Ag1        56.247      80.000      55.678      32.939
Urb2  .WWTP1      48.572      56.457      64.256      37.607
Urb1  .J1         17.721                  29.253      16.392
Urb1  .GW1        26.843                  43.076      21.803
Ag2   .J3          3.966       1.000       2.596       3.716
Ag2   .GW2        37.863                  75.293      38.681
Ag1   .J2         21.218                  22.239      15.608
Ag1   .GW2        26.553                  55.026      23.521


----    479 SET dv  

5

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 24
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,5) - S(Desal1,5)
     
      + storage(Desal1,4) =E= -1000 ;
     
      (LHS = 13792.3186881184, INFES = 14792.3186881184 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,5) - Q(SR2,SR4,5) - S(SR2,5)
     
      + storage(SR2,4) =E= 0 ;
     
      (LHS = 129.139007583323, INFES = 129.139007583323 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,5) - S(SR3,5) + storage(SR3,4) =E= -40 ;
     
      (LHS = 408.338118911438, INFES = 448.338118911438 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,5) - Q(SR1,Urb1,5) - S(SR1,5)
     
      + storage(SR1,4) =E= -110 ;
     
      (LHS = 191.891646312605, INFES = 301.891646312605 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,5) + Q(Urb1,GW1,5) - S(GW1,5)
     
      + storage(GW1,4) =E= 0 ;
     
      (LHS = 463.420669523253, INFES = 463.420669523253 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,5) + Q(SR2,SR4,5) - Q(SR4,J2,5)
     
      - Q(SR4,Urb2,5) - Q(SR4,Ag1,5) - S(SR4,5) + storage(SR4,4) =E= 0 ;
     
      (LHS = 116.528679526209, INFES = 116.528679526209 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,5) - Q(GW2,Ag1,5) + Q(Ag2,GW2,5)
     
      + Q(Ag1,GW2,5) - S(GW2,5) + storage(GW2,4) =E= 0 ;
     
      (LHS = 449.188585145958, INFES = 449.188585145958 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,5)..  Q(Desal1,Urb2,5) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,5)..  Q(WWTP1,J2,5) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,5)..  Q(WWTP1,Urb2,5) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,5)..  Q(Hp1,SR4,5) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,5)..  Q(J1,SR2,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,5)..  Q(J2,J3,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,5)..  Q(J2,Ag2,5) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,5)..  Q(J3,EndPt,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,5)..  Q(SR2,SR4,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,5)..  Q(SR3,Hp1,5) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,5)..  Q(SR1,J1,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,5)..  Q(SR1,Urb1,5) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,5)..  Q(GW1,Urb1,5) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,5)..  Q(SR4,J2,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,5)..  Q(SR4,Urb2,5) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,5)..  Q(SR4,Ag1,5) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,5)..  Q(GW2,Ag2,5) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,5)..  Q(GW2,Ag1,5) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,5)..  Q(Urb2,WWTP1,5) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,5)..  Q(Urb1,J1,5) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,5)..  Q(Urb1,GW1,5) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,5)..  Q(Ag2,J3,5) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,5)..  Q(Ag2,GW2,5) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,5)..  Q(Ag1,J2,5) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,5)..  Q(Ag1,GW2,5) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,5)..  Q(Desal1,Urb2,5) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,5)..  Q(WWTP1,J2,5) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,5)..  Q(WWTP1,Urb2,5) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,5)..  Q(Hp1,SR4,5) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,5)..  Q(J1,SR2,5) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,5)..  Q(J2,J3,5) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,5)..  Q(J2,Ag2,5) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,5)..  Q(J3,EndPt,5) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,5)..  Q(SR2,SR4,5) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,5)..  Q(SR3,Hp1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,5)..  Q(SR1,J1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,5)..  Q(SR1,Urb1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,5)..  Q(GW1,Urb1,5) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,5)..  Q(SR4,J2,5) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,5)..  Q(SR4,Urb2,5) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,5)..  Q(SR4,Ag1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,5)..  Q(GW2,Ag2,5) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,5)..  Q(GW2,Ag1,5) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,5)..  Q(Urb2,WWTP1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,5)..  Q(Urb1,J1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,5)..  Q(Urb1,GW1,5) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,5)..  Q(Ag2,J3,5) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,5)..  Q(Ag2,GW2,5) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,5)..  Q(Ag1,J2,5) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,5)..  Q(Ag1,GW2,5) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,5)..  S(Desal1,5) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,5)..  S(SR2,5) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,5)..  S(SR3,5) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,5)..  S(SR1,5) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,5)..  S(GW1,5) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,5)..  S(SR4,5) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,5)..  S(GW2,5) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,5)..  S(Desal1,5) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,5)..  S(SR2,5) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,5)..  S(SR3,5) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,5)..  S(SR1,5) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,5)..  S(GW1,5) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,5)..  S(SR4,5) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,5)..  S(GW2,5) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,5)..  Q(WWTP1,J2,5) + Q(WWTP1,Urb2,5)
     
      - Q(Urb2,WWTP1,5) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,5)..  Q(Hp1,SR4,5) - Q(SR3,Hp1,5) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,5)..  Q(J1,SR2,5) - Q(SR1,J1,5) - Q(Urb1,J1,5) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,5)..  - Q(WWTP1,J2,5) + Q(J2,J3,5) + Q(J2,Ag2,5)
     
      - 0.95*Q(SR4,J2,5) - 0.95*Q(Ag1,J2,5) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,5)..  - 0.9*Q(J2,J3,5) + Q(J3,EndPt,5)
     
      - Q(Ag2,J3,5) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,5)..  - Q(J3,EndPt,5) + 15*alpha(EndPt) =E= 0 ;
     
      (LHS = 15, INFES = 15 ****)
     
Demand_satisfaction_ratio(Urb2,5)..  - Q(Desal1,Urb2,5) - Q(WWTP1,Urb2,5)
     
      - Q(SR4,Urb2,5) + Q(Urb2,WWTP1,5) + 62*alpha(Urb2) =E= 0 ;
     
      (LHS = 62, INFES = 62 ****)
     
Demand_satisfaction_ratio(Urb1,5)..  - Q(SR1,Urb1,5) - Q(GW1,Urb1,5)
     
      + Q(Urb1,J1,5) + Q(Urb1,GW1,5) + 46*alpha(Urb1) =E= 0 ;
     
      (LHS = 46, INFES = 46 ****)
     
Demand_satisfaction_ratio(Ag2,5)..  - Q(J2,Ag2,5) - Q(GW2,Ag2,5) + Q(Ag2,J3,5)
     
      + Q(Ag2,GW2,5) + 22*alpha(Ag2) =E= 0 ; (LHS = 22, INFES = 22 ****)
     
Demand_satisfaction_ratio(Ag1,5)..  - 0.95*Q(SR4,Ag1,5) - Q(GW2,Ag1,5)
     
      + Q(Ag1,J2,5) + Q(Ag1,GW2,5) + 27*alpha(Ag1) =E= 0 ;
     
      (LHS = 27, INFES = 27 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -6.25675511400914E-10, INFES = 6.25675511400914E-10 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 25
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,5)
        1       MaxFlow(Desal1,Urb2,5)
       -1       Demand_satisfaction_ratio(Urb2,5)

Q(WWTP1,J2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,5)
        1       MaxFlow(WWTP1,J2,5)
        1       Demand_satisfaction_ratio(WWTP1,5)
       -1       Demand_satisfaction_ratio(J2,5)

Q(WWTP1,Urb2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,5)
        1       MaxFlow(WWTP1,Urb2,5)
        1       Demand_satisfaction_ratio(WWTP1,5)
       -1       Demand_satisfaction_ratio(Urb2,5)

Q(Hp1,SR4,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,5)
        1       MaxFlow(Hp1,SR4,5)
        1       Demand_satisfaction_ratio(Hp1,5)
  1.028849E-12  (DJ ****)

Q(J1,SR2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,5)
        1       MaxFlow(J1,SR2,5)
        1       Demand_satisfaction_ratio(J1,5)

Q(J2,J3,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,5)
        1       MaxFlow(J2,J3,5)
        1       Demand_satisfaction_ratio(J2,5)
       -0.9     Demand_satisfaction_ratio(J3,5)

Q(J2,Ag2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,5)
        1       MaxFlow(J2,Ag2,5)
        1       Demand_satisfaction_ratio(J2,5)
       -1       Demand_satisfaction_ratio(Ag2,5)

Q(J3,EndPt,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,5)
        1       MaxFlow(J3,EndPt,5)
        1       Demand_satisfaction_ratio(J3,5)
       -1       Demand_satisfaction_ratio(EndPt,5)

Q(SR2,SR4,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,5)
        1       MaxFlow(SR2,SR4,5)

Q(SR3,Hp1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,5)
        1       MaxFlow(SR3,Hp1,5)
       -1       Demand_satisfaction_ratio(Hp1,5)

Q(SR1,J1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,5)
        1       MaxFlow(SR1,J1,5)
       -1       Demand_satisfaction_ratio(J1,5)

Q(SR1,Urb1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,5)
        1       MaxFlow(SR1,Urb1,5)
       -1       Demand_satisfaction_ratio(Urb1,5)

Q(GW1,Urb1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,5)
        1       MaxFlow(GW1,Urb1,5)
       -1       Demand_satisfaction_ratio(Urb1,5)

Q(SR4,J2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,5)
        1       MaxFlow(SR4,J2,5)
       -0.95    Demand_satisfaction_ratio(J2,5)

Q(SR4,Urb2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,5)
        1       MaxFlow(SR4,Urb2,5)
       -1       Demand_satisfaction_ratio(Urb2,5)

Q(SR4,Ag1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,5)
        1       MaxFlow(SR4,Ag1,5)
       -0.95    Demand_satisfaction_ratio(Ag1,5)

Q(GW2,Ag2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,5)
        1       MaxFlow(GW2,Ag2,5)
       -1       Demand_satisfaction_ratio(Ag2,5)

Q(GW2,Ag1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,5)
        1       MaxFlow(GW2,Ag1,5)
       -1       Demand_satisfaction_ratio(Ag1,5)

Q(Urb2,WWTP1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,5)
        1       MaxFlow(Urb2,WWTP1,5)
       -1       Demand_satisfaction_ratio(WWTP1,5)
        1       Demand_satisfaction_ratio(Urb2,5)

Q(Urb1,J1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,5)
        1       MaxFlow(Urb1,J1,5)
       -1       Demand_satisfaction_ratio(J1,5)
        1       Demand_satisfaction_ratio(Urb1,5)

Q(Urb1,GW1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,5)
        1       MaxFlow(Urb1,GW1,5)
        1       Demand_satisfaction_ratio(Urb1,5)

Q(Ag2,J3,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,5)
        1       MaxFlow(Ag2,J3,5)
       -1       Demand_satisfaction_ratio(J3,5)
        1       Demand_satisfaction_ratio(Ag2,5)

Q(Ag2,GW2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,5)
        1       MaxFlow(Ag2,GW2,5)
        1       Demand_satisfaction_ratio(Ag2,5)

Q(Ag1,J2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,5)
        1       MaxFlow(Ag1,J2,5)
       -0.95    Demand_satisfaction_ratio(J2,5)
        1       Demand_satisfaction_ratio(Ag1,5)

Q(Ag1,GW2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,5)
        1       MaxFlow(Ag1,GW2,5)
        1       Demand_satisfaction_ratio(Ag1,5)


---- S  storage volume in storage nodes

S(Desal1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,5)
        1       MinStor(Desal1,5)

S(SR2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,5)
        1       MinStor(SR2,5)

S(SR3,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,5)
        1       MinStor(SR3,5)

S(SR1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,5)
        1       MinStor(SR1,5)

S(GW1,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,5)
        1       MinStor(GW1,5)

S(SR4,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,5)
        1       MinStor(SR4,5)

S(GW2,5)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,5)
        1       MinStor(GW2,5)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.999999999374, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 1.00000000061089)
       15       Demand_satisfaction_ratio(EndPt,5)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 100.000000000068)
       62       Demand_satisfaction_ratio(Urb2,5)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.9999999998715)
       46       Demand_satisfaction_ratio(Urb1,5)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 30.0000000000529)
       22       Demand_satisfaction_ratio(Ag2,5)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.9999999999767)
       27       Demand_satisfaction_ratio(Ag1,5)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,4)
                (.LO, .L, .UP, .M = 13792.3186881184, 13792.3186881184, 
13792.3186881184, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,4)
                (.LO, .L, .UP, .M = 129.139007583323, 129.139007583323, 
129.139007583323, 0)
        1       MassBalance_storage(SR2)

storage(SR3,4)
                (.LO, .L, .UP, .M = 408.338118911438, 408.338118911438, 
408.338118911438, 0)
        1       MassBalance_storage(SR3)

storage(SR1,4)
                (.LO, .L, .UP, .M = 191.891646312605, 191.891646312605, 
191.891646312605, 0)
        1       MassBalance_storage(SR1)

storage(GW1,4)
                (.LO, .L, .UP, .M = 463.420669523253, 463.420669523253, 
463.420669523253, 0)
        1       MassBalance_storage(GW1)

storage(SR4,4)
                (.LO, .L, .UP, .M = 116.528679526209, 116.528679526209, 
116.528679526209, 0)
        1       MassBalance_storage(SR4)

storage(GW2,4)
                (.LO, .L, .UP, .M = 449.188585145958, 449.188585145958, 
449.188585145958, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 26
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   5


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 27
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 5

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.048      1000.000
 ITERATION COUNT, LIMIT        16         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 16

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999994998e+002  -2.7099999999994998e+002
Dual infeasibility......:  1.7781331962396507e-011   1.7781331962396507e-011
Constraint violation....:  2.8421709430404007e-014   2.8421709430404007e-014
Complementarity.........:  8.8409232627550414e-009   8.8409232627550414e-009
Overall NLP error.......:  8.8409232627550414e-009   8.8409232627550414e-009


Number of objective function evaluations             = 17
Number of objective gradient evaluations             = 17
Number of equality constraint evaluations            = 17
Number of inequality constraint evaluations          = 17
Number of equality constraint Jacobian evaluations   = 17
Number of inequality constraint Jacobian evaluations = 17
Number of Lagrangian Hessian evaluations             = 16
Total CPU secs in IPOPT (w/o function evaluations)   =      0.078
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1 -1000.000 -1000.000 -1000.000 -1.16E-15      
SR2         .         .         .    -1.17E-15      
SR3      -40.000   -40.000   -40.000 -4.44E-14      
SR1     -110.000  -110.000  -110.000 -1.34E-13      
GW1         .         .         .    -8.11E-14      
SR4         .         .         .    -2.32E-13      
GW2         .         .         .    -5.48E-14      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .5      .       41.516     +INF  -2.20E-13      
WWTP1 .J2   .5      .       17.125     +INF  1.420E-13      
WWTP1 .Urb2 .5      .       27.088     +INF  -2.59E-13      
Hp1   .SR4  .5    50.000    64.542     +INF  -2.61E-13      
J1    .SR2  .5    10.000    49.211     +INF  6.801E-14      
J2    .J3   .5    10.000    12.701     +INF  -3.69E-12      
J2    .Ag2  .5      .       57.224     +INF  1.118E-13      
J3    .EndPt.5    10.000    15.000     +INF  -2.00E-12      
SR2   .SR4  .5    10.000    50.243     +INF  -8.04E-14      
SR3   .Hp1  .5    50.000    64.542     +INF  -2.61E-13      
SR1   .J1   .5    10.000    31.412     +INF  -5.32E-13      
SR1   .Urb1 .5      .       49.626     +INF  -1.65E-13      
GW1   .Urb1 .5      .       39.399     +INF  -1.69E-13      
SR4   .J2   .5    10.000    33.079     +INF  4.133E-13      
SR4   .Urb2 .5      .       37.609     +INF  -2.53E-13      
SR4   .Ag1  .5      .       39.383     +INF  -1.40E-13      
GW2   .Ag2  .5      .       36.120     +INF  4.606E-13      
GW2   .Ag1  .5      .       39.619     +INF  -1.23E-13      
Urb2  .WWTP1.5      .       44.213     +INF  -4.47E-14      
Urb1  .J1   .5      .       17.799     +INF  -3.40E-13      
Urb1  .GW1  .5      .       25.226     +INF  -1.43E-13      
Ag2   .J3   .5      .        3.569     +INF  -2.81E-12      
Ag2   .GW2  .5      .       67.775     +INF  -8.56E-13      
Ag1   .J2   .5      .       22.499     +INF  1.018E-13      
Ag1   .GW2  .5      .       27.533     +INF  -1.97E-13      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .5     -INF     41.516    80.000 3.668E-13      
WWTP1 .J2   .5     -INF     17.125    80.000 2.099E-13      
WWTP1 .Urb2 .5     -INF     27.088    80.000 2.834E-13      
Hp1   .SR4  .5     -INF     64.542   100.000 4.955E-13      
J1    .SR2  .5     -INF     49.211   100.000 3.541E-13      
J2    .J3   .5     -INF     12.701   200.000 5.353E-14      
J2    .Ag2  .5     -INF     57.224   100.000 4.568E-13      
J3    .EndPt.5     -INF     15.000   350.000 2.975E-14      
SR2   .SR4  .5     -INF     50.243   100.000 4.425E-13      
SR3   .Hp1  .5     -INF     64.542   100.000 4.955E-13      
SR1   .J1   .5     -INF     31.412   100.000 2.129E-13      
SR1   .Urb1 .5     -INF     49.626   100.000 3.680E-13      
GW1   .Urb1 .5     -INF     39.399    80.000 4.280E-13      
SR4   .J2   .5     -INF     33.079   200.000 8.377E-14      
SR4   .Urb2 .5     -INF     37.609   100.000 2.034E-13      
SR4   .Ag1  .5     -INF     39.383   100.000 2.761E-13      
GW2   .Ag2  .5     -INF     36.120    80.000 3.616E-13      
GW2   .Ag1  .5     -INF     39.619    80.000 4.329E-13      
Urb2  .WWTP1.5     -INF     44.213   100.000 3.240E-13      
Urb1  .J1   .5     -INF     17.799   100.000 1.591E-13      
Urb1  .GW1  .5     -INF     25.226   100.000 1.954E-13      
Ag2   .J3   .5     -INF      3.569   100.000 1.031E-13      
Ag2   .GW2  .5     -INF     67.775   100.000 4.288E-13      
Ag1   .J2   .5     -INF     22.499   100.000 1.796E-13      
Ag1   .GW2  .5     -INF     27.533   100.000 2.080E-13      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.5     -INF  14750.803 1.0000E+5 -6.55E-19      
SR2   .5     -INF    128.107   200.000 1.659E-13      
SR3   .5     -INF    383.796   700.000 1.028E-14      
SR1   .5     -INF    220.853   500.000 -2.41E-14      
GW1   .5     -INF    449.248  2000.000 7.166E-15      
SR4   .5     -INF    121.243   600.000 1.762E-14      
GW2   .5     -INF    468.758  2000.000 1.394E-14      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.5    10.000 14750.803     +INF  -5.79E-16      
SR2   .5    20.000   128.107     +INF  -9.04E-14      
SR3   .5    30.000   383.796     +INF  -2.85E-14      
SR1   .5    50.000   220.853     +INF  -6.25E-14      
GW1   .5   300.000   449.248     +INF  -6.62E-14      
SR4   .5    60.000   121.243     +INF  -1.66E-13      
GW2   .5   300.000   468.758     +INF  -4.87E-14      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.5      .         .         .    1.635E-13      
Hp1  .5      .         .         .    1.384E-13      
J1   .5      .         .         .    -3.50E-13      
J2   .5      .         .         .    6.573E-13      
J3   .5      .         .         .    -4.18E-12      
EndPt.5      .         .         .    -6.81E-12      
Urb2 .5      .         .         .    -7.11E-14      
Urb1 .5      .         .         .    1.710E-13      
Ag2  .5      .         .         .    1.338E-12      
Ag1  .5      .         .         .    2.412E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .5      .       41.516     +INF  -2.79E-13      
WWTP1 .J2   .5      .       17.125     +INF  -3.31E-13      
WWTP1 .Urb2 .5      .       27.088     +INF  -3.43E-13      
Hp1   .SR4  .5      .       64.542     +INF  -1.82E-13      
J1    .SR2  .5      .       49.211     +INF  -1.78E-13      
J2    .J3   .5      .       12.701     +INF  -9.05E-13      
J2    .Ag2  .5      .       57.224     +INF  -6.62E-14      
J3    .EndPt.5      .       15.000     +INF  -7.34E-13      
SR2   .SR4  .5      .       50.243     +INF  -1.95E-13      
SR3   .Hp1  .5      .       64.542     +INF  -1.82E-13      
SR1   .J1   .5      .       31.412     +INF  -3.11E-13      
SR1   .Urb1 .5      .       49.626     +INF  -2.12E-13      
GW1   .Urb1 .5      .       39.399     +INF  -2.61E-13      
SR4   .J2   .5      .       33.079     +INF  -2.84E-13      
SR4   .Urb2 .5      .       37.609     +INF  -2.94E-13      
SR4   .Ag1  .5      .       39.383     +INF  -2.52E-13      
GW2   .Ag2  .5      .       36.120     +INF  -1.83E-20      
GW2   .Ag1  .5      .       39.619     +INF  -2.48E-13      
Urb2  .WWTP1.5      .       44.213     +INF  -1.74E-13      
Urb1  .J1   .5      .       17.799     +INF  -4.80E-13      
Urb1  .GW1  .5      .       25.226     +INF  -2.80E-13      
Ag2   .J3   .5      .        3.569     +INF  -2.88E-12      
Ag2   .GW2  .5      .       67.775     +INF  -5.37E-13      
Ag1   .J2   .5      .       22.499     +INF  -2.67E-13      
Ag1   .GW2  .5      .       27.533     +INF  -2.97E-13      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.5      .    14750.803     +INF  -8.01E-16      
SR2   .5      .      128.107     +INF  -9.85E-14      
SR3   .5      .      383.796     +INF  -3.07E-14      
SR1   .5      .      220.853     +INF  -5.42E-14      
GW1   .5      .      449.248     +INF  -2.66E-14      
SR4   .5      .      121.243     +INF  -9.53E-14      
GW2   .5      .      468.758     +INF  -2.57E-14      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.4 13792.319 13792.319 13792.319      EPS       
SR2   .4   129.139   129.139   129.139      EPS       
SR3   .4   408.338   408.338   408.338      EPS       
SR1   .4   191.892   191.892   191.892      EPS       
GW1   .4   463.421   463.421   463.421      EPS       
SR4   .4   116.529   116.529   116.529      EPS       
GW2   .4   449.189   449.189   449.189      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 28
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000,    4 271.000,    5 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3           4           5

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803
SR2        176.531     137.604     128.438     129.139     128.107
SR3        562.747     492.747     443.164     408.338     383.796
SR1        155.003     113.930     133.417     191.892     220.853
GW1        571.152     491.152     479.952     463.421     449.248
SR4        141.083      60.000      99.132     116.529     121.243
GW2        562.972     402.972     443.239     449.189     468.758


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3           4           5

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803
SR2        176.531     137.604     128.438     129.139     128.107
SR3        562.747     492.747     443.164     408.338     383.796
SR1        155.003     113.930     133.417     191.892     220.853
GW1        571.152     491.152     479.952     463.421     449.248
SR4        141.083      60.000      99.132     116.529     121.243
GW2        562.972     402.972     443.239     449.189     468.758


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3           4           5

Desal1.Urb2       31.049      80.000      51.458      45.174      41.516
WWTP1 .J2         14.054                  25.928      14.473      17.125
WWTP1 .Urb2       34.518      56.457      38.327      23.135      27.088
Hp1   .SR4        77.253     100.000      79.583      64.826      64.542
J1    .SR2        48.846      61.072      67.713      44.057      49.211
J2    .J3         12.260      10.000      12.671      12.538      12.701
J2    .Ag2        56.632      67.029      64.515      40.084      57.224
J3    .EndPt      15.000      10.000      14.000      15.000      15.000
SR2   .SR4        72.314     100.000      76.878      43.356      50.243
SR3   .Hp1        77.253     100.000      79.583      64.826      64.542
SR1   .J1         31.125      61.072      38.459      27.665      31.412
SR1   .Urb1       63.872     100.000      62.054      43.860      49.626
GW1   .Urb1       55.692      80.000      54.276      38.335      39.399
SR4   .J2         36.506      81.083      31.717      24.550      33.079
SR4   .Urb2       73.005     100.000      34.470      31.299      37.609
SR4   .Ag1        48.973     100.000      51.143      34.936      39.383
GW2   .Ag2        45.197      80.000      34.373      23.312      36.120
GW2   .Ag1        56.247      80.000      55.678      32.939      39.619
Urb2  .WWTP1      48.572      56.457      64.256      37.607      44.213
Urb1  .J1         17.721                  29.253      16.392      17.799
Urb1  .GW1        26.843                  43.076      21.803      25.226
Ag2   .J3          3.966       1.000       2.596       3.716       3.569
Ag2   .GW2        37.863                  75.293      38.681      67.775
Ag1   .J2         21.218                  22.239      15.608      22.499
Ag1   .GW2        26.553                  55.026      23.521      27.533


----    479 SET dv  

6

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 29
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,6) - S(Desal1,6)
     
      + storage(Desal1,5) =E= -1000 ;
     
      (LHS = 14750.8025348544, INFES = 15750.8025348544 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,6) - Q(SR2,SR4,6) - S(SR2,6)
     
      + storage(SR2,5) =E= 0 ;
     
      (LHS = 128.107135894754, INFES = 128.107135894754 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,6) - S(SR3,6) + storage(SR3,5) =E= -50 ;
     
      (LHS = 383.796195983129, INFES = 433.796195983129 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,6) - Q(SR1,Urb1,6) - S(SR1,6)
     
      + storage(SR1,5) =E= -110 ;
     
      (LHS = 220.853424148785, INFES = 330.853424148785 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,6) + Q(Urb1,GW1,6) - S(GW1,6)
     
      + storage(GW1,5) =E= 0 ;
     
      (LHS = 449.247750230644, INFES = 449.247750230644 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,6) + Q(SR2,SR4,6) - Q(SR4,J2,6)
     
      - Q(SR4,Urb2,6) - Q(SR4,Ag1,6) - S(SR4,6) + storage(SR4,5) =E= 0 ;
     
      (LHS = 121.242514220451, INFES = 121.242514220451 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,6) - Q(GW2,Ag1,6) + Q(Ag2,GW2,6)
     
      + Q(Ag1,GW2,6) - S(GW2,6) + storage(GW2,5) =E= 0 ;
     
      (LHS = 468.757684879171, INFES = 468.757684879171 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,6)..  Q(Desal1,Urb2,6) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,6)..  Q(WWTP1,J2,6) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,6)..  Q(WWTP1,Urb2,6) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,6)..  Q(Hp1,SR4,6) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,6)..  Q(J1,SR2,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,6)..  Q(J2,J3,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,6)..  Q(J2,Ag2,6) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,6)..  Q(J3,EndPt,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,6)..  Q(SR2,SR4,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,6)..  Q(SR3,Hp1,6) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,6)..  Q(SR1,J1,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,6)..  Q(SR1,Urb1,6) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,6)..  Q(GW1,Urb1,6) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,6)..  Q(SR4,J2,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,6)..  Q(SR4,Urb2,6) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,6)..  Q(SR4,Ag1,6) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,6)..  Q(GW2,Ag2,6) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,6)..  Q(GW2,Ag1,6) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,6)..  Q(Urb2,WWTP1,6) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,6)..  Q(Urb1,J1,6) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,6)..  Q(Urb1,GW1,6) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,6)..  Q(Ag2,J3,6) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,6)..  Q(Ag2,GW2,6) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,6)..  Q(Ag1,J2,6) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,6)..  Q(Ag1,GW2,6) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,6)..  Q(Desal1,Urb2,6) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,6)..  Q(WWTP1,J2,6) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,6)..  Q(WWTP1,Urb2,6) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,6)..  Q(Hp1,SR4,6) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,6)..  Q(J1,SR2,6) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,6)..  Q(J2,J3,6) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,6)..  Q(J2,Ag2,6) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,6)..  Q(J3,EndPt,6) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,6)..  Q(SR2,SR4,6) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,6)..  Q(SR3,Hp1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,6)..  Q(SR1,J1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,6)..  Q(SR1,Urb1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,6)..  Q(GW1,Urb1,6) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,6)..  Q(SR4,J2,6) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,6)..  Q(SR4,Urb2,6) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,6)..  Q(SR4,Ag1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,6)..  Q(GW2,Ag2,6) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,6)..  Q(GW2,Ag1,6) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,6)..  Q(Urb2,WWTP1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,6)..  Q(Urb1,J1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,6)..  Q(Urb1,GW1,6) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,6)..  Q(Ag2,J3,6) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,6)..  Q(Ag2,GW2,6) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,6)..  Q(Ag1,J2,6) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,6)..  Q(Ag1,GW2,6) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,6)..  S(Desal1,6) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,6)..  S(SR2,6) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,6)..  S(SR3,6) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,6)..  S(SR1,6) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,6)..  S(GW1,6) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,6)..  S(SR4,6) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,6)..  S(GW2,6) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,6)..  S(Desal1,6) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,6)..  S(SR2,6) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,6)..  S(SR3,6) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,6)..  S(SR1,6) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,6)..  S(GW1,6) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,6)..  S(SR4,6) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,6)..  S(GW2,6) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,6)..  Q(WWTP1,J2,6) + Q(WWTP1,Urb2,6)
     
      - Q(Urb2,WWTP1,6) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,6)..  Q(Hp1,SR4,6) - Q(SR3,Hp1,6) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,6)..  Q(J1,SR2,6) - Q(SR1,J1,6) - Q(Urb1,J1,6) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,6)..  - Q(WWTP1,J2,6) + Q(J2,J3,6) + Q(J2,Ag2,6)
     
      - 0.95*Q(SR4,J2,6) - 0.95*Q(Ag1,J2,6) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,6)..  - 0.9*Q(J2,J3,6) + Q(J3,EndPt,6)
     
      - Q(Ag2,J3,6) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,6)..  - Q(J3,EndPt,6) + 15*alpha(EndPt) =E= 0 ;
     
      (LHS = 15, INFES = 15 ****)
     
Demand_satisfaction_ratio(Urb2,6)..  - Q(Desal1,Urb2,6) - Q(WWTP1,Urb2,6)
     
      - Q(SR4,Urb2,6) + Q(Urb2,WWTP1,6) + 65*alpha(Urb2) =E= 0 ;
     
      (LHS = 65, INFES = 65 ****)
     
Demand_satisfaction_ratio(Urb1,6)..  - Q(SR1,Urb1,6) - Q(GW1,Urb1,6)
     
      + Q(Urb1,J1,6) + Q(Urb1,GW1,6) + 49*alpha(Urb1) =E= 0 ;
     
      (LHS = 49, INFES = 49 ****)
     
Demand_satisfaction_ratio(Ag2,6)..  - Q(J2,Ag2,6) - Q(GW2,Ag2,6) + Q(Ag2,J3,6)
     
      + Q(Ag2,GW2,6) + 22*alpha(Ag2) =E= 0 ; (LHS = 22, INFES = 22 ****)
     
Demand_satisfaction_ratio(Ag1,6)..  - 0.95*Q(SR4,Ag1,6) - Q(GW2,Ag1,6)
     
      + Q(Ag1,J2,6) + Q(Ag1,GW2,6) + 29*alpha(Ag1) =E= 0 ;
     
      (LHS = 29, INFES = 29 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -5.00222085975111E-11, INFES = 5.00222085975111E-11 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 30
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,6)
        1       MaxFlow(Desal1,Urb2,6)
       -1       Demand_satisfaction_ratio(Urb2,6)

Q(WWTP1,J2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,6)
        1       MaxFlow(WWTP1,J2,6)
        1       Demand_satisfaction_ratio(WWTP1,6)
       -1       Demand_satisfaction_ratio(J2,6)

Q(WWTP1,Urb2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,6)
        1       MaxFlow(WWTP1,Urb2,6)
        1       Demand_satisfaction_ratio(WWTP1,6)
       -1       Demand_satisfaction_ratio(Urb2,6)

Q(Hp1,SR4,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,6)
        1       MaxFlow(Hp1,SR4,6)
        1       Demand_satisfaction_ratio(Hp1,6)

Q(J1,SR2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,6)
        1       MaxFlow(J1,SR2,6)
        1       Demand_satisfaction_ratio(J1,6)

Q(J2,J3,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,6)
        1       MaxFlow(J2,J3,6)
        1       Demand_satisfaction_ratio(J2,6)
       -0.9     Demand_satisfaction_ratio(J3,6)

Q(J2,Ag2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,6)
        1       MaxFlow(J2,Ag2,6)
        1       Demand_satisfaction_ratio(J2,6)
       -1       Demand_satisfaction_ratio(Ag2,6)

Q(J3,EndPt,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,6)
        1       MaxFlow(J3,EndPt,6)
        1       Demand_satisfaction_ratio(J3,6)
       -1       Demand_satisfaction_ratio(EndPt,6)

Q(SR2,SR4,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,6)
        1       MaxFlow(SR2,SR4,6)

Q(SR3,Hp1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,6)
        1       MaxFlow(SR3,Hp1,6)
       -1       Demand_satisfaction_ratio(Hp1,6)

Q(SR1,J1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,6)
        1       MaxFlow(SR1,J1,6)
       -1       Demand_satisfaction_ratio(J1,6)

Q(SR1,Urb1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,6)
        1       MaxFlow(SR1,Urb1,6)
       -1       Demand_satisfaction_ratio(Urb1,6)

Q(GW1,Urb1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,6)
        1       MaxFlow(GW1,Urb1,6)
       -1       Demand_satisfaction_ratio(Urb1,6)

Q(SR4,J2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,6)
        1       MaxFlow(SR4,J2,6)
       -0.95    Demand_satisfaction_ratio(J2,6)

Q(SR4,Urb2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,6)
        1       MaxFlow(SR4,Urb2,6)
       -1       Demand_satisfaction_ratio(Urb2,6)

Q(SR4,Ag1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,6)
        1       MaxFlow(SR4,Ag1,6)
       -0.95    Demand_satisfaction_ratio(Ag1,6)

Q(GW2,Ag2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,6)
        1       MaxFlow(GW2,Ag2,6)
       -1       Demand_satisfaction_ratio(Ag2,6)

Q(GW2,Ag1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,6)
        1       MaxFlow(GW2,Ag1,6)
       -1       Demand_satisfaction_ratio(Ag1,6)

Q(Urb2,WWTP1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,6)
        1       MaxFlow(Urb2,WWTP1,6)
       -1       Demand_satisfaction_ratio(WWTP1,6)
        1       Demand_satisfaction_ratio(Urb2,6)

Q(Urb1,J1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,6)
        1       MaxFlow(Urb1,J1,6)
       -1       Demand_satisfaction_ratio(J1,6)
        1       Demand_satisfaction_ratio(Urb1,6)

Q(Urb1,GW1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,6)
        1       MaxFlow(Urb1,GW1,6)
        1       Demand_satisfaction_ratio(Urb1,6)

Q(Ag2,J3,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,6)
        1       MaxFlow(Ag2,J3,6)
       -1       Demand_satisfaction_ratio(J3,6)
        1       Demand_satisfaction_ratio(Ag2,6)

Q(Ag2,GW2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,6)
        1       MaxFlow(Ag2,GW2,6)
        1       Demand_satisfaction_ratio(Ag2,6)

Q(Ag1,J2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,6)
        1       MaxFlow(Ag1,J2,6)
       -0.95    Demand_satisfaction_ratio(J2,6)
        1       Demand_satisfaction_ratio(Ag1,6)

Q(Ag1,GW2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,6)
        1       MaxFlow(Ag1,GW2,6)
        1       Demand_satisfaction_ratio(Ag1,6)


---- S  storage volume in storage nodes

S(Desal1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,6)
        1       MinStor(Desal1,6)

S(SR2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,6)
        1       MinStor(SR2,6)

S(SR3,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,6)
        1       MinStor(SR3,6)

S(SR1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,6)
        1       MinStor(SR1,6)

S(GW1,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,6)
        1       MinStor(GW1,6)

S(SR4,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,6)
        1       MinStor(SR4,6)

S(GW2,6)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,6)
        1       MinStor(GW2,6)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.99999999995, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 1.0000000001137)
       15       Demand_satisfaction_ratio(EndPt,6)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 99.9999999999932)
       65       Demand_satisfaction_ratio(Urb2,6)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.9999999999892)
       49       Demand_satisfaction_ratio(Urb1,6)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 29.9999999999884)
       22       Demand_satisfaction_ratio(Ag2,6)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.999999999994)
       29       Demand_satisfaction_ratio(Ag1,6)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,5)
                (.LO, .L, .UP, .M = 14750.8025348544, 14750.8025348544, 
14750.8025348544, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,5)
                (.LO, .L, .UP, .M = 128.107135894754, 128.107135894754, 
128.107135894754, 0)
        1       MassBalance_storage(SR2)

storage(SR3,5)
                (.LO, .L, .UP, .M = 383.796195983129, 383.796195983129, 
383.796195983129, 0)
        1       MassBalance_storage(SR3)

storage(SR1,5)
                (.LO, .L, .UP, .M = 220.853424148785, 220.853424148785, 
220.853424148785, 0)
        1       MassBalance_storage(SR1)

storage(GW1,5)
                (.LO, .L, .UP, .M = 449.247750230644, 449.247750230644, 
449.247750230644, 0)
        1       MassBalance_storage(GW1)

storage(SR4,5)
                (.LO, .L, .UP, .M = 121.242514220451, 121.242514220451, 
121.242514220451, 0)
        1       MassBalance_storage(SR4)

storage(GW2,5)
                (.LO, .L, .UP, .M = 468.757684879171, 468.757684879171, 
468.757684879171, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 31
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   6


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.015 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.015 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 32
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 6

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.025      1000.000
 ITERATION COUNT, LIMIT        14         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 14

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999994998e+002  -2.7099999999994998e+002
Dual infeasibility......:  1.1296252727096706e-011   1.1296252727096706e-011
Constraint violation....:  2.8421709430404007e-014   2.8421709430404007e-014
Complementarity.........:  1.0003109451808452e-011   1.0003109451808452e-011
Overall NLP error.......:  1.1296252727096706e-011   1.1296252727096706e-011


Number of objective function evaluations             = 15
Number of objective gradient evaluations             = 15
Number of equality constraint evaluations            = 15
Number of inequality constraint evaluations          = 15
Number of equality constraint Jacobian evaluations   = 15
Number of inequality constraint Jacobian evaluations = 15
Number of Lagrangian Hessian evaluations             = 14
Total CPU secs in IPOPT (w/o function evaluations)   =      0.048
Total CPU secs in NLP function evaluations           =      0.002

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1 -1000.000 -1000.000 -1000.000 -5.11E-12      
SR2         .         .         .    -3.50E-12      
SR3      -50.000   -50.000   -50.000 -3.11E-12      
SR1     -110.000  -110.000  -110.000 -1.29E-12      
GW1         .         .         .    -9.13E-13      
SR4         .         .         .    -8.78E-12      
GW2         .         .         .    -1.48E-11      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .6      .       43.818     +INF  1.473E-12      
WWTP1 .J2   .6      .       18.429     +INF  1.650E-12      
WWTP1 .Urb2 .6      .       31.164     +INF  -1.31E-12      
Hp1   .SR4  .6    50.000    71.582     +INF  5.645E-13      
J1    .SR2  .6    10.000    56.799     +INF  4.394E-13      
J2    .J3   .6    10.000    12.757     +INF  2.044E-12      
J2    .Ag2  .6      .       53.924     +INF  9.288E-13      
J3    .EndPt.6    10.000    15.000     +INF  9.296E-12      
SR2   .SR4  .6    10.000    56.805     +INF  1.597E-12      
SR3   .Hp1  .6    50.000    71.582     +INF  5.645E-13      
SR1   .J1   .6    10.000    35.397     +INF  -8.30E-14      
SR1   .Urb1 .6      .       57.518     +INF  -7.28E-14      
GW1   .Urb1 .6      .       44.870     +INF  2.089E-14      
SR4   .J2   .6    10.000    30.008     +INF  2.878E-12      
SR4   .Urb2 .6      .       39.611     +INF  2.786E-13      
SR4   .Ag1  .6      .       43.199     +INF  1.563E-12      
GW2   .Ag2  .6      .       27.134     +INF  2.307E-12      
GW2   .Ag1  .6      .       42.572     +INF  -2.34E-13      
Urb2  .WWTP1.6      .       49.593     +INF  1.002E-12      
Urb1  .J1   .6      .       21.402     +INF  -1.25E-13      
Urb1  .GW1  .6      .       31.985     +INF  -3.43E-13      
Ag2   .J3   .6      .        3.519     +INF  3.350E-12      
Ag2   .GW2  .6      .       55.539     +INF  -2.63E-12      
Ag1   .J2   .6      .       20.784     +INF  9.758E-13      
Ag1   .GW2  .6      .       33.828     +INF  -8.24E-14      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .6     -INF     43.818    80.000 1.978E-12      
WWTP1 .J2   .6     -INF     18.429    80.000 2.355E-12      
WWTP1 .Urb2 .6     -INF     31.164    80.000 -7.85E-13      
Hp1   .SR4  .6     -INF     71.582   100.000 1.380E-12      
J1    .SR2  .6     -INF     56.799   100.000 8.843E-13      
J2    .J3   .6     -INF     12.757   200.000 5.725E-12      
J2    .Ag2  .6     -INF     53.924   100.000 1.331E-12      
J3    .EndPt.6     -INF     15.000   350.000 1.133E-11      
SR2   .SR4  .6     -INF     56.805   100.000 2.042E-12      
SR3   .Hp1  .6     -INF     71.582   100.000 1.380E-12      
SR1   .J1   .6     -INF     35.397   100.000 4.653E-13      
SR1   .Urb1 .6     -INF     57.518   100.000 3.363E-13      
GW1   .Urb1 .6     -INF     44.870    80.000 5.282E-13      
SR4   .J2   .6     -INF     30.008   200.000 3.437E-12      
SR4   .Urb2 .6     -INF     39.611   100.000 6.964E-13      
SR4   .Ag1  .6     -INF     43.199   100.000 1.970E-12      
GW2   .Ag2  .6     -INF     27.134    80.000 2.864E-12      
GW2   .Ag1  .6     -INF     42.572    80.000 2.681E-13      
Urb2  .WWTP1.6     -INF     49.593   100.000 1.402E-12      
Urb1  .J1   .6     -INF     21.402   100.000 4.695E-13      
Urb1  .GW1  .6     -INF     31.985   100.000 1.163E-13      
Ag2   .J3   .6     -INF      3.519   100.000 6.295E-12      
Ag2   .GW2  .6     -INF     55.539   100.000 -2.22E-12      
Ag1   .J2   .6     -INF     20.784   100.000 1.583E-12      
Ag1   .GW2  .6     -INF     33.828   100.000 3.642E-13      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.6     -INF  15706.985 1.0000E+5 -1.70E-12      
SR2   .6     -INF    128.101   200.000 -1.02E-12      
SR3   .6     -INF    362.214   700.000 -9.98E-13      
SR1   .6     -INF    237.939   500.000 -3.74E-13      
GW1   .6     -INF    436.363  2000.000 -2.68E-13      
SR4   .6     -INF    136.812   600.000 -2.84E-12      
GW2   .6     -INF    488.418  2000.000 -4.90E-12      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.6    10.000 15706.985     +INF  -1.70E-12      
SR2   .6    20.000   128.101     +INF  -1.25E-12      
SR3   .6    30.000   362.214     +INF  -1.06E-12      
SR1   .6    50.000   237.939     +INF  -4.65E-13      
GW1   .6   300.000   436.363     +INF  -3.48E-13      
SR4   .6    60.000   136.812     +INF  -2.99E-12      
GW2   .6   300.000   488.418     +INF  -4.96E-12      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.6      .         .         .    1.343E-11      
Hp1  .6      .         .         .    5.943E-12      
J1   .6      .         .         .    1.702E-12      
J2   .6      .         .         .    1.909E-11      
J3   .6      .         .         .    3.527E-11      
EndPt.6      .         .         .    6.653E-11      
Urb2 .6      .         .         .    1.003E-11      
Urb1 .6      .         .         .    1.483E-12      
Ag2  .6      .         .         .    2.228E-11      
Ag1  .6      .         .         .    1.460E-11      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .6      .       43.818     +INF  -2.28E-13      
WWTP1 .J2   .6      .       18.429     +INF  -5.43E-13      
WWTP1 .Urb2 .6      .       31.164     +INF  -3.21E-13      
Hp1   .SR4  .6      .       71.582     +INF  -1.40E-13      
J1    .SR2  .6      .       56.799     +INF  -1.76E-13      
J2    .J3   .6      .       12.757     +INF  -7.84E-13      
J2    .Ag2  .6      .       53.924     +INF  -1.85E-13      
J3    .EndPt.6      .       15.000     +INF  -6.67E-13      
SR2   .SR4  .6      .       56.805     +INF  -1.76E-13      
SR3   .Hp1  .6      .       71.582     +INF  -1.40E-13      
SR1   .J1   .6      .       35.397     +INF  -2.83E-13      
SR1   .Urb1 .6      .       57.518     +INF  -1.74E-13      
GW1   .Urb1 .6      .       44.870     +INF  -2.23E-13      
SR4   .J2   .6      .       30.008     +INF  -3.33E-13      
SR4   .Urb2 .6      .       39.611     +INF  -2.52E-13      
SR4   .Ag1  .6      .       43.199     +INF  -2.31E-13      
GW2   .Ag2  .6      .       27.134     +INF  -3.69E-13      
GW2   .Ag1  .6      .       42.572     +INF  -2.35E-13      
Urb2  .WWTP1.6      .       49.593     +INF  -2.02E-13      
Urb1  .J1   .6      .       21.402     +INF  -4.67E-13      
Urb1  .GW1  .6      .       31.985     +INF  -3.13E-13      
Ag2   .J3   .6      .        3.519     +INF  -2.84E-12      
Ag2   .GW2  .6      .       55.539     +INF  -1.80E-13      
Ag1   .J2   .6      .       20.784     +INF  -4.81E-13      
Ag1   .GW2  .6      .       33.828     +INF  -2.96E-13      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.6      .    15706.985     +INF  -6.37E-16      
SR2   .6      .      128.101     +INF  -7.81E-14      
SR3   .6      .      362.214     +INF  -2.76E-14      
SR1   .6      .      237.939     +INF  -4.20E-14      
GW1   .6      .      436.363     +INF  -2.29E-14      
SR4   .6      .      136.812     +INF  -7.31E-14      
GW2   .6      .      488.418     +INF  -2.05E-14      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.5 14750.803 14750.803 14750.803      EPS       
SR2   .5   128.107   128.107   128.107      EPS       
SR3   .5   383.796   383.796   383.796      EPS       
SR1   .5   220.853   220.853   220.853      EPS       
GW1   .5   449.248   449.248   449.248      EPS       
SR4   .5   121.243   121.243   121.243      EPS       
GW2   .5   468.758   468.758   468.758      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 33
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000,    4 271.000,    5 271.000,    6 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3           4           5

Desal1.Urb2       31.049      80.000      51.458      45.174      41.516
WWTP1 .J2         14.054                  25.928      14.473      17.125
WWTP1 .Urb2       34.518      56.457      38.327      23.135      27.088
Hp1   .SR4        77.253     100.000      79.583      64.826      64.542
J1    .SR2        48.846      61.072      67.713      44.057      49.211
J2    .J3         12.260      10.000      12.671      12.538      12.701
J2    .Ag2        56.632      67.029      64.515      40.084      57.224
J3    .EndPt      15.000      10.000      14.000      15.000      15.000
SR2   .SR4        72.314     100.000      76.878      43.356      50.243
SR3   .Hp1        77.253     100.000      79.583      64.826      64.542
SR1   .J1         31.125      61.072      38.459      27.665      31.412
SR1   .Urb1       63.872     100.000      62.054      43.860      49.626
GW1   .Urb1       55.692      80.000      54.276      38.335      39.399
SR4   .J2         36.506      81.083      31.717      24.550      33.079
SR4   .Urb2       73.005     100.000      34.470      31.299      37.609
SR4   .Ag1        48.973     100.000      51.143      34.936      39.383
GW2   .Ag2        45.197      80.000      34.373      23.312      36.120
GW2   .Ag1        56.247      80.000      55.678      32.939      39.619
Urb2  .WWTP1      48.572      56.457      64.256      37.607      44.213
Urb1  .J1         17.721                  29.253      16.392      17.799
Urb1  .GW1        26.843                  43.076      21.803      25.226
Ag2   .J3          3.966       1.000       2.596       3.716       3.569
Ag2   .GW2        37.863                  75.293      38.681      67.775
Ag1   .J2         21.218                  22.239      15.608      22.499
Ag1   .GW2        26.553                  55.026      23.521      27.533

           +           6

Desal1.Urb2       43.818
WWTP1 .J2         18.429
WWTP1 .Urb2       31.164
Hp1   .SR4        71.582
J1    .SR2        56.799
J2    .J3         12.757
J2    .Ag2        53.924
J3    .EndPt      15.000
SR2   .SR4        56.805
SR3   .Hp1        71.582
SR1   .J1         35.397
SR1   .Urb1       57.518
GW1   .Urb1       44.870
SR4   .J2         30.008
SR4   .Urb2       39.611
SR4   .Ag1        43.199
GW2   .Ag2        27.134
GW2   .Ag1        42.572
Urb2  .WWTP1      49.593
Urb1  .J1         21.402
Urb1  .GW1        31.985
Ag2   .J3          3.519
Ag2   .GW2        55.539
Ag1   .J2         20.784
Ag1   .GW2        33.828


----    479 SET dv  

7

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 34
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,7) - S(Desal1,7)
     
      + storage(Desal1,6) =E= 0 ;
     
      (LHS = 15706.984543465, INFES = 15706.984543465 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,7) - Q(SR2,SR4,7) - S(SR2,7)
     
      + storage(SR2,6) =E= 0 ;
     
      (LHS = 128.100832444981, INFES = 128.100832444981 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,7) - S(SR3,7) + storage(SR3,6) =E= 0 ;
     
      (LHS = 362.213726250377, INFES = 362.213726250377 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,7) - Q(SR1,Urb1,7) - S(SR1,7)
     
      + storage(SR1,6) =E= 0 ;
     
      (LHS = 237.939031676317, INFES = 237.939031676317 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,7) + Q(Urb1,GW1,7) - S(GW1,7)
     
      + storage(GW1,6) =E= 0 ;
     
      (LHS = 436.362959825557, INFES = 436.362959825557 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,7) + Q(SR2,SR4,7) - Q(SR4,J2,7)
     
      - Q(SR4,Urb2,7) - Q(SR4,Ag1,7) - S(SR4,7) + storage(SR4,6) =E= 0 ;
     
      (LHS = 136.812443390685, INFES = 136.812443390685 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,7) - Q(GW2,Ag1,7) + Q(Ag2,GW2,7)
     
      + Q(Ag1,GW2,7) - S(GW2,7) + storage(GW2,6) =E= 0 ;
     
      (LHS = 488.418448068413, INFES = 488.418448068413 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,7)..  Q(Desal1,Urb2,7) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,7)..  Q(WWTP1,J2,7) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,7)..  Q(WWTP1,Urb2,7) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,7)..  Q(Hp1,SR4,7) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,7)..  Q(J1,SR2,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,7)..  Q(J2,J3,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,7)..  Q(J2,Ag2,7) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,7)..  Q(J3,EndPt,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,7)..  Q(SR2,SR4,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,7)..  Q(SR3,Hp1,7) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,7)..  Q(SR1,J1,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,7)..  Q(SR1,Urb1,7) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,7)..  Q(GW1,Urb1,7) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,7)..  Q(SR4,J2,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,7)..  Q(SR4,Urb2,7) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,7)..  Q(SR4,Ag1,7) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,7)..  Q(GW2,Ag2,7) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,7)..  Q(GW2,Ag1,7) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,7)..  Q(Urb2,WWTP1,7) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,7)..  Q(Urb1,J1,7) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,7)..  Q(Urb1,GW1,7) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,7)..  Q(Ag2,J3,7) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,7)..  Q(Ag2,GW2,7) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,7)..  Q(Ag1,J2,7) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,7)..  Q(Ag1,GW2,7) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,7)..  Q(Desal1,Urb2,7) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,7)..  Q(WWTP1,J2,7) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,7)..  Q(WWTP1,Urb2,7) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,7)..  Q(Hp1,SR4,7) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,7)..  Q(J1,SR2,7) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,7)..  Q(J2,J3,7) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,7)..  Q(J2,Ag2,7) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,7)..  Q(J3,EndPt,7) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,7)..  Q(SR2,SR4,7) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,7)..  Q(SR3,Hp1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,7)..  Q(SR1,J1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,7)..  Q(SR1,Urb1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,7)..  Q(GW1,Urb1,7) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,7)..  Q(SR4,J2,7) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,7)..  Q(SR4,Urb2,7) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,7)..  Q(SR4,Ag1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,7)..  Q(GW2,Ag2,7) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,7)..  Q(GW2,Ag1,7) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,7)..  Q(Urb2,WWTP1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,7)..  Q(Urb1,J1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,7)..  Q(Urb1,GW1,7) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,7)..  Q(Ag2,J3,7) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,7)..  Q(Ag2,GW2,7) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,7)..  Q(Ag1,J2,7) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,7)..  Q(Ag1,GW2,7) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,7)..  S(Desal1,7) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,7)..  S(SR2,7) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,7)..  S(SR3,7) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,7)..  S(SR1,7) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,7)..  S(GW1,7) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,7)..  S(SR4,7) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,7)..  S(GW2,7) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,7)..  S(Desal1,7) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,7)..  S(SR2,7) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,7)..  S(SR3,7) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,7)..  S(SR1,7) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,7)..  S(GW1,7) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,7)..  S(SR4,7) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,7)..  S(GW2,7) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,7)..  Q(WWTP1,J2,7) + Q(WWTP1,Urb2,7)
     
      - Q(Urb2,WWTP1,7) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,7)..  Q(Hp1,SR4,7) - Q(SR3,Hp1,7) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,7)..  Q(J1,SR2,7) - Q(SR1,J1,7) - Q(Urb1,J1,7) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,7)..  - Q(WWTP1,J2,7) + Q(J2,J3,7) + Q(J2,Ag2,7)
     
      - 0.95*Q(SR4,J2,7) - 0.95*Q(Ag1,J2,7) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,7)..  - 0.9*Q(J2,J3,7) + Q(J3,EndPt,7)
     
      - Q(Ag2,J3,7) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,7)..  - Q(J3,EndPt,7) + 14*alpha(EndPt) =E= 0 ;
     
      (LHS = 14, INFES = 14 ****)
     
Demand_satisfaction_ratio(Urb2,7)..  - Q(Desal1,Urb2,7) - Q(WWTP1,Urb2,7)
     
      - Q(SR4,Urb2,7) + Q(Urb2,WWTP1,7) + 69*alpha(Urb2) =E= 0 ;
     
      (LHS = 69, INFES = 69 ****)
     
Demand_satisfaction_ratio(Urb1,7)..  - Q(SR1,Urb1,7) - Q(GW1,Urb1,7)
     
      + Q(Urb1,J1,7) + Q(Urb1,GW1,7) + 50*alpha(Urb1) =E= 0 ;
     
      (LHS = 50, INFES = 50 ****)
     
Demand_satisfaction_ratio(Ag2,7)..  - Q(J2,Ag2,7) - Q(GW2,Ag2,7) + Q(Ag2,J3,7)
     
      + Q(Ag2,GW2,7) + 22*alpha(Ag2) =E= 0 ; (LHS = 22, INFES = 22 ****)
     
Demand_satisfaction_ratio(Ag1,7)..  - 0.95*Q(SR4,Ag1,7) - Q(GW2,Ag1,7)
     
      + Q(Ag1,J2,7) + Q(Ag1,GW2,7) + 29*alpha(Ag1) =E= 0 ;
     
      (LHS = 29, INFES = 29 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -5.00222085975111E-11, INFES = 5.00222085975111E-11 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 35
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,7)
        1       MaxFlow(Desal1,Urb2,7)
       -1       Demand_satisfaction_ratio(Urb2,7)

Q(WWTP1,J2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,7)
        1       MaxFlow(WWTP1,J2,7)
        1       Demand_satisfaction_ratio(WWTP1,7)
       -1       Demand_satisfaction_ratio(J2,7)

Q(WWTP1,Urb2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,7)
        1       MaxFlow(WWTP1,Urb2,7)
        1       Demand_satisfaction_ratio(WWTP1,7)
       -1       Demand_satisfaction_ratio(Urb2,7)

Q(Hp1,SR4,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,7)
        1       MaxFlow(Hp1,SR4,7)
        1       Demand_satisfaction_ratio(Hp1,7)
  8.775652E-12  (DJ ****)

Q(J1,SR2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,7)
        1       MaxFlow(J1,SR2,7)
        1       Demand_satisfaction_ratio(J1,7)
  3.503117E-12  (DJ ****)

Q(J2,J3,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,7)
        1       MaxFlow(J2,J3,7)
        1       Demand_satisfaction_ratio(J2,7)
       -0.9     Demand_satisfaction_ratio(J3,7)

Q(J2,Ag2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,7)
        1       MaxFlow(J2,Ag2,7)
        1       Demand_satisfaction_ratio(J2,7)
       -1       Demand_satisfaction_ratio(Ag2,7)

Q(J3,EndPt,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,7)
        1       MaxFlow(J3,EndPt,7)
        1       Demand_satisfaction_ratio(J3,7)
       -1       Demand_satisfaction_ratio(EndPt,7)

Q(SR2,SR4,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,7)
        1       MaxFlow(SR2,SR4,7)
  5.272535E-12  (DJ ****)

Q(SR3,Hp1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,7)
        1       MaxFlow(SR3,Hp1,7)
       -1       Demand_satisfaction_ratio(Hp1,7)

Q(SR1,J1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,7)
        1       MaxFlow(SR1,J1,7)
       -1       Demand_satisfaction_ratio(J1,7)

Q(SR1,Urb1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,7)
        1       MaxFlow(SR1,Urb1,7)
       -1       Demand_satisfaction_ratio(Urb1,7)

Q(GW1,Urb1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,7)
        1       MaxFlow(GW1,Urb1,7)
       -1       Demand_satisfaction_ratio(Urb1,7)

Q(SR4,J2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,7)
        1       MaxFlow(SR4,J2,7)
       -0.95    Demand_satisfaction_ratio(J2,7)

Q(SR4,Urb2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,7)
        1       MaxFlow(SR4,Urb2,7)
       -1       Demand_satisfaction_ratio(Urb2,7)

Q(SR4,Ag1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,7)
        1       MaxFlow(SR4,Ag1,7)
       -0.95    Demand_satisfaction_ratio(Ag1,7)

Q(GW2,Ag2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,7)
        1       MaxFlow(GW2,Ag2,7)
       -1       Demand_satisfaction_ratio(Ag2,7)

Q(GW2,Ag1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,7)
        1       MaxFlow(GW2,Ag1,7)
       -1       Demand_satisfaction_ratio(Ag1,7)

Q(Urb2,WWTP1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,7)
        1       MaxFlow(Urb2,WWTP1,7)
       -1       Demand_satisfaction_ratio(WWTP1,7)
        1       Demand_satisfaction_ratio(Urb2,7)

Q(Urb1,J1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,7)
        1       MaxFlow(Urb1,J1,7)
       -1       Demand_satisfaction_ratio(J1,7)
        1       Demand_satisfaction_ratio(Urb1,7)

Q(Urb1,GW1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,7)
        1       MaxFlow(Urb1,GW1,7)
        1       Demand_satisfaction_ratio(Urb1,7)

Q(Ag2,J3,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,7)
        1       MaxFlow(Ag2,J3,7)
       -1       Demand_satisfaction_ratio(J3,7)
        1       Demand_satisfaction_ratio(Ag2,7)

Q(Ag2,GW2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,7)
        1       MaxFlow(Ag2,GW2,7)
        1       Demand_satisfaction_ratio(Ag2,7)
  1.479992E-11  (DJ ****)

Q(Ag1,J2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,7)
        1       MaxFlow(Ag1,J2,7)
       -0.95    Demand_satisfaction_ratio(J2,7)
        1       Demand_satisfaction_ratio(Ag1,7)

Q(Ag1,GW2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,7)
        1       MaxFlow(Ag1,GW2,7)
        1       Demand_satisfaction_ratio(Ag1,7)
  1.479992E-11  (DJ ****)


---- S  storage volume in storage nodes

S(Desal1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,7)
        1       MinStor(Desal1,7)

S(SR2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,7)
        1       MinStor(SR2,7)

S(SR3,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,7)
        1       MinStor(SR3,7)

S(SR1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,7)
        1       MinStor(SR1,7)

S(GW1,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,7)
        1       MinStor(GW1,7)

S(SR4,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,7)
        1       MinStor(SR4,7)

S(GW2,7)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,7)
        1       MinStor(GW2,7)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.99999999995, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 0.999999999001366)
       14       Demand_satisfaction_ratio(EndPt,7)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 99.9999999993481)
       69       Demand_satisfaction_ratio(Urb2,7)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.9999999999274)
       50       Demand_satisfaction_ratio(Urb1,7)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 29.9999999995099)
       22       Demand_satisfaction_ratio(Ag2,7)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.9999999995766)
       29       Demand_satisfaction_ratio(Ag1,7)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,6)
                (.LO, .L, .UP, .M = 15706.984543465, 15706.984543465, 
15706.984543465, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,6)
                (.LO, .L, .UP, .M = 128.100832444981, 128.100832444981, 
128.100832444981, 0)
        1       MassBalance_storage(SR2)

storage(SR3,6)
                (.LO, .L, .UP, .M = 362.213726250377, 362.213726250377, 
362.213726250377, 0)
        1       MassBalance_storage(SR3)

storage(SR1,6)
                (.LO, .L, .UP, .M = 237.939031676317, 237.939031676317, 
237.939031676317, 0)
        1       MassBalance_storage(SR1)

storage(GW1,6)
                (.LO, .L, .UP, .M = 436.362959825557, 436.362959825557, 
436.362959825557, 0)
        1       MassBalance_storage(GW1)

storage(SR4,6)
                (.LO, .L, .UP, .M = 136.812443390685, 136.812443390685, 
136.812443390685, 0)
        1       MassBalance_storage(SR4)

storage(GW2,6)
                (.LO, .L, .UP, .M = 488.418448068413, 488.418448068413, 
488.418448068413, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 36
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   7


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.016 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 37
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 7

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.032      1000.000
 ITERATION COUNT, LIMIT        13         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 13

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999945135e+002  -2.7099999999945135e+002
Dual infeasibility......:  9.3845808901704686e-010   9.3845808901704686e-010
Constraint violation....:  2.8421709430404007e-014   2.8421709430404007e-014
Complementarity.........:  3.9446532678739497e-010   3.9446532678739497e-010
Overall NLP error.......:  9.3845808901704686e-010   9.3845808901704686e-010


Number of objective function evaluations             = 14
Number of objective gradient evaluations             = 14
Number of equality constraint evaluations            = 14
Number of inequality constraint evaluations          = 14
Number of equality constraint Jacobian evaluations   = 14
Number of inequality constraint Jacobian evaluations = 14
Number of Lagrangian Hessian evaluations             = 13
Total CPU secs in IPOPT (w/o function evaluations)   =      0.044
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1      .         .         .    -4.55E-15      
SR2         .         .         .    -1.25E-13      
SR3         .         .         .    -2.20E-13      
SR1         .         .         .    -8.42E-13      
GW1         .         .         .    -4.16E-13      
SR4         .         .         .    -7.15E-13      
GW2         .         .         .    -2.33E-13      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .7      .       44.720     +INF  -8.51E-13      
WWTP1 .J2   .7      .       14.294     +INF  -1.48E-12      
WWTP1 .Urb2 .7      .       24.872     +INF  -9.21E-13      
Hp1   .SR4  .7    50.000    66.450     +INF  -1.42E-12      
J1    .SR2  .7    10.000    45.841     +INF  -6.42E-13      
J2    .J3   .7    10.000    12.556     +INF  1.242E-11      
J2    .Ag2  .7      .       42.477     +INF  -5.54E-13      
J3    .EndPt.7    10.000    14.000     +INF  6.711E-12      
SR2   .SR4  .7    10.000    42.812     +INF  -7.63E-13      
SR3   .Hp1  .7    50.000    66.450     +INF  -1.42E-12      
SR1   .J1   .7    10.000    28.310     +INF  -1.25E-12      
SR1   .Urb1 .7      .       49.926     +INF  -5.88E-13      
GW1   .Urb1 .7      .       40.997     +INF  -7.04E-13      
SR4   .J2   .7    10.000    25.937     +INF  -1.54E-12      
SR4   .Urb2 .7      .       38.574     +INF  -8.92E-13      
SR4   .Ag1  .7      .       37.647     +INF  -6.69E-13      
GW2   .Ag2  .7      .       23.746     +INF  -1.14E-12      
GW2   .Ag1  .7      .       36.396     +INF  -7.55E-13      
Urb2  .WWTP1.7      .       39.166     +INF  -5.79E-13      
Urb1  .J1   .7      .       17.531     +INF  -1.26E-12      
Urb1  .GW1  .7      .       23.392     +INF  -8.58E-13      
Ag2   .J3   .7      .        2.700     +INF  5.049E-12      
Ag2   .GW2  .7      .       41.523     +INF  -4.96E-13      
Ag1   .J2   .7      .       16.947     +INF  -1.46E-12      
Ag1   .GW2  .7      .       26.213     +INF  -7.16E-13      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .7     -INF     44.720    80.000 1.462E-12      
WWTP1 .J2   .7     -INF     14.294    80.000 8.539E-13      
WWTP1 .Urb2 .7     -INF     24.872    80.000 1.284E-12      
Hp1   .SR4  .7     -INF     66.450   100.000 2.196E-12      
J1    .SR2  .7     -INF     45.841   100.000 1.917E-12      
J2    .J3   .7     -INF     12.556   200.000 2.337E-13      
J2    .Ag2  .7     -INF     42.477   100.000 1.902E-12      
J3    .EndPt.7     -INF     14.000   350.000 1.320E-13      
SR2   .SR4  .7     -INF     42.812   100.000 1.835E-12      
SR3   .Hp1  .7     -INF     66.450   100.000 2.196E-12      
SR1   .J1   .7     -INF     28.310   100.000 7.758E-13      
SR1   .Urb1 .7     -INF     49.926   100.000 1.600E-12      
GW1   .Urb1 .7     -INF     40.997    80.000 2.259E-12      
SR4   .J2   .7     -INF     25.937   200.000 2.658E-13      
SR4   .Urb2 .7     -INF     38.574   100.000 8.330E-13      
SR4   .Ag1  .7     -INF     37.647   100.000 1.213E-12      
GW2   .Ag2  .7     -INF     23.746    80.000 1.049E-12      
GW2   .Ag1  .7     -INF     36.396    80.000 1.898E-12      
Urb2  .WWTP1.7     -INF     39.166   100.000 1.715E-12      
Urb1  .J1   .7     -INF     17.531   100.000 6.538E-13      
Urb1  .GW1  .7     -INF     23.392   100.000 8.643E-13      
Ag2   .J3   .7     -INF      2.700   100.000 4.794E-13      
Ag2   .GW2  .7     -INF     41.523   100.000 2.216E-12      
Ag1   .J2   .7     -INF     16.947   100.000 6.131E-13      
Ag1   .GW2  .7     -INF     26.213   100.000 1.044E-12      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.7     -INF  15662.265 1.0000E+5 7.971E-17      
SR2   .7     -INF    131.130   200.000 6.028E-13      
SR3   .7     -INF    295.764   700.000 1.023E-13      
SR1   .7     -INF    159.703   500.000 1.129E-13      
GW1   .7     -INF    418.758  2000.000 2.687E-14      
SR4   .7     -INF    143.917   600.000 9.381E-14      
GW2   .7     -INF    496.014  2000.000 2.897E-14      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.7    10.000 15662.265     +INF  -2.32E-15      
SR2   .7    20.000   131.130     +INF  -3.94E-13      
SR3   .7    30.000   295.764     +INF  -1.70E-13      
SR1   .7    50.000   159.703     +INF  -6.00E-13      
GW1   .7   300.000   418.758     +INF  -3.42E-13      
SR4   .7    60.000   143.917     +INF  -5.11E-13      
GW2   .7   300.000   496.014     +INF  -1.82E-13      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.7      .         .         .    3.209E-13      
Hp1  .7      .         .         .    4.674E-13      
J1   .7      .         .         .    -6.05E-13      
J2   .7      .         .         .    -1.79E-12      
J3   .7      .         .         .    9.586E-12      
EndPt.7      .         .         .    1.514E-11      
Urb2 .7      .         .         .    -2.37E-13      
Urb1 .7      .         .         .    1.267E-12      
Ag2  .7      .         .         .    -9.92E-13      
Ag1  .7      .         .         .    6.208E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .7      .       44.720     +INF  -2.55E-12      
WWTP1 .J2   .7      .       14.294     +INF  -4.62E-12      
WWTP1 .Urb2 .7      .       24.872     +INF  -2.70E-12      
Hp1   .SR4  .7      .       66.450     +INF  -1.59E-12      
J1    .SR2  .7      .       45.841     +INF  -1.61E-12      
J2    .J3   .7      .       12.556     +INF  -8.92E-12      
J2    .Ag2  .7      .       42.477     +INF  -1.60E-12      
J3    .EndPt.7      .       14.000     +INF  -6.82E-12      
SR2   .SR4  .7      .       42.812     +INF  -1.35E-12      
SR3   .Hp1  .7      .       66.450     +INF  -1.59E-12      
SR1   .J1   .7      .       28.310     +INF  -2.88E-12      
SR1   .Urb1 .7      .       49.926     +INF  -1.75E-12      
GW1   .Urb1 .7      .       40.997     +INF  -2.09E-12      
SR4   .J2   .7      .       25.937     +INF  -3.53E-12      
SR4   .Urb2 .7      .       38.574     +INF  -2.67E-12      
SR4   .Ag1  .7      .       37.647     +INF  -2.01E-12      
GW2   .Ag2  .7      .       23.746     +INF  -3.57E-12      
GW2   .Ag1  .7      .       36.396     +INF  -2.27E-12      
Urb2  .WWTP1.7      .       39.166     +INF  -1.75E-12      
Urb1  .J1   .7      .       17.531     +INF  -3.74E-12      
Urb1  .GW1  .7      .       23.392     +INF  -2.55E-12      
Ag2   .J3   .7      .        2.700     +INF  -1.80E-11      
Ag2   .GW2  .7      .       41.523     +INF  -1.35E-12      
Ag1   .J2   .7      .       16.947     +INF  -4.60E-12      
Ag1   .GW2  .7      .       26.213     +INF  -2.09E-12      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.7      .    15662.265     +INF  -8.16E-15      
SR2   .7      .      131.130     +INF  -9.93E-13      
SR3   .7      .      295.764     +INF  -4.53E-13      
SR1   .7      .      159.703     +INF  -1.06E-12      
GW1   .7      .      418.758     +INF  -3.00E-13      
SR4   .7      .      143.917     +INF  -8.77E-13      
GW2   .7      .      496.014     +INF  -2.37E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.6 15706.985 15706.985 15706.985      EPS       
SR2   .6   128.101   128.101   128.101      EPS       
SR3   .6   362.214   362.214   362.214      EPS       
SR1   .6   237.939   237.939   237.939      EPS       
GW1   .6   436.363   436.363   436.363      EPS       
SR4   .6   136.812   136.812   136.812      EPS       
GW2   .6   488.418   488.418   488.418      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 38
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000,    4 271.000,    5 271.000,    6 271.000
7 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418

     +           7

Desal1   15662.265
SR2        131.130
SR3        295.764
SR1        159.703
GW1        418.758
SR4        143.917
GW2        496.014


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418

     +           7

Desal1   15662.265
SR2        131.130
SR3        295.764
SR1        159.703
GW1        418.758
SR4        143.917
GW2        496.014


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3           4           5

Desal1.Urb2       31.049      80.000      51.458      45.174      41.516
WWTP1 .J2         14.054                  25.928      14.473      17.125
WWTP1 .Urb2       34.518      56.457      38.327      23.135      27.088
Hp1   .SR4        77.253     100.000      79.583      64.826      64.542
J1    .SR2        48.846      61.072      67.713      44.057      49.211
J2    .J3         12.260      10.000      12.671      12.538      12.701
J2    .Ag2        56.632      67.029      64.515      40.084      57.224
J3    .EndPt      15.000      10.000      14.000      15.000      15.000
SR2   .SR4        72.314     100.000      76.878      43.356      50.243
SR3   .Hp1        77.253     100.000      79.583      64.826      64.542
SR1   .J1         31.125      61.072      38.459      27.665      31.412
SR1   .Urb1       63.872     100.000      62.054      43.860      49.626
GW1   .Urb1       55.692      80.000      54.276      38.335      39.399
SR4   .J2         36.506      81.083      31.717      24.550      33.079
SR4   .Urb2       73.005     100.000      34.470      31.299      37.609
SR4   .Ag1        48.973     100.000      51.143      34.936      39.383
GW2   .Ag2        45.197      80.000      34.373      23.312      36.120
GW2   .Ag1        56.247      80.000      55.678      32.939      39.619
Urb2  .WWTP1      48.572      56.457      64.256      37.607      44.213
Urb1  .J1         17.721                  29.253      16.392      17.799
Urb1  .GW1        26.843                  43.076      21.803      25.226
Ag2   .J3          3.966       1.000       2.596       3.716       3.569
Ag2   .GW2        37.863                  75.293      38.681      67.775
Ag1   .J2         21.218                  22.239      15.608      22.499
Ag1   .GW2        26.553                  55.026      23.521      27.533

           +           6           7

Desal1.Urb2       43.818      44.720
WWTP1 .J2         18.429      14.294
WWTP1 .Urb2       31.164      24.872
Hp1   .SR4        71.582      66.450
J1    .SR2        56.799      45.841
J2    .J3         12.757      12.556
J2    .Ag2        53.924      42.477
J3    .EndPt      15.000      14.000
SR2   .SR4        56.805      42.812
SR3   .Hp1        71.582      66.450
SR1   .J1         35.397      28.310
SR1   .Urb1       57.518      49.926
GW1   .Urb1       44.870      40.997
SR4   .J2         30.008      25.937
SR4   .Urb2       39.611      38.574
SR4   .Ag1        43.199      37.647
GW2   .Ag2        27.134      23.746
GW2   .Ag1        42.572      36.396
Urb2  .WWTP1      49.593      39.166
Urb1  .J1         21.402      17.531
Urb1  .GW1        31.985      23.392
Ag2   .J3          3.519       2.700
Ag2   .GW2        55.539      41.523
Ag1   .J2         20.784      16.947
Ag1   .GW2        33.828      26.213


----    479 SET dv  

8

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 39
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,8) - S(Desal1,8)
     
      + storage(Desal1,7) =E= 0 ;
     
      (LHS = 15662.2649904205, INFES = 15662.2649904205 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,8) - Q(SR2,SR4,8) - S(SR2,8)
     
      + storage(SR2,7) =E= 0 ;
     
      (LHS = 131.12989592912, INFES = 131.12989592912 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,8) - S(SR3,8) + storage(SR3,7) =E= 0 ;
     
      (LHS = 295.76374910336, INFES = 295.76374910336 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,8) - Q(SR1,Urb1,8) - S(SR1,8)
     
      + storage(SR1,7) =E= 0 ;
     
      (LHS = 159.703002791259, INFES = 159.703002791259 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,8) + Q(Urb1,GW1,8) - S(GW1,8)
     
      + storage(GW1,7) =E= 0 ;
     
      (LHS = 418.75758224369, INFES = 418.75758224369 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,8) + Q(SR2,SR4,8) - Q(SR4,J2,8)
     
      - Q(SR4,Urb2,8) - Q(SR4,Ag1,8) - S(SR4,8) + storage(SR4,7) =E= 0 ;
     
      (LHS = 143.916915587377, INFES = 143.916915587377 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,8) - Q(GW2,Ag1,8) + Q(Ag2,GW2,8)
     
      + Q(Ag1,GW2,8) - S(GW2,8) + storage(GW2,7) =E= 0 ;
     
      (LHS = 496.013747219622, INFES = 496.013747219622 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,8)..  Q(Desal1,Urb2,8) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,8)..  Q(WWTP1,J2,8) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,8)..  Q(WWTP1,Urb2,8) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,8)..  Q(Hp1,SR4,8) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,8)..  Q(J1,SR2,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,8)..  Q(J2,J3,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,8)..  Q(J2,Ag2,8) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,8)..  Q(J3,EndPt,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,8)..  Q(SR2,SR4,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,8)..  Q(SR3,Hp1,8) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,8)..  Q(SR1,J1,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,8)..  Q(SR1,Urb1,8) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,8)..  Q(GW1,Urb1,8) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,8)..  Q(SR4,J2,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,8)..  Q(SR4,Urb2,8) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,8)..  Q(SR4,Ag1,8) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,8)..  Q(GW2,Ag2,8) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,8)..  Q(GW2,Ag1,8) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,8)..  Q(Urb2,WWTP1,8) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,8)..  Q(Urb1,J1,8) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,8)..  Q(Urb1,GW1,8) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,8)..  Q(Ag2,J3,8) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,8)..  Q(Ag2,GW2,8) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,8)..  Q(Ag1,J2,8) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,8)..  Q(Ag1,GW2,8) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,8)..  Q(Desal1,Urb2,8) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,8)..  Q(WWTP1,J2,8) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,8)..  Q(WWTP1,Urb2,8) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,8)..  Q(Hp1,SR4,8) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,8)..  Q(J1,SR2,8) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,8)..  Q(J2,J3,8) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,8)..  Q(J2,Ag2,8) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,8)..  Q(J3,EndPt,8) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,8)..  Q(SR2,SR4,8) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,8)..  Q(SR3,Hp1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,8)..  Q(SR1,J1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,8)..  Q(SR1,Urb1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,8)..  Q(GW1,Urb1,8) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,8)..  Q(SR4,J2,8) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,8)..  Q(SR4,Urb2,8) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,8)..  Q(SR4,Ag1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,8)..  Q(GW2,Ag2,8) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,8)..  Q(GW2,Ag1,8) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,8)..  Q(Urb2,WWTP1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,8)..  Q(Urb1,J1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,8)..  Q(Urb1,GW1,8) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,8)..  Q(Ag2,J3,8) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,8)..  Q(Ag2,GW2,8) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,8)..  Q(Ag1,J2,8) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,8)..  Q(Ag1,GW2,8) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,8)..  S(Desal1,8) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,8)..  S(SR2,8) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,8)..  S(SR3,8) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,8)..  S(SR1,8) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,8)..  S(GW1,8) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,8)..  S(SR4,8) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,8)..  S(GW2,8) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,8)..  S(Desal1,8) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,8)..  S(SR2,8) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,8)..  S(SR3,8) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,8)..  S(SR1,8) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,8)..  S(GW1,8) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,8)..  S(SR4,8) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,8)..  S(GW2,8) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,8)..  Q(WWTP1,J2,8) + Q(WWTP1,Urb2,8)
     
      - Q(Urb2,WWTP1,8) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,8)..  Q(Hp1,SR4,8) - Q(SR3,Hp1,8) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,8)..  Q(J1,SR2,8) - Q(SR1,J1,8) - Q(Urb1,J1,8) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,8)..  - Q(WWTP1,J2,8) + Q(J2,J3,8) + Q(J2,Ag2,8)
     
      - 0.95*Q(SR4,J2,8) - 0.95*Q(Ag1,J2,8) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,8)..  - 0.9*Q(J2,J3,8) + Q(J3,EndPt,8)
     
      - Q(Ag2,J3,8) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,8)..  - Q(J3,EndPt,8) + 15*alpha(EndPt) =E= 0 ;
     
      (LHS = 15, INFES = 15 ****)
     
Demand_satisfaction_ratio(Urb2,8)..  - Q(Desal1,Urb2,8) - Q(WWTP1,Urb2,8)
     
      - Q(SR4,Urb2,8) + Q(Urb2,WWTP1,8) + 69*alpha(Urb2) =E= 0 ;
     
      (LHS = 69, INFES = 69 ****)
     
Demand_satisfaction_ratio(Urb1,8)..  - Q(SR1,Urb1,8) - Q(GW1,Urb1,8)
     
      + Q(Urb1,J1,8) + Q(Urb1,GW1,8) + 50*alpha(Urb1) =E= 0 ;
     
      (LHS = 50, INFES = 50 ****)
     
Demand_satisfaction_ratio(Ag2,8)..  - Q(J2,Ag2,8) - Q(GW2,Ag2,8) + Q(Ag2,J3,8)
     
      + Q(Ag2,GW2,8) + 22*alpha(Ag2) =E= 0 ; (LHS = 22, INFES = 22 ****)
     
Demand_satisfaction_ratio(Ag1,8)..  - 0.95*Q(SR4,Ag1,8) - Q(GW2,Ag1,8)
     
      + Q(Ag1,J2,8) + Q(Ag1,GW2,8) + 29*alpha(Ag1) =E= 0 ;
     
      (LHS = 29, INFES = 29 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -5.48652678844519E-10, INFES = 5.48652678844519E-10 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 40
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,8)
        1       MaxFlow(Desal1,Urb2,8)
       -1       Demand_satisfaction_ratio(Urb2,8)

Q(WWTP1,J2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,8)
        1       MaxFlow(WWTP1,J2,8)
        1       Demand_satisfaction_ratio(WWTP1,8)
       -1       Demand_satisfaction_ratio(J2,8)

Q(WWTP1,Urb2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,8)
        1       MaxFlow(WWTP1,Urb2,8)
        1       Demand_satisfaction_ratio(WWTP1,8)
       -1       Demand_satisfaction_ratio(Urb2,8)

Q(Hp1,SR4,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,8)
        1       MaxFlow(Hp1,SR4,8)
        1       Demand_satisfaction_ratio(Hp1,8)

Q(J1,SR2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,8)
        1       MaxFlow(J1,SR2,8)
        1       Demand_satisfaction_ratio(J1,8)

Q(J2,J3,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,8)
        1       MaxFlow(J2,J3,8)
        1       Demand_satisfaction_ratio(J2,8)
       -0.9     Demand_satisfaction_ratio(J3,8)

Q(J2,Ag2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,8)
        1       MaxFlow(J2,Ag2,8)
        1       Demand_satisfaction_ratio(J2,8)
       -1       Demand_satisfaction_ratio(Ag2,8)

Q(J3,EndPt,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,8)
        1       MaxFlow(J3,EndPt,8)
        1       Demand_satisfaction_ratio(J3,8)
       -1       Demand_satisfaction_ratio(EndPt,8)

Q(SR2,SR4,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,8)
        1       MaxFlow(SR2,SR4,8)

Q(SR3,Hp1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,8)
        1       MaxFlow(SR3,Hp1,8)
       -1       Demand_satisfaction_ratio(Hp1,8)

Q(SR1,J1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,8)
        1       MaxFlow(SR1,J1,8)
       -1       Demand_satisfaction_ratio(J1,8)

Q(SR1,Urb1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,8)
        1       MaxFlow(SR1,Urb1,8)
       -1       Demand_satisfaction_ratio(Urb1,8)

Q(GW1,Urb1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,8)
        1       MaxFlow(GW1,Urb1,8)
       -1       Demand_satisfaction_ratio(Urb1,8)

Q(SR4,J2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,8)
        1       MaxFlow(SR4,J2,8)
       -0.95    Demand_satisfaction_ratio(J2,8)

Q(SR4,Urb2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,8)
        1       MaxFlow(SR4,Urb2,8)
       -1       Demand_satisfaction_ratio(Urb2,8)

Q(SR4,Ag1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,8)
        1       MaxFlow(SR4,Ag1,8)
       -0.95    Demand_satisfaction_ratio(Ag1,8)

Q(GW2,Ag2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,8)
        1       MaxFlow(GW2,Ag2,8)
       -1       Demand_satisfaction_ratio(Ag2,8)

Q(GW2,Ag1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,8)
        1       MaxFlow(GW2,Ag1,8)
       -1       Demand_satisfaction_ratio(Ag1,8)

Q(Urb2,WWTP1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,8)
        1       MaxFlow(Urb2,WWTP1,8)
       -1       Demand_satisfaction_ratio(WWTP1,8)
        1       Demand_satisfaction_ratio(Urb2,8)

Q(Urb1,J1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,8)
        1       MaxFlow(Urb1,J1,8)
       -1       Demand_satisfaction_ratio(J1,8)
        1       Demand_satisfaction_ratio(Urb1,8)

Q(Urb1,GW1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,8)
        1       MaxFlow(Urb1,GW1,8)
        1       Demand_satisfaction_ratio(Urb1,8)

Q(Ag2,J3,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,8)
        1       MaxFlow(Ag2,J3,8)
       -1       Demand_satisfaction_ratio(J3,8)
        1       Demand_satisfaction_ratio(Ag2,8)

Q(Ag2,GW2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,8)
        1       MaxFlow(Ag2,GW2,8)
        1       Demand_satisfaction_ratio(Ag2,8)

Q(Ag1,J2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,8)
        1       MaxFlow(Ag1,J2,8)
       -0.95    Demand_satisfaction_ratio(J2,8)
        1       Demand_satisfaction_ratio(Ag1,8)

Q(Ag1,GW2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,8)
        1       MaxFlow(Ag1,GW2,8)
        1       Demand_satisfaction_ratio(Ag1,8)


---- S  storage volume in storage nodes

S(Desal1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,8)
        1       MinStor(Desal1,8)

S(SR2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,8)
        1       MinStor(SR2,8)

S(SR3,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,8)
        1       MinStor(SR3,8)

S(SR1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,8)
        1       MinStor(SR1,8)

S(GW1,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,8)
        1       MinStor(GW1,8)

S(SR4,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,8)
        1       MinStor(SR4,8)

S(GW2,8)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,8)
        1       MinStor(GW2,8)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.999999999451, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 1.0000000007265)
       15       Demand_satisfaction_ratio(EndPt,8)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 100.000000000054)
       69       Demand_satisfaction_ratio(Urb2,8)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.9999999998122)
       50       Demand_satisfaction_ratio(Urb1,8)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 30.000000000074)
       22       Demand_satisfaction_ratio(Ag2,8)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.9999999999491)
       29       Demand_satisfaction_ratio(Ag1,8)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,7)
                (.LO, .L, .UP, .M = 15662.2649904205, 15662.2649904205, 
15662.2649904205, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,7)
                (.LO, .L, .UP, .M = 131.12989592912, 131.12989592912, 
131.12989592912, 0)
        1       MassBalance_storage(SR2)

storage(SR3,7)
                (.LO, .L, .UP, .M = 295.76374910336, 295.76374910336, 
295.76374910336, 0)
        1       MassBalance_storage(SR3)

storage(SR1,7)
                (.LO, .L, .UP, .M = 159.703002791259, 159.703002791259, 
159.703002791259, 0)
        1       MassBalance_storage(SR1)

storage(GW1,7)
                (.LO, .L, .UP, .M = 418.75758224369, 418.75758224369, 
418.75758224369, 0)
        1       MassBalance_storage(GW1)

storage(SR4,7)
                (.LO, .L, .UP, .M = 143.916915587377, 143.916915587377, 
143.916915587377, 0)
        1       MassBalance_storage(SR4)

storage(GW2,7)
                (.LO, .L, .UP, .M = 496.013747219622, 496.013747219622, 
496.013747219622, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 41
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   8


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 42
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 8

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              271.0000

 RESOURCE USAGE, LIMIT          0.030      1000.000
 ITERATION COUNT, LIMIT        13         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 13

                                   (scaled)                 (unscaled)
Objective...............: -2.7099999999990689e+002  -2.7099999999990689e+002
Dual infeasibility......:  3.7821079601485508e-011   3.7821079601485508e-011
Constraint violation....:  1.8189894035458565e-012   1.8189894035458565e-012
Complementarity.........:  6.8315579657650983e-011   6.8315579657650983e-011
Overall NLP error.......:  6.8315579657650983e-011   6.8315579657650983e-011


Number of objective function evaluations             = 14
Number of objective gradient evaluations             = 14
Number of equality constraint evaluations            = 14
Number of inequality constraint evaluations          = 14
Number of equality constraint Jacobian evaluations   = 14
Number of inequality constraint Jacobian evaluations = 14
Number of Lagrangian Hessian evaluations             = 13
Total CPU secs in IPOPT (w/o function evaluations)   =      0.040
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1      .         .         .    -1.17E-15      
SR2         .         .         .    -5.66E-14      
SR3         .         .         .    -8.76E-14      
SR1         .         .         .    -6.77E-13      
GW1         .         .         .    -1.42E-13      
SR4         .         .         .    -1.81E-13      
GW2         .         .         .    -5.94E-14      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .8      .       44.212     +INF  -2.16E-13      
WWTP1 .J2   .8      .       14.458     +INF  -3.71E-13      
WWTP1 .Urb2 .8      .       25.179     +INF  -2.38E-13      
Hp1   .SR4  .8    50.000    66.888     +INF  -3.68E-13      
J1    .SR2  .8    10.000    42.642     +INF  -1.92E-13      
J2    .J3   .8    10.000    13.381     +INF  -1.68E-12      
J2    .Ag2  .8      .       42.698     +INF  -1.47E-13      
J3    .EndPt.8    10.000    15.000     +INF  -6.33E-13      
SR2   .SR4  .8    10.000    42.958     +INF  -2.10E-13      
SR3   .Hp1  .8    50.000    66.888     +INF  -3.68E-13      
SR1   .J1   .8    10.000    25.485     +INF  -4.58E-13      
SR1   .Urb1 .8      .       42.935     +INF  -1.96E-13      
GW1   .Urb1 .8      .       44.837     +INF  -1.69E-13      
SR4   .J2   .8    10.000    26.498     +INF  -3.73E-13      
SR4   .Urb2 .8      .       39.247     +INF  -2.24E-13      
SR4   .Ag1  .8      .       38.235     +INF  -1.71E-13      
GW2   .Ag2  .8      .       24.228     +INF  -2.89E-13      
GW2   .Ag1  .8      .       36.738     +INF  -1.94E-13      
Urb2  .WWTP1.8      .       39.637     +INF  -1.49E-13      
Urb1  .J1   .8      .       17.157     +INF  -3.23E-13      
Urb1  .GW1  .8      .       20.615     +INF  -2.89E-13      
Ag2   .J3   .8      .        2.957     +INF  -1.41E-12      
Ag2   .GW2  .8      .       41.970     +INF  -1.18E-13      
Ag1   .J2   .8      .       17.314     +INF  -3.61E-13      
Ag1   .GW2  .8      .       26.748     +INF  -1.84E-13      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .8     -INF     44.212    80.000 3.806E-13      
WWTP1 .J2   .8     -INF     14.458    80.000 2.246E-13      
WWTP1 .Urb2 .8     -INF     25.179    80.000 3.250E-13      
Hp1   .SR4  .8     -INF     66.888   100.000 5.517E-13      
J1    .SR2  .8     -INF     42.642   100.000 3.479E-13      
J2    .J3   .8     -INF     13.381   200.000 6.231E-14      
J2    .Ag2  .8     -INF     42.698   100.000 4.783E-13      
J3    .EndPt.8     -INF     15.000   350.000 3.498E-14      
SR2   .SR4  .8     -INF     42.958   100.000 4.512E-13      
SR3   .Hp1  .8     -INF     66.888   100.000 5.517E-13      
SR1   .J1   .8     -INF     25.485   100.000 1.674E-13      
SR1   .Urb1 .8     -INF     42.935   100.000 2.560E-13      
GW1   .Urb1 .8     -INF     44.837    80.000 7.381E-13      
SR4   .J2   .8     -INF     26.498   200.000 6.942E-14      
SR4   .Urb2 .8     -INF     39.247   100.000 2.173E-13      
SR4   .Ag1  .8     -INF     38.235   100.000 3.170E-13      
GW2   .Ag2  .8     -INF     24.228    80.000 2.837E-13      
GW2   .Ag1  .8     -INF     36.738    80.000 4.923E-13      
Urb2  .WWTP1.8     -INF     39.637   100.000 4.482E-13      
Urb1  .J1   .8     -INF     17.157   100.000 1.667E-13      
Urb1  .GW1  .8     -INF     20.615   100.000 1.793E-13      
Ag2   .J3   .8     -INF      2.957   100.000 1.288E-13      
Ag2   .GW2  .8     -INF     41.970   100.000 5.287E-13      
Ag1   .J2   .8     -INF     17.314   100.000 1.612E-13      
Ag1   .GW2  .8     -INF     26.748   100.000 2.638E-13      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.8     -INF  15618.053 1.0000E+5 2.036E-17      
SR2   .8     -INF    130.814   200.000 1.408E-13      
SR3   .8     -INF    228.876   700.000 2.263E-14      
SR1   .8     -INF     91.283   500.000 2.547E-14      
GW1   .8     -INF    394.535  2000.000 6.738E-15      
SR4   .8     -INF    149.784   600.000 2.412E-14      
GW2   .8     -INF    503.765  2000.000 7.429E-15      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.8    10.000 15618.053     +INF  -5.96E-16      
SR2   .8    20.000   130.814     +INF  -1.07E-13      
SR3   .8    30.000   228.876     +INF  -5.92E-14      
SR1   .8    50.000    91.283     +INF  -5.43E-13      
GW1   .8   300.000   394.535     +INF  -1.20E-13      
SR4   .8    60.000   149.784     +INF  -1.29E-13      
GW2   .8   300.000   503.765     +INF  -4.65E-14      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.8      .         .         .    9.970E-14      
Hp1  .8      .         .         .    1.341E-13      
J1   .8      .         .         .    6.291E-14      
J2   .8      .         .         .    -4.18E-13      
J3   .8      .         .         .    -2.92E-12      
EndPt.8      .         .         .    -4.06E-12      
Urb2 .8      .         .         .    -5.10E-14      
Urb1 .8      .         .         .    5.414E-13      
Ag2  .8      .         .         .    -2.34E-13      
Ag1  .8      .         .         .    1.646E-13      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .8      .       44.212     +INF  -4.84E-13      
WWTP1 .J2   .8      .       14.458     +INF  -8.02E-13      
WWTP1 .Urb2 .8      .       25.179     +INF  -5.45E-13      
Hp1   .SR4  .8      .       66.888     +INF  -3.09E-13      
J1    .SR2  .8      .       42.642     +INF  -3.66E-13      
J2    .J3   .8      .       13.381     +INF  -9.32E-13      
J2    .Ag2  .8      .       42.698     +INF  -3.17E-13      
J3    .EndPt.8      .       15.000     +INF  -6.84E-13      
SR2   .SR4  .8      .       42.958     +INF  -3.49E-13      
SR3   .Hp1  .8      .       66.888     +INF  -3.09E-13      
SR1   .J1   .8      .       25.485     +INF  -7.28E-13      
SR1   .Urb1 .8      .       42.935     +INF  -4.36E-13      
GW1   .Urb1 .8      .       44.837     +INF  -3.75E-13      
SR4   .J2   .8      .       26.498     +INF  -5.89E-13      
SR4   .Urb2 .8      .       39.247     +INF  -5.04E-13      
SR4   .Ag1  .8      .       38.235     +INF  -3.80E-13      
GW2   .Ag2  .8      .       24.228     +INF  -5.92E-13      
GW2   .Ag1  .8      .       36.738     +INF  -4.28E-13      
Urb2  .WWTP1.8      .       39.637     +INF  -3.21E-13      
Urb1  .J1   .8      .       17.157     +INF  -7.38E-13      
Urb1  .GW1  .8      .       20.615     +INF  -6.52E-13      
Ag2   .J3   .8      .        2.957     +INF  -2.27E-12      
Ag2   .GW2  .8      .       41.970     +INF  -3.22E-13      
Ag1   .J2   .8      .       17.314     +INF  -7.79E-13      
Ag1   .GW2  .8      .       26.748     +INF  -4.23E-13      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.8      .    15618.053     +INF  -1.59E-15      
SR2   .8      .      130.814     +INF  -2.00E-13      
SR3   .8      .      228.876     +INF  -1.15E-13      
SR1   .8      .       91.283     +INF  -3.61E-13      
GW1   .8      .      394.535     +INF  -6.33E-14      
SR4   .8      .      149.784     +INF  -1.72E-13      
GW2   .8      .      503.765     +INF  -4.61E-14      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    271.000     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        1.000     1.000     1.000      
Urb2       .        1.000     1.000   100.000      
Urb1       .        1.000     1.000    90.000      
Ag2        .        1.000     1.000    30.000      
Ag1        .        1.000     1.000    50.000      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.7 15662.265 15662.265 15662.265      EPS       
SR2   .7   131.130   131.130   131.130      EPS       
SR3   .7   295.764   295.764   295.764      EPS       
SR1   .7   159.703   159.703   159.703      EPS       
GW1   .7   418.758   418.758   418.758      EPS       
SR4   .7   143.917   143.917   143.917      EPS       
GW2   .7   496.014   496.014   496.014      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 43
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      271.000  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000,    4 271.000,    5 271.000,    6 271.000
7 271.000,    8 271.000


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418

     +           7           8

Desal1   15662.265   15618.053
SR2        131.130     130.814
SR3        295.764     228.876
SR1        159.703      91.283
GW1        418.758     394.535
SR4        143.917     149.784
GW2        496.014     503.765


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418

     +           7           8

Desal1   15662.265   15618.053
SR2        131.130     130.814
SR3        295.764     228.876
SR1        159.703      91.283
GW1        418.758     394.535
SR4        143.917     149.784
GW2        496.014     503.765


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3           4           5

Desal1.Urb2       31.049      80.000      51.458      45.174      41.516
WWTP1 .J2         14.054                  25.928      14.473      17.125
WWTP1 .Urb2       34.518      56.457      38.327      23.135      27.088
Hp1   .SR4        77.253     100.000      79.583      64.826      64.542
J1    .SR2        48.846      61.072      67.713      44.057      49.211
J2    .J3         12.260      10.000      12.671      12.538      12.701
J2    .Ag2        56.632      67.029      64.515      40.084      57.224
J3    .EndPt      15.000      10.000      14.000      15.000      15.000
SR2   .SR4        72.314     100.000      76.878      43.356      50.243
SR3   .Hp1        77.253     100.000      79.583      64.826      64.542
SR1   .J1         31.125      61.072      38.459      27.665      31.412
SR1   .Urb1       63.872     100.000      62.054      43.860      49.626
GW1   .Urb1       55.692      80.000      54.276      38.335      39.399
SR4   .J2         36.506      81.083      31.717      24.550      33.079
SR4   .Urb2       73.005     100.000      34.470      31.299      37.609
SR4   .Ag1        48.973     100.000      51.143      34.936      39.383
GW2   .Ag2        45.197      80.000      34.373      23.312      36.120
GW2   .Ag1        56.247      80.000      55.678      32.939      39.619
Urb2  .WWTP1      48.572      56.457      64.256      37.607      44.213
Urb1  .J1         17.721                  29.253      16.392      17.799
Urb1  .GW1        26.843                  43.076      21.803      25.226
Ag2   .J3          3.966       1.000       2.596       3.716       3.569
Ag2   .GW2        37.863                  75.293      38.681      67.775
Ag1   .J2         21.218                  22.239      15.608      22.499
Ag1   .GW2        26.553                  55.026      23.521      27.533

           +           6           7           8

Desal1.Urb2       43.818      44.720      44.212
WWTP1 .J2         18.429      14.294      14.458
WWTP1 .Urb2       31.164      24.872      25.179
Hp1   .SR4        71.582      66.450      66.888
J1    .SR2        56.799      45.841      42.642
J2    .J3         12.757      12.556      13.381
J2    .Ag2        53.924      42.477      42.698
J3    .EndPt      15.000      14.000      15.000
SR2   .SR4        56.805      42.812      42.958
SR3   .Hp1        71.582      66.450      66.888
SR1   .J1         35.397      28.310      25.485
SR1   .Urb1       57.518      49.926      42.935
GW1   .Urb1       44.870      40.997      44.837
SR4   .J2         30.008      25.937      26.498
SR4   .Urb2       39.611      38.574      39.247
SR4   .Ag1        43.199      37.647      38.235
GW2   .Ag2        27.134      23.746      24.228
GW2   .Ag1        42.572      36.396      36.738
Urb2  .WWTP1      49.593      39.166      39.637
Urb1  .J1         21.402      17.531      17.157
Urb1  .GW1        31.985      23.392      20.615
Ag2   .J3          3.519       2.700       2.957
Ag2   .GW2        55.539      41.523      41.970
Ag1   .J2         20.784      16.947      17.314
Ag1   .GW2        33.828      26.213      26.748


----    479 SET dv  

9

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 44
Demo3.gms
Equation Listing    SOLVE Demo3 Using LP From line 480


---- MassBalance_storage  =E=  

MassBalance_storage(Desal1)..  - Q(Desal1,Urb2,9) - S(Desal1,9)
     
      + storage(Desal1,8) =E= 0 ;
     
      (LHS = 15618.05330077, INFES = 15618.05330077 ****)
     
MassBalance_storage(SR2)..  Q(J1,SR2,9) - Q(SR2,SR4,9) - S(SR2,9)
     
      + storage(SR2,8) =E= 0 ;
     
      (LHS = 130.813756336691, INFES = 130.813756336691 ****)
     
MassBalance_storage(SR3)..  - Q(SR3,Hp1,9) - S(SR3,9) + storage(SR3,8) =E= 0 ;
     
      (LHS = 228.87563353066, INFES = 228.87563353066 ****)
     
MassBalance_storage(SR1)..  - Q(SR1,J1,9) - Q(SR1,Urb1,9) - S(SR1,9)
     
      + storage(SR1,8) =E= 0 ;
     
      (LHS = 91.2829561308916, INFES = 91.2829561308916 ****)
     
MassBalance_storage(GW1)..  - Q(GW1,Urb1,9) + Q(Urb1,GW1,9) - S(GW1,9)
     
      + storage(GW1,8) =E= 0 ;
     
      (LHS = 394.535466082732, INFES = 394.535466082732 ****)
     
MassBalance_storage(SR4)..  Q(Hp1,SR4,9) + Q(SR2,SR4,9) - Q(SR4,J2,9)
     
      - Q(SR4,Urb2,9) - Q(SR4,Ag1,9) - S(SR4,9) + storage(SR4,8) =E= 0 ;
     
      (LHS = 149.783807581606, INFES = 149.783807581606 ****)
     
MassBalance_storage(GW2)..  - Q(GW2,Ag2,9) - Q(GW2,Ag1,9) + Q(Ag2,GW2,9)
     
      + Q(Ag1,GW2,9) - S(GW2,9) + storage(GW2,8) =E= 0 ;
     
      (LHS = 503.764500952297, INFES = 503.764500952297 ****)
     

---- MinFlow  =G=  

MinFlow(Desal1,Urb2,9)..  Q(Desal1,Urb2,9) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,J2,9)..  Q(WWTP1,J2,9) =G= 0 ; (LHS = 0)
     
MinFlow(WWTP1,Urb2,9)..  Q(WWTP1,Urb2,9) =G= 0 ; (LHS = 0)
     
MinFlow(Hp1,SR4,9)..  Q(Hp1,SR4,9) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(J1,SR2,9)..  Q(J1,SR2,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,J3,9)..  Q(J2,J3,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(J2,Ag2,9)..  Q(J2,Ag2,9) =G= 0 ; (LHS = 0)
     
MinFlow(J3,EndPt,9)..  Q(J3,EndPt,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR2,SR4,9)..  Q(SR2,SR4,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR3,Hp1,9)..  Q(SR3,Hp1,9) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinFlow(SR1,J1,9)..  Q(SR1,J1,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR1,Urb1,9)..  Q(SR1,Urb1,9) =G= 0 ; (LHS = 0)
     
MinFlow(GW1,Urb1,9)..  Q(GW1,Urb1,9) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,J2,9)..  Q(SR4,J2,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinFlow(SR4,Urb2,9)..  Q(SR4,Urb2,9) =G= 0 ; (LHS = 0)
     
MinFlow(SR4,Ag1,9)..  Q(SR4,Ag1,9) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag2,9)..  Q(GW2,Ag2,9) =G= 0 ; (LHS = 0)
     
MinFlow(GW2,Ag1,9)..  Q(GW2,Ag1,9) =G= 0 ; (LHS = 0)
     
MinFlow(Urb2,WWTP1,9)..  Q(Urb2,WWTP1,9) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,J1,9)..  Q(Urb1,J1,9) =G= 0 ; (LHS = 0)
     
MinFlow(Urb1,GW1,9)..  Q(Urb1,GW1,9) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,J3,9)..  Q(Ag2,J3,9) =G= 0 ; (LHS = 0)
     
MinFlow(Ag2,GW2,9)..  Q(Ag2,GW2,9) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,J2,9)..  Q(Ag1,J2,9) =G= 0 ; (LHS = 0)
     
MinFlow(Ag1,GW2,9)..  Q(Ag1,GW2,9) =G= 0 ; (LHS = 0)
     

---- MaxFlow  =L=  

MaxFlow(Desal1,Urb2,9)..  Q(Desal1,Urb2,9) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,J2,9)..  Q(WWTP1,J2,9) =L= 80 ; (LHS = 0)
     
MaxFlow(WWTP1,Urb2,9)..  Q(WWTP1,Urb2,9) =L= 80 ; (LHS = 0)
     
MaxFlow(Hp1,SR4,9)..  Q(Hp1,SR4,9) =L= 100 ; (LHS = 0)
     
MaxFlow(J1,SR2,9)..  Q(J1,SR2,9) =L= 100 ; (LHS = 0)
     
MaxFlow(J2,J3,9)..  Q(J2,J3,9) =L= 200 ; (LHS = 0)
     
MaxFlow(J2,Ag2,9)..  Q(J2,Ag2,9) =L= 100 ; (LHS = 0)
     
MaxFlow(J3,EndPt,9)..  Q(J3,EndPt,9) =L= 350 ; (LHS = 0)
     
MaxFlow(SR2,SR4,9)..  Q(SR2,SR4,9) =L= 100 ; (LHS = 0)
     
MaxFlow(SR3,Hp1,9)..  Q(SR3,Hp1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,J1,9)..  Q(SR1,J1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(SR1,Urb1,9)..  Q(SR1,Urb1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(GW1,Urb1,9)..  Q(GW1,Urb1,9) =L= 80 ; (LHS = 0)
     
MaxFlow(SR4,J2,9)..  Q(SR4,J2,9) =L= 200 ; (LHS = 0)
     
MaxFlow(SR4,Urb2,9)..  Q(SR4,Urb2,9) =L= 100 ; (LHS = 0)
     
MaxFlow(SR4,Ag1,9)..  Q(SR4,Ag1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(GW2,Ag2,9)..  Q(GW2,Ag2,9) =L= 80 ; (LHS = 0)
     
MaxFlow(GW2,Ag1,9)..  Q(GW2,Ag1,9) =L= 80 ; (LHS = 0)
     
MaxFlow(Urb2,WWTP1,9)..  Q(Urb2,WWTP1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,J1,9)..  Q(Urb1,J1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(Urb1,GW1,9)..  Q(Urb1,GW1,9) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,J3,9)..  Q(Ag2,J3,9) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag2,GW2,9)..  Q(Ag2,GW2,9) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,J2,9)..  Q(Ag1,J2,9) =L= 100 ; (LHS = 0)
     
MaxFlow(Ag1,GW2,9)..  Q(Ag1,GW2,9) =L= 100 ; (LHS = 0)
     

---- MaxStor  =L=  

MaxStor(Desal1,9)..  S(Desal1,9) =L= 100000 ; (LHS = 0)
     
MaxStor(SR2,9)..  S(SR2,9) =L= 200 ; (LHS = 0)
     
MaxStor(SR3,9)..  S(SR3,9) =L= 700 ; (LHS = 0)
     
MaxStor(SR1,9)..  S(SR1,9) =L= 500 ; (LHS = 0)
     
MaxStor(GW1,9)..  S(GW1,9) =L= 2000 ; (LHS = 0)
     
MaxStor(SR4,9)..  S(SR4,9) =L= 600 ; (LHS = 0)
     
MaxStor(GW2,9)..  S(GW2,9) =L= 2000 ; (LHS = 0)
     

---- MinStor  =G=  

MinStor(Desal1,9)..  S(Desal1,9) =G= 10 ; (LHS = 0, INFES = 10 ****)
     
MinStor(SR2,9)..  S(SR2,9) =G= 20 ; (LHS = 0, INFES = 20 ****)
     
MinStor(SR3,9)..  S(SR3,9) =G= 30 ; (LHS = 0, INFES = 30 ****)
     
MinStor(SR1,9)..  S(SR1,9) =G= 50 ; (LHS = 0, INFES = 50 ****)
     
MinStor(GW1,9)..  S(GW1,9) =G= 300 ; (LHS = 0, INFES = 300 ****)
     
MinStor(SR4,9)..  S(SR4,9) =G= 60 ; (LHS = 0, INFES = 60 ****)
     
MinStor(GW2,9)..  S(GW2,9) =G= 300 ; (LHS = 0, INFES = 300 ****)
     

---- Demand_satisfaction_ratio  =E=  

Demand_satisfaction_ratio(WWTP1,9)..  Q(WWTP1,J2,9) + Q(WWTP1,Urb2,9)
     
      - Q(Urb2,WWTP1,9) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(Hp1,9)..  Q(Hp1,SR4,9) - Q(SR3,Hp1,9) =E= 0 ;
     
      (LHS = 0)
     
Demand_satisfaction_ratio(J1,9)..  Q(J1,SR2,9) - Q(SR1,J1,9) - Q(Urb1,J1,9) =E= 
     0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J2,9)..  - Q(WWTP1,J2,9) + Q(J2,J3,9) + Q(J2,Ag2,9)
     
      - 0.95*Q(SR4,J2,9) - 0.95*Q(Ag1,J2,9) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(J3,9)..  - 0.9*Q(J2,J3,9) + Q(J3,EndPt,9)
     
      - Q(Ag2,J3,9) =E= 0 ; (LHS = 0)
     
Demand_satisfaction_ratio(EndPt,9)..  - Q(J3,EndPt,9) + 160*alpha(EndPt) =E= 0 ;
     
      (LHS = 160, INFES = 160 ****)
     
Demand_satisfaction_ratio(Urb2,9)..  - Q(Desal1,Urb2,9) - Q(WWTP1,Urb2,9)
     
      - Q(SR4,Urb2,9) + Q(Urb2,WWTP1,9) + 640*alpha(Urb2) =E= 0 ;
     
      (LHS = 640, INFES = 640 ****)
     
Demand_satisfaction_ratio(Urb1,9)..  - Q(SR1,Urb1,9) - Q(GW1,Urb1,9)
     
      + Q(Urb1,J1,9) + Q(Urb1,GW1,9) + 470*alpha(Urb1) =E= 0 ;
     
      (LHS = 470, INFES = 470 ****)
     
Demand_satisfaction_ratio(Ag2,9)..  - Q(J2,Ag2,9) - Q(GW2,Ag2,9) + Q(Ag2,J3,9)
     
      + Q(Ag2,GW2,9) + 210*alpha(Ag2) =E= 0 ; (LHS = 210, INFES = 210 ****)
     
Demand_satisfaction_ratio(Ag1,9)..  - 0.95*Q(SR4,Ag1,9) - Q(GW2,Ag1,9)
     
      + Q(Ag1,J2,9) + Q(Ag1,GW2,9) + 280*alpha(Ag1) =E= 0 ;
     
      (LHS = 280, INFES = 280 ****)
     

---- Objective  =E=  

Objective..  Z - alpha(EndPt) - 100*alpha(Urb2) - 90*alpha(Urb1) - 30*alpha(Ag2)
     
      - 50*alpha(Ag1) =E= 0 ;
     
      (LHS = -9.31095200940035E-11, INFES = 9.31095200940035E-11 ****)
     
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 45
Demo3.gms
Column Listing      SOLVE Demo3 Using LP From line 480


---- Q  flow in each link in each period

Q(Desal1,Urb2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MinFlow(Desal1,Urb2,9)
        1       MaxFlow(Desal1,Urb2,9)
       -1       Demand_satisfaction_ratio(Urb2,9)

Q(WWTP1,J2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,J2,9)
        1       MaxFlow(WWTP1,J2,9)
        1       Demand_satisfaction_ratio(WWTP1,9)
       -1       Demand_satisfaction_ratio(J2,9)

Q(WWTP1,Urb2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(WWTP1,Urb2,9)
        1       MaxFlow(WWTP1,Urb2,9)
        1       Demand_satisfaction_ratio(WWTP1,9)
       -1       Demand_satisfaction_ratio(Urb2,9)

Q(Hp1,SR4,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR4)
        1       MinFlow(Hp1,SR4,9)
        1       MaxFlow(Hp1,SR4,9)
        1       Demand_satisfaction_ratio(Hp1,9)

Q(J1,SR2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(SR2)
        1       MinFlow(J1,SR2,9)
        1       MaxFlow(J1,SR2,9)
        1       Demand_satisfaction_ratio(J1,9)

Q(J2,J3,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,J3,9)
        1       MaxFlow(J2,J3,9)
        1       Demand_satisfaction_ratio(J2,9)
       -0.9     Demand_satisfaction_ratio(J3,9)

Q(J2,Ag2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J2,Ag2,9)
        1       MaxFlow(J2,Ag2,9)
        1       Demand_satisfaction_ratio(J2,9)
       -1       Demand_satisfaction_ratio(Ag2,9)

Q(J3,EndPt,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(J3,EndPt,9)
        1       MaxFlow(J3,EndPt,9)
        1       Demand_satisfaction_ratio(J3,9)
       -1       Demand_satisfaction_ratio(EndPt,9)

Q(SR2,SR4,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MassBalance_storage(SR4)
        1       MinFlow(SR2,SR4,9)
        1       MaxFlow(SR2,SR4,9)

Q(SR3,Hp1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MinFlow(SR3,Hp1,9)
        1       MaxFlow(SR3,Hp1,9)
       -1       Demand_satisfaction_ratio(Hp1,9)

Q(SR1,J1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,J1,9)
        1       MaxFlow(SR1,J1,9)
       -1       Demand_satisfaction_ratio(J1,9)

Q(SR1,Urb1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MinFlow(SR1,Urb1,9)
        1       MaxFlow(SR1,Urb1,9)
       -1       Demand_satisfaction_ratio(Urb1,9)

Q(GW1,Urb1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MinFlow(GW1,Urb1,9)
        1       MaxFlow(GW1,Urb1,9)
       -1       Demand_satisfaction_ratio(Urb1,9)

Q(SR4,J2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,J2,9)
        1       MaxFlow(SR4,J2,9)
       -0.95    Demand_satisfaction_ratio(J2,9)

Q(SR4,Urb2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Urb2,9)
        1       MaxFlow(SR4,Urb2,9)
       -1       Demand_satisfaction_ratio(Urb2,9)

Q(SR4,Ag1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MinFlow(SR4,Ag1,9)
        1       MaxFlow(SR4,Ag1,9)
       -0.95    Demand_satisfaction_ratio(Ag1,9)

Q(GW2,Ag2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag2,9)
        1       MaxFlow(GW2,Ag2,9)
       -1       Demand_satisfaction_ratio(Ag2,9)

Q(GW2,Ag1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MinFlow(GW2,Ag1,9)
        1       MaxFlow(GW2,Ag1,9)
       -1       Demand_satisfaction_ratio(Ag1,9)

Q(Urb2,WWTP1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb2,WWTP1,9)
        1       MaxFlow(Urb2,WWTP1,9)
       -1       Demand_satisfaction_ratio(WWTP1,9)
        1       Demand_satisfaction_ratio(Urb2,9)

Q(Urb1,J1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Urb1,J1,9)
        1       MaxFlow(Urb1,J1,9)
       -1       Demand_satisfaction_ratio(J1,9)
        1       Demand_satisfaction_ratio(Urb1,9)

Q(Urb1,GW1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW1)
        1       MinFlow(Urb1,GW1,9)
        1       MaxFlow(Urb1,GW1,9)
        1       Demand_satisfaction_ratio(Urb1,9)

Q(Ag2,J3,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag2,J3,9)
        1       MaxFlow(Ag2,J3,9)
       -1       Demand_satisfaction_ratio(J3,9)
        1       Demand_satisfaction_ratio(Ag2,9)

Q(Ag2,GW2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag2,GW2,9)
        1       MaxFlow(Ag2,GW2,9)
        1       Demand_satisfaction_ratio(Ag2,9)

Q(Ag1,J2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MinFlow(Ag1,J2,9)
        1       MaxFlow(Ag1,J2,9)
       -0.95    Demand_satisfaction_ratio(J2,9)
        1       Demand_satisfaction_ratio(Ag1,9)

Q(Ag1,GW2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
        1       MassBalance_storage(GW2)
        1       MinFlow(Ag1,GW2,9)
        1       MaxFlow(Ag1,GW2,9)
        1       Demand_satisfaction_ratio(Ag1,9)


---- S  storage volume in storage nodes

S(Desal1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(Desal1)
        1       MaxStor(Desal1,9)
        1       MinStor(Desal1,9)

S(SR2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR2)
        1       MaxStor(SR2,9)
        1       MinStor(SR2,9)

S(SR3,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR3)
        1       MaxStor(SR3,9)
        1       MinStor(SR3,9)

S(SR1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR1)
        1       MaxStor(SR1,9)
        1       MinStor(SR1,9)

S(GW1,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW1)
        1       MaxStor(GW1,9)
        1       MinStor(GW1,9)

S(SR4,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(SR4)
        1       MaxStor(SR4,9)
        1       MinStor(SR4,9)

S(GW2,9)
                (.LO, .L, .UP, .M = 0, 0, +INF, 0)
       -1       MassBalance_storage(GW2)
        1       MaxStor(GW2,9)
        1       MinStor(GW2,9)


---- Z  objective function

Z
                (.LO, .L, .UP, .M = -INF, 270.999999999907, +INF, 0)
        1       Objective


---- alpha  target demand satisfaction ratio

alpha(EndPt)
                (.LO, .L, .UP, .M = 0, 1, 1, 1.00000000009876)
      160       Demand_satisfaction_ratio(EndPt,9)
       -1       Objective

alpha(Urb2)
                (.LO, .L, .UP, .M = 0, 1, 1, 100.000000000007)
      640       Demand_satisfaction_ratio(Urb2,9)
     -100       Objective

alpha(Urb1)
                (.LO, .L, .UP, .M = 0, 1, 1, 89.9999999999393)
      470       Demand_satisfaction_ratio(Urb1,9)
      -90       Objective

alpha(Ag2)
                (.LO, .L, .UP, .M = 0, 1, 1, 30.0000000000088)
      210       Demand_satisfaction_ratio(Ag2,9)
      -30       Objective

alpha(Ag1)
                (.LO, .L, .UP, .M = 0, 1, 1, 49.9999999999887)
      280       Demand_satisfaction_ratio(Ag1,9)
      -50       Objective


---- storage  an interim variable for saving the value of the storage at the end
              of each time-step

storage(Desal1,8)
                (.LO, .L, .UP, .M = 15618.05330077, 15618.05330077, 
15618.05330077, 0)
        1       MassBalance_storage(Desal1)

storage(SR2,8)
                (.LO, .L, .UP, .M = 130.813756336691, 130.813756336691, 
130.813756336691, 0)
        1       MassBalance_storage(SR2)

storage(SR3,8)
                (.LO, .L, .UP, .M = 228.87563353066, 228.87563353066, 
228.87563353066, 0)
        1       MassBalance_storage(SR3)

storage(SR1,8)
                (.LO, .L, .UP, .M = 91.2829561308916, 91.2829561308916, 
91.2829561308916, 0)
        1       MassBalance_storage(SR1)

storage(GW1,8)
                (.LO, .L, .UP, .M = 394.535466082732, 394.535466082732, 
394.535466082732, 0)
        1       MassBalance_storage(GW1)

storage(SR4,8)
                (.LO, .L, .UP, .M = 149.783807581606, 149.783807581606, 
149.783807581606, 0)
        1       MassBalance_storage(SR4)

storage(GW2,8)
                (.LO, .L, .UP, .M = 503.764500952297, 503.764500952297, 
503.764500952297, 0)
        1       MassBalance_storage(GW2)

GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 46
Demo3.gms
Model Statistics    SOLVE Demo3 Using LP From line 480


LOOPS                               tsteps   9


MODEL STATISTICS

BLOCKS OF EQUATIONS           7     SINGLE EQUATIONS           82
BLOCKS OF VARIABLES           5     SINGLE VARIABLES           45
NON ZERO ELEMENTS           139


GENERATION TIME      =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008


EXECUTION TIME       =        0.031 SECONDS      3 Mb  WEX227-227 May  8, 2008
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 47
Demo3.gms
Solution Report     SOLVE Demo3 Using LP From line 480


               L O O P S             tsteps 9

               S O L V E      S U M M A R Y

     MODEL   Demo3               OBJECTIVE  Z
     TYPE    LP                  DIRECTION  MAXIMIZE
     SOLVER  COINIPOPT           FROM LINE  480

**** SOLVER STATUS     1 NORMAL COMPLETION         
**** MODEL STATUS      1 OPTIMAL                   
**** OBJECTIVE VALUE              102.7891

 RESOURCE USAGE, LIMIT          0.025      1000.000
 ITERATION COUNT, LIMIT        14         10000

GAMS/CoinIpopt NLP Solver (IPOPT Library 3.4dev, using MUMPS Library 4.7.3)
written by A. Waechter

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Common Public License (CPL).
         For more information visit http://projects.coin-or.org/Ipopt
******************************************************************************

NOTE: You are using Ipopt by default with the MUMPS linear solver.
      Other linear solvers might be more efficient (see Ipopt documentation).


Total number of variables............................:       37
                     variables with only lower bounds:       32
                variables with lower and upper bounds:        5
                     variables with only upper bounds:        0
Total number of equality constraints.................:       17
Total number of inequality constraints...............:       64
        inequality constraints with only lower bounds:       32
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:       32


Number of Iterations....: 14

                                   (scaled)                 (unscaled)
Objective...............: -1.0278909040935150e+002  -1.0278909040935150e+002
Dual infeasibility......:  1.5485151621600344e-014   1.5485151621600344e-014
Constraint violation....:  1.8189894035458565e-012   1.8189894035458565e-012
Complementarity.........:  1.9721752739238638e-011   1.9721752739238638e-011
Overall NLP error.......:  1.9721752739238638e-011   1.9721752739238638e-011


Number of objective function evaluations             = 15
Number of objective gradient evaluations             = 15
Number of equality constraint evaluations            = 15
Number of inequality constraint evaluations          = 15
Number of equality constraint Jacobian evaluations   = 15
Number of inequality constraint Jacobian evaluations = 15
Number of Lagrangian Hessian evaluations             = 14
Total CPU secs in IPOPT (w/o function evaluations)   =      0.041
Total CPU secs in NLP function evaluations           =      0.000

EXIT: Optimal Solution Found.

---- EQU MassBalance_storage  

          LOWER     LEVEL     UPPER    MARGINAL

Desal1      .         .         .    -1.07E-15      
SR2         .         .         .    -6.95E-13      
SR3         .         .         .    -1.62E-13      
SR1         .         .         .       -0.191      
GW1         .         .         .    -7.43E-13      
SR4         .         .         .       -0.136      
GW2         .         .         .    -2.59E-13      

---- EQU MinFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .9      .       80.000     +INF  -1.25E-13      
WWTP1 .J2   .9      .         .        +INF     -0.007      
WWTP1 .Urb2 .9      .       55.438     +INF  -1.67E-13      
Hp1   .SR4  .9    50.000   100.000     +INF  -1.98E-13      
J1    .SR2  .9    10.000    10.000     +INF     -0.046      
J2    .J3   .9    10.000    10.000     +INF     -0.014      
J2    .Ag2  .9      .       75.295     +INF  -1.37E-13      
J3    .EndPt.9    10.000    10.000     +INF     -0.137      
SR2   .SR4  .9    10.000   100.000     +INF  -1.11E-13      
SR3   .Hp1  .9    50.000   100.000     +INF  -1.98E-13      
SR1   .J1   .9    10.000    10.000     +INF     -0.146      
SR1   .Urb1 .9      .       31.283     +INF  -3.15E-13      
GW1   .Urb1 .9      .       80.000     +INF  -1.25E-13      
SR4   .J2   .9    10.000    89.784     +INF  -1.28E-13      
SR4   .Urb2 .9      .      100.000     +INF  -9.80E-14      
SR4   .Ag1  .9      .      100.000     +INF  -9.88E-14      
GW2   .Ag2  .9      .       80.000     +INF  -1.24E-13      
GW2   .Ag1  .9      .       80.000     +INF  -1.25E-13      
Urb2  .WWTP1.9      .       55.438     +INF  -1.85E-13      
Urb1  .J1   .9      .         .        +INF     -0.073      
Urb1  .GW1  .9      .         .        +INF     -0.096      
Ag2   .J3   .9      .        1.000     +INF  -5.87E-12      
Ag2   .GW2  .9      .         .        +INF     -0.071      
Ag1   .J2   .9      .         .        +INF     -0.021      
Ag1   .GW2  .9      .         .        +INF     -0.089      

---- EQU MaxFlow  

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .9     -INF     80.000    80.000     0.156      
WWTP1 .J2   .9     -INF  1.6330E-9    80.000 1.160E-13      
WWTP1 .Urb2 .9     -INF     55.438    80.000 4.871E-13      
Hp1   .SR4  .9     -INF    100.000   100.000     0.068      
J1    .SR2  .9     -INF     10.000   100.000 1.100E-13      
J2    .J3   .9     -INF     10.000   200.000 5.068E-14      
J2    .Ag2  .9     -INF     75.295   100.000 3.633E-13      
J3    .EndPt.9     -INF     10.000   350.000 2.929E-14      
SR2   .SR4  .9     -INF    100.000   100.000     0.136      
SR3   .Hp1  .9     -INF    100.000   100.000     0.068      
SR1   .J1   .9     -INF     10.000   100.000 1.107E-13      
SR1   .Urb1 .9     -INF     31.283   100.000 1.464E-13      
GW1   .Urb1 .9     -INF     80.000    80.000     0.191      
SR4   .J2   .9     -INF     89.784   200.000 8.909E-14      
SR4   .Urb2 .9     -INF    100.000   100.000     0.021      
SR4   .Ag1  .9     -INF    100.000   100.000     0.034      
GW2   .Ag2  .9     -INF     80.000    80.000     0.143      
GW2   .Ag1  .9     -INF     80.000    80.000     0.179      
Urb2  .WWTP1.9     -INF     55.438   100.000 2.166E-13      
Urb1  .J1   .9     -INF  1.355E-10   100.000 9.936E-14      
Urb1  .GW1  .9     -INF  1.033E-10   100.000 9.950E-14      
Ag2   .J3   .9     -INF      1.000   100.000 1.071E-13      
Ag2   .GW2  .9     -INF  1.390E-10   100.000 9.936E-14      
Ag1   .J2   .9     -INF  4.805E-10   100.000 9.810E-14      
Ag1   .GW2  .9     -INF  1.115E-10   100.000 9.947E-14      

---- EQU MaxStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.9     -INF  15538.053 1.0000E+5 1.840E-17      
SR2   .9     -INF     40.814   200.000 6.229E-14      
SR3   .9     -INF    128.876   700.000 1.739E-14      
SR1   .9     -INF     50.000   500.000 2.211E-14      
GW1   .9     -INF    314.535  2000.000 5.831E-15      
SR4   .9     -INF     60.000   600.000 1.841E-14      
GW2   .9     -INF    343.765  2000.000 5.932E-15      

---- EQU MinStor  

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.9    10.000 15538.053     +INF  -5.44E-16      
SR2   .9    20.000    40.814     +INF  -5.06E-13      
SR3   .9    30.000   128.876     +INF  -1.02E-13      
SR1   .9    50.000    50.000     +INF     -0.191      
GW1   .9   300.000   314.535     +INF  -7.17E-13      
SR4   .9    60.000    60.000     +INF     -0.136      
GW2   .9   300.000   343.765     +INF  -2.36E-13      

---- EQU Demand_satisfaction_ratio  

           LOWER     LEVEL     UPPER    MARGINAL

WWTP1.9      .         .         .        0.156      
Hp1  .9      .         .         .        0.068      
J1   .9      .         .         .        0.046      
J2   .9      .         .         .        0.143      
J3   .9      .         .         .        0.143      
EndPt.9      .         .         .        0.006      
Urb2 .9      .         .         .        0.156      
Urb1 .9      .         .         .        0.191      
Ag2  .9      .         .         .        0.143      
Ag1  .9      .         .         .        0.179      

                       LOWER     LEVEL     UPPER    MARGINAL

---- EQU Objective       .         .         .        1.000      

---- VAR Q  flow in each link in each period

                  LOWER     LEVEL     UPPER    MARGINAL

Desal1.Urb2 .9      .       80.000     +INF  -1.25E-13      
WWTP1 .J2   .9      .         .        +INF     -0.007      
WWTP1 .Urb2 .9      .       55.438     +INF  -1.67E-13      
Hp1   .SR4  .9      .      100.000     +INF  -9.94E-14      
J1    .SR2  .9      .       10.000     +INF  -1.08E-12      
J2    .J3   .9      .       10.000     +INF  -1.97E-12      
J2    .Ag2  .9      .       75.295     +INF  -1.37E-13      
J3    .EndPt.9      .       10.000     +INF  -1.03E-12      
SR2   .SR4  .9      .      100.000     +INF  -9.97E-14      
SR3   .Hp1  .9      .      100.000     +INF  -9.94E-14      
SR1   .J1   .9      .       10.000     +INF  -1.03E-12      
SR1   .Urb1 .9      .       31.283     +INF  -3.15E-13      
GW1   .Urb1 .9      .       80.000     +INF  -1.25E-13      
SR4   .J2   .9      .       89.784     +INF  -1.14E-13      
SR4   .Urb2 .9      .      100.000     +INF  -9.81E-14      
SR4   .Ag1  .9      .      100.000     +INF  -9.89E-14      
GW2   .Ag2  .9      .       80.000     +INF  -1.25E-13      
GW2   .Ag1  .9      .       80.000     +INF  -1.25E-13      
Urb2  .WWTP1.9      .       55.438     +INF  -1.85E-13      
Urb1  .J1   .9      .         .        +INF     -0.073      
Urb1  .GW1  .9      .         .        +INF     -0.096      
Ag2   .J3   .9      .        1.000     +INF  -5.87E-12      
Ag2   .GW2  .9      .         .        +INF     -0.071      
Ag1   .J2   .9      .         .        +INF     -0.021      
Ag1   .GW2  .9      .         .        +INF     -0.089      

---- VAR S  storage volume in storage nodes

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.9      .    15538.053     +INF  -6.44E-16      
SR2   .9      .       40.814     +INF  -2.52E-13      
SR3   .9      .      128.876     +INF  -7.79E-14      
SR1   .9      .       50.000     +INF  -2.01E-13      
GW1   .9      .      314.535     +INF  -3.19E-14      
SR4   .9      .       60.000     +INF  -1.67E-13      
GW2   .9      .      343.765     +INF  -2.92E-14      

                       LOWER     LEVEL     UPPER    MARGINAL

---- VAR Z              -INF    102.789     +INF       .         

  Z  objective function

---- VAR alpha  target demand satisfaction ratio

         LOWER     LEVEL     UPPER    MARGINAL

EndPt      .        0.063     1.000 -1.54E-10      
Urb2       .        0.281     1.000 -1.99E-11      
Urb1       .        0.237     1.000 -2.85E-11      
Ag2        .        0.735     1.000 1.839E-11      
Ag1        .        0.625     1.000 1.189E-11      

---- VAR storage  an interim variable for saving the value of the storage at the
                  end of each time-step

            LOWER     LEVEL     UPPER    MARGINAL

Desal1.8 15618.053 15618.053 15618.053      EPS       
SR2   .8   130.814   130.814   130.814      EPS       
SR3   .8   228.876   228.876   228.876      EPS       
SR1   .8    91.283    91.283    91.283      EPS       
GW1   .8   394.535   394.535   394.535      EPS       
SR4   .8   149.784   149.784   149.784      EPS       
GW2   .8   503.765   503.765   503.765      EPS       


**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS Rev 227  x86_64/MS Windows                        11/06/14 19:13:50 Page 48
Demo3.gms
E x e c u t i o n


----    484 VARIABLE Z.L                   =      102.789  objective function

----    484 VARIABLE Obj.L  

1 271.000,    2 121.006,    3 271.000,    4 271.000,    5 271.000,    6 271.000
7 271.000,    8 271.000,    9 102.789


----    484 VARIABLE storage.L  an interim variable for saving the value of the 
                                storage at the end of each time-step

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418

     +           7           8           9

Desal1   15662.265   15618.053   15538.053
SR2        131.130     130.814      40.814
SR3        295.764     228.876     128.876
SR1        159.703      91.283      50.000
GW1        418.758     394.535     314.535
SR4        143.917     149.784      60.000
GW2        496.014     503.765     343.765


----    484 VARIABLE S.L  storage volume in storage nodes

                 1           2           3           4           5           6

Desal1   10968.951   11888.951   12837.493   13792.319   14750.803   15706.985
SR2        176.531     137.604     128.438     129.139     128.107     128.101
SR3        562.747     492.747     443.164     408.338     383.796     362.214
SR1        155.003     113.930     133.417     191.892     220.853     237.939
GW1        571.152     491.152     479.952     463.421     449.248     436.363
SR4        141.083      60.000      99.132     116.529     121.243     136.812
GW2        562.972     402.972     443.239     449.189     468.758     488.418

     +           7           8           9

Desal1   15662.265   15618.053   15538.053
SR2        131.130     130.814      40.814
SR3        295.764     228.876     128.876
SR1        159.703      91.283      50.000
GW1        418.758     394.535     314.535
SR4        143.917     149.784      60.000
GW2        496.014     503.765     343.765


----    484 VARIABLE Q.L  flow in each link in each period

                       1           2           3           4           5

Desal1.Urb2       31.049      80.000      51.458      45.174      41.516
WWTP1 .J2         14.054                  25.928      14.473      17.125
WWTP1 .Urb2       34.518      56.457      38.327      23.135      27.088
Hp1   .SR4        77.253     100.000      79.583      64.826      64.542
J1    .SR2        48.846      61.072      67.713      44.057      49.211
J2    .J3         12.260      10.000      12.671      12.538      12.701
J2    .Ag2        56.632      67.029      64.515      40.084      57.224
J3    .EndPt      15.000      10.000      14.000      15.000      15.000
SR2   .SR4        72.314     100.000      76.878      43.356      50.243
SR3   .Hp1        77.253     100.000      79.583      64.826      64.542
SR1   .J1         31.125      61.072      38.459      27.665      31.412
SR1   .Urb1       63.872     100.000      62.054      43.860      49.626
GW1   .Urb1       55.692      80.000      54.276      38.335      39.399
SR4   .J2         36.506      81.083      31.717      24.550      33.079
SR4   .Urb2       73.005     100.000      34.470      31.299      37.609
SR4   .Ag1        48.973     100.000      51.143      34.936      39.383
GW2   .Ag2        45.197      80.000      34.373      23.312      36.120
GW2   .Ag1        56.247      80.000      55.678      32.939      39.619
Urb2  .WWTP1      48.572      56.457      64.256      37.607      44.213
Urb1  .J1         17.721                  29.253      16.392      17.799
Urb1  .GW1        26.843                  43.076      21.803      25.226
Ag2   .J3          3.966       1.000       2.596       3.716       3.569
Ag2   .GW2        37.863                  75.293      38.681      67.775
Ag1   .J2         21.218                  22.239      15.608      22.499
Ag1   .GW2        26.553                  55.026      23.521      27.533

           +           6           7           8           9

Desal1.Urb2       43.818      44.720      44.212      80.000
WWTP1 .J2         18.429      14.294      14.458
WWTP1 .Urb2       31.164      24.872      25.179      55.438
Hp1   .SR4        71.582      66.450      66.888     100.000
J1    .SR2        56.799      45.841      42.642      10.000
J2    .J3         12.757      12.556      13.381      10.000
J2    .Ag2        53.924      42.477      42.698      75.295
J3    .EndPt      15.000      14.000      15.000      10.000
SR2   .SR4        56.805      42.812      42.958     100.000
SR3   .Hp1        71.582      66.450      66.888     100.000
SR1   .J1         35.397      28.310      25.485      10.000
SR1   .Urb1       57.518      49.926      42.935      31.283
GW1   .Urb1       44.870      40.997      44.837      80.000
SR4   .J2         30.008      25.937      26.498      89.784
SR4   .Urb2       39.611      38.574      39.247     100.000
SR4   .Ag1        43.199      37.647      38.235     100.000
GW2   .Ag2        27.134      23.746      24.228      80.000
GW2   .Ag1        42.572      36.396      36.738      80.000
Urb2  .WWTP1      49.593      39.166      39.637      55.438
Urb1  .J1         21.402      17.531      17.157
Urb1  .GW1        31.985      23.392      20.615
Ag2   .J3          3.519       2.700       2.957       1.000
Ag2   .GW2        55.539      41.523      41.970
Ag1   .J2         20.784      16.947      17.314
Ag1   .GW2        33.828      26.213      26.748



EXECUTION TIME       =        0.000 SECONDS      3 Mb  WEX227-227 May  8, 2008


USER: GAMS Development Corporation, Washington, DC   G871201/0000CA-ANY
      Free Demo,  202-342-0180,  sales@gams.com,  www.gams.com   DC0000


**** FILE SUMMARY

Input      C:\My Manchester\Watersys\Demo3\Demo 3.gms
Output     C:\My Manchester\Watersys\Demo3\Demo 3.lst
